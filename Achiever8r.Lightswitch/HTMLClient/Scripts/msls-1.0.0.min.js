/*!
  Microsoft LightSwitch JavaScript Library v1.0.0
  Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(n,t){"use strict";var b=n.Object,c=n.WinJS,ha=n.jQuery,i=ha,rt=n.Globalize,r=b.create({}),ti=n.setTimeout,ke=n.clearTimeout,ei,uu,rf,nr,uf,oi,u,a,ni,de,l,fu,e,d,ct,ps,tr,ge,vt,wi,ff,lt,o,s,ws,no,si,y,cu,ar,h,bs,wt,bt,ef,lu,of,ks,ds,k,ca,et,au,gs,sf,f,nh,or,eu,hf,to,hi,ut,vu,cf,io,vr,th,ot,ou,lf,kt,ih,yr,ro,rh,uh,fh,eh,oh,sh,uo,pr,fo,hh,ch,eo,lh,oo,so,st,wr,ci,bi,sr,hr,ir,br,yu,pu,ii,kr,rr,ah,vh,yh,ph,wh,bh,kh,dh,gh,nc,ho,dr,wu,tc,bu,co,af,ic,rc,ur,uc,fc,ec,oc,sc,hc,cc,lc,ac,vc,lo,ao,vo,yc,pc,ku,yt,vf,su,yo,wc,yf,pf,wf,bc,bf,po,la,pt,p,gr,wo,bo,kf,ko,nt,li,df,aa,kc,dc,gc,nl,fy,go,ri,ns,ai,ki,it,vi,g,ts,is,gf,ne,du,tl,fr,fl,gt,ry,at,le,uy,hs,ae,ve,cr,ua,er,pi,di,gi,fa,cs,ea,v,tt,ft,fi,w,ls,ye,ru,as,vs,ys;(function(){function h(n,t,r,u){var h,f,c,e,o,s;if(!n||!t)return null;for(h=n.split(r),f=0,c=h.length;f<c;f++)if(e=h[f],o=e.indexOf("="),o>0&&i.trim(e.substr(0,o))===t)return s=e.substr(o+1),u&&(s=decodeURIComponent(s)),s;return null}function c(n,t){var e={},o,r,u,f;if(!n)return e;for(o=n.split(t),r=0;r<o.length;r++)f=o[r],u=f.indexOf("="),u>0&&(e[i.trim(f.substr(0,u))]=f.substr(u+1));return e}var s=b.prototype.toString,o=b.getPrototypeOf(r)!==b.prototype?b.getPrototypeOf(r):null,t,f,e;ei=!n.msls,t=n.location,f=t.protocol+"//"+t.host+t.pathname,uu=f.substring(0,f.lastIndexOf("/")),rf=uu.substring(0,uu.lastIndexOf("/")),nr={enableModalScrollRegions:null,showContentBehindDialog:null,transitionAnimationLevel:null},e={},uf=function(n){if(!n)return null;var f="msls-client-parameters",u,t,i,r,o;if(u=document.cookie,t=h(u,f,";",!0),t){i=c(t,"&");for(r in i)e[r]=i[r]}return e[n]},oi=function(n){return!!n&&s.call(n)==="[object Function]"},u=function(n,t,i,r){t.charCodeAt(0)===95||r?b.prototype.hasOwnProperty.call(n,t)?n[t]=i:b.defineProperty(n,t,{configurable:!0,enumerable:!ei,writable:!0,value:i}):n[t]=i},a=function(n,t,i){o&&u(o,n,t,i)}})(),function(){function a(){for(++h===l&&(clearInterval(c),r=!1);t.length;){var n=t.shift(),u=n.invokeTime,i=n.nativeHandle;n.nativeHandle=f(n.action,Math.max(u-Date.now(),0),n.args),i&&o(i)}}function e(){r||(c=setInterval(a,s),r=!0),h=0}function v(n,i,u){var o={action:n,invokeTime:Date.now()+(i||0),args:u,invoked:!1,nativeHandle:null};return r?(t.push(o),Date.now()-o.invokeTime>s?e():o.nativeHandle=f(function(){if(!o.invoked){o.invoked=!0,o.action();var n=t.indexOf(o);t.splice(n,1)}},i,u),o):(o.nativeHandle=f(n,i,u),o)}function y(n){var i;n.nativeHandle&&(o(n.nativeHandle),n.nativeHandle=null),i=t.indexOf(n),i!==-1&&t.splice(i,1)}function p(){u=!0;try{while(i.length)i.shift()()}finally{u=!1}}var f=n.setTimeout,o=n.clearTimeout,s=100,l=30,h=0,c,r=!1,t=[],i,u;navigator.userAgent.match(/OS 6(_\d)+/i)&&(ti=v,ke=y,n.addEventListener("touchstart",e,!0),n.addEventListener("touchend",e,!0)),i=[],u=!1,ni=function(n){i.push(n),i.length!==1||u||ti(p,0)}}(),function(){function u(n){var u,e,r,i,f,o;if(!n)return{};for(u={},e=b.keys(n),f=0,o=e.length;f<o;f++)r=e[f],i=n[r],i&&typeof i=="object"&&("value"in i||"get"in i||oi(i.defineOn))?(i.configurable===t&&(i.configurable=!0),ei||(i.enumerable=!0),i.get||i.writable!==t||(i.writable=!0),oi(i.defineOn)?i.enumerable===t&&(i.enumerable=r.charCodeAt(0)!==95):u[r]=i):u[r]=i;return u}function f(n,t){var u,f,i,r,e;if(t)for(u=b.keys(t),r=0,e=u.length;r<e;r++)f=u[r],i=t[f],i&&typeof i=="object"&&oi(i.defineOn)&&i.defineOn(n,f)}function i(n,t,i){var e=u(i),r=c.Namespace.defineWithParent(n,t,e);return f(r,i),r}de=function(n){return n&&typeof n=="object"&&("value"in n||"get"in n)&&(n={value:n}),n},l=function(n,t){return{get:n,set:t}},fu=function(n,t){return n?i(r,n,t):i({msls:r},"msls",t)},e=function(n,t,r,e,o,s){var l=u(o),a=u(s),h;return e?c.Class.derive(e,r,l,a):c.Class.define(r,l,a),f(r.prototype,o),f(r,s),t&&(h={},h[t]=r,n&&typeof n!="string"?i({_:n},"_",h):fu(n,h)),r},d=function(n){for(var r=[n],t=1,i=arguments.length;t<i;t++)r.push(u(arguments[t]));for(c.Class.mix.apply(null,r),t=1,i=arguments.length;t<i;t++)f(n.prototype,arguments[t])},ct=function(n,t){var u=b.keys(t)[0],f=t[u],e,r={};return r[u]=de(f),e=n&&typeof n!="string"?i({_:n},"_",r):fu(n,r),f},ps=function(n,t){if(n)for(var i in n)if(n[i]===t)return!0;return!1},a("_addToNamespace",function(t,r){return i(n,t,r)})}(),function(){function t(t,i){var u=this,r=n.eventMixin;t.addEventListener||(t.addEventListener=r.addEventListener),t.dispatchEvent||b.defineProperty(t,"dispatchEvent",{configurable:!0,enumerable:!ei,writable:!0,value:r.dispatchEvent}),t.removeEventListener||(t.removeEventListener=r.removeEventListener),u.noProperty||b.defineProperties(t,n.createEventProperties(i))}function i(n,t){var i=this,r=n.dispatchEvent,u=i.value;b.defineProperty(n,t,{configurable:!0,enumerable:!ei,writable:!0,value:function(n,t){return u.call(this,n,t,r)}})}var n=c.Utilities;tr=function(n){return{noProperty:n,defineOn:t}},ge=function(n){return{value:n,defineOn:i}}}(),function(){var t=new(c.Class.mix(null,c.Utilities.eventMixin));vt=function(n,i){t.addEventListener(n,i)},wi=function(n,i){t.removeEventListener(n,i)},ff=function(n,t){function i(){wi(n,i),t.apply(this,arguments)}vt(n,i)},lt=function(n,i){t.dispatchEvent(n,i)},(!!n.msls||n.__mslsTestMode)&&(a("subscribe",vt),a("unsubscribe",wi))}(),function(){function i(n,t){t&&o(n,new Date(t))}var u=!!n.__mslsTestMode,e="codeMarkerNotification",r=u?[]:null,f,t;o=function(n,t){if(u){var i={marker:n,time:t||new Date};r?r.push(i):lt(e,i)}},ws=function(){u&&!!r&&(r.forEach(function(n){lt(e,n)}),r=null)},u&&(f=n.performance,t=f&&f.timing,t&&(i("Application.NavigationStart",t.navigationStart),i("Application.ConnectServerStart",t.connectStart),i("Application.ConnectServerReady",t.connectEnd),i("Application.RequestHtml",t.requestStart),i("Application.GetHtmlStart",t.responseStart),i("Application.GetHtmlEnd",t.responseEnd),i("Application.LoadDomStart",t.domLoading),i("Application.DomParsed",t.domInteractive)),n.startupTime&&o("Application.ScriptStart",n.startupTime)),s={applicationDomLoaded:"Application.LoadDomEnd",applicationRun:"Application.Run",dispatchStart:"DispatchOperationCodeQueue.Start",dispatchEnd:"DispatchOperationCodeQueue.End",loadResourcesStart:"LoadResources.Start",loadResourcesEnd:"LoadResources.End",loadModelStart:"LoadModel.Start",loadModelEnd:"LoadModel.End",parseModelStart:"ParseModel.Start",parseModelEnd:"ParseModel.End",processModelStart:"ProcessModel.Start",processModelEnd:"ProcessModel.End",queryDataStart:"QueryData.Start",queryDataEnd:"QueryData.End",queryDataApplyEnd:"QueryData.ApplyEnd",saveDataStart:"SaveData.Start",saveDataEnd:"SaveData.End",loadScreenStart:"LoadScreen.Start",loadScreenEnd:"LoadScreen.End",pageActivationStart:"PageActivation.Start",pageActivationEnd:"PageActivation.End",createPageStart:"CreatePage.Start",createPageEnd:"CreatePage.End",navigationStart:"Navigation.Start",navigationEnd:"Navigation.End",navigationBackEnd:"NavigationBack.End",cleanNavigationStackStart:"CleanNavigationStack.Start",cleanNavigationStackEnd:"CleanNavigationStack.End",transitionPrepare:"Transition.Prepare",transitionStart:"Transition.Start",transition_Stage1Start:"Transition_Stage1.Start",transition_Stage2Start:"Transition_Stage2.Start",transition_Stage3Start:"Transition_Stage3.Start",transition_CleanupStart:"Transition_Cleanup.Start",transitionEnd:"Transition.End",fillCollectionStart:"FillCollection.Start",fillCollectionEnd:"FillCollection.End",controlViewCreating:"ControlViewCreating",controlViewCreated:"ControlViewCreated",listViewLoadStart:"ListViewLoad.Start",listViewLoadDataLoaded:"ListViewLoad.DataLoaded",listViewLoadApplyEnd:"ListViewLoad.ApplyEnd",listViewLoadLoadMore:"ListViewLoad.LoadMore",listViewLoadEnhanceView:"ListViewLoad.EnhanceView",listViewLoadEnd:"ListViewLoad.End",listItemClicked:"ItemClicked",listSelectedItemChanged:"SelectedItemChanged",modalViewShowStart:"ModalViewShow.Start",modalViewShowEnd:"ModalViewShow.End",modalViewCloseStart:"ModalViewClose.Start",modalViewCloseEnd:"ModalViewClose.End",userTap:"User.Tap",executeActionStart:"ExecuteAction.Start",executeActionEnd:"ExecuteAction.End",layoutPartialRequest:"Layout.PartialReq",layoutFullRequest:"Layout.FullReq",layoutStart:"Layout.Start",layoutEnd:"Layout.End",layoutEndNotified:"Layout.EndNotified",updateAttachedLabelsStart:"UpdateLabels.Start",updateAttachedLabelsEnd:"UpdateLabels.End",goUrlStart:"GoUrl.Start",goUrlEnd:"GoUrl.End",changePageStart:"ChangePage.Start",changePageEnd:"ChangePage.End",createTemplateStart:"CreateTemplate.Start",createTemplateEnd:"CreateTemplate.End",createPageControlsStart:"CreatePageControls.Start",createPageControlsEnd:"CreatePageControls.End",getPopupContentStart:"GetPopupContent.Start",getPopupContentEnd:"GetPopupContent.End",openPopupStart:"OpenPopup.Start",openPopupEnd:"OpenPopup.End",closePopupStart:"ClosePopup.Start",closePopupEnd:"ClosePopup.End",createPopupStart:"CreatePopup.Start",createPopupEnhance:"CreatePopup.Enhance",createPopupEnd:"CreatePopup.End",progressShow:"Progress.Show",progressHide:"Progress.Hide"}}(),function(){no=function(n){return b.keys(n).map(function(t){return n[t]})}}(),function(){function n(n){this._array=n,this._length=n.length,this._index=-1}e(r,"Sequence",function(){},null,{array:l(function(){var n=[];return this.each(function(){n.push(this)}),n}),each:function(n){var t=this._iterator?this._iterator():null,i;if(t)while(t.next())if(i=t.item(),n.call(i,i)===!1)break}}),si=r.Sequence,e(si,"Array",function(n){si.call(this),u(this,"_array",n)},si,{_iterator:function(){return new n(this._array)}}),n.prototype.next=function(){return++this._index<this._length},n.prototype.item=function(){return this._array[this._index]},y=function(n){return new si.Array(n)},a("Sequence",si),a("iterate",y)}(),cu="change",function(){function f(n,t){if(i.length){var r=n._dependents||{},f=r[t];f||(u(n,"_dependents",r),f=r[t]=[]),f.push(i[i.length-1])}}function s(n,t,r){var f=n._trackingStub;f||u(n,"_trackingStub",f={o:n}),i.push({trackingStub:f,name:t,version:r})}function c(){i.pop()}function a(n){var t=n.trackingStub.o,i,u,r;t&&(i=n.name,u=t._computeStates,r=u[i],r.version===n.version&&(r.isComputed=!1,t.dispatchChange(i)))}function r(n){var t=cu;return n&&(t=n+"_"+t),t}function e(n){var i=n.target,t=n.propertyName;i.dispatchEvent(r(t),t),i.dispatchEvent(cu,t)}function v(n,t){this.addEventListener(r(n),t)}function y(t){var o=!n,s=this._dependents,u=s?s[t]:null,h,r={target:this,propertyName:t},i,f;if(!u||!u.length)o?e(r):n.push(r);else{for(o&&(n=[]),n.push(r),s[t]=[],i=0,f=u.length;i<f;i++)a(u[i]);if(o)for(h=n,n=null,i=0,f=h.length;i<f;i++)r=h[i],e(r)}}function p(n,t){this.removeEventListener(r(n),t)}function o(n,i){var h=n.constructor,e=this,o={},s,c;ar(h),o[r(i)]=tr(!0),e.get?(c=e.get,o[i]=l(function(){return f(this,i),c.call(this)},e.set)):(s="__"+i,e.initialValue!==t&&(o[s]={enumerable:!ei,value:e.initialValue}),o[i]=l(function(){return f(this,i),this[s]},function(n){this[s]!==n&&(u(this,s,n),this.dispatchChange(i))})),typeof e.enumerable=="boolean"&&(o[i].enumerable=e.enumerable),d(h,o)}function w(n,t){var e=n.constructor,i=this,r={},f="__"+t;r[t]=h(null,function(){var r=this,e=r._computeStates||{},n=e[t];if(n||(u(r,"_computeStates",e),n=e[t]={version:0,isComputing:!1,isComputed:!1}),!n.isComputing&&!n.isComputed){s(r,t,++n.version),n.isComputing=!0;try{u(r,f,i.compute.call(r)),n.isComputed=!0}finally{n.isComputing=!1,c()}}return r[f]},i.set),typeof i.enumerable=="boolean"&&(r[t].enumerable=i.enumerable),d(e,r)}var i=[],n;ar=function(n){var t=n.prototype;"onchange"in t||d(n,{change:tr()}),t.addChangeListener||(t.addChangeListener=v),t.dispatchChange||b.defineProperty(t,"dispatchChange",{configurable:!0,enumerable:!ei,writable:!0,value:y}),t.removeChangeListener||(t.removeChangeListener=p)},h=function(n,t,i){return{get:t,set:i,initialValue:n,defineOn:o}},bs=function(n){n.defineOn=o},wt=function(n,t){return{compute:n,set:t,defineOn:w}}}(),function(){var n,t;bt=function(n,t){var i=n.__dependencies;i||u(n,"__dependencies",i=[]),i.push(t),u(t,"__sponsor",n)},ef=function(n){var r=n.__sponsor,t,i;if(r&&!r.__disposed&&(t=r.__dependencies,Array.isArray(t)))for(i=t.length-1;i>=0;i--)if(t[i]===n){t.splice(i,1);return}r&&(n.__sponsor=null)},ds=function(n){return!!n.__sponsor},k=function(n){var i=n,o,t,r,e,f,s;if(n&&!n.__disposed){while(i){if(t=i._onDispose,!t)break;if(t!==o){try{t.call(n)}catch(h){}o=t}i=b.getPrototypeOf(i)}if(r=n.__dependencies,Array.isArray(r))for(n.__dependencies=null,f=0,s=r.length;f<s;f++)e=r[f],k(e),e.__sponsor=null;n._listeners=null,n._dependents=null,n._trackingStub&&(n._trackingStub.o=null,n._trackingStub=null),u(n,"__disposed",!0)}},ca=function(n){return!!n.__disposed},e(r,"AutoDisposeEventListener",function(n,t,i){var r=this;r.source=n,r.eventName=t,r.listener=i},null,{_onDispose:function(){var n=this,t=n.source;t&&t.removeEventListener(n.eventName,n.listener),ef(n)}}),lu=function(n,t,i,u){n.addEventListener(t,u);var f=new r.AutoDisposeEventListener(n,t,u);return bt(i,f),f},e(r,"AutoDisposeChangeListener",function(n,t,i){var r=this;r.source=n,r.propertyName=t,r.listener=i},null,{_onDispose:function(){var n=this,t=n.source;t.removeChangeListener&&t.removeChangeListener(n.propertyName,n.listener),ef(n)}}),of=function(n,t,i,u){n.addChangeListener(t,u);var f=new r.AutoDisposeChangeListener(n,t,u);return bt(i,f),f},e(r,"AutoDisposeNotificationListener",function(n,t){var i=this;i.notificationType=n,i.listener=t},null,{_onDispose:function(){var n=this;wi(n.notificationType,n.listener),ef(n)}}),ks=function(n,t,i){vt(n,i);var u=new r.AutoDisposeNotificationListener(n,i);return bt(t,u),u}}(),function(){function v(n){i.push(n),i.length!==1||r||f||ni(h)}function h(){for(o(s.dispatchStart),f=!0;i.length;)if(i.shift()(),r)break;f=!1,o(s.dispatchEnd)}function y(t,i){n.push([t,i])}function t(){var t=n.length;return t?n[t-1][0]:null}function l(t){var i=n.length,r=n[i-1][1];r(t)}function p(){n.pop()}function w(){r++}function k(){r--,!r&&i.length>0&&!f&&ni(h)}function d(n,i){var r=n._sequence;return oi(r)&&(u(i,"_sequence",r),!t()||l({sequence:r})),i}function e(n){var i=b.getPrototypeOf(n);i._thenEx||c.Class.mix(i.constructor,{done:function(n,r,u){var f=t();f&&(n=f.code(n,!0),r=f.code(r,!0),u=f.code(u,!0)),this._done!==i._done&&(this._done=i._done),this._done(n,r,u)},_done:i.done,then:function(n,r,u){var f=t();return f&&(n=f.code(n,!0),r=f.code(r,!0),u=f.code(u,!0)),this._then!==i._then&&(this._then=i._then),d(this,this._then(n,r,u))},_then:i.then,_thenEx:function(n){return this.then(function(t){return n(null,t)},function(t){return n(t)})}})}var i=[],r=0,f,n=[];et=function(n,i){function a(){return!e}function et(n){o?o.push(n):n.sequence()}function nt(){if(!a()){var n=e,t=o;for(e=null,w();t.length;)t.shift().sequence();while(n.length)n.shift()();o=null}}function tt(n,t,i){return n?function(){function u(t){var i,u;y(r,et),d++;try{u=n.apply(f,o)}catch(e){t?i=e:r.error(e)}finally{d--,p()}if(g?g=!1:nt(),i)throw i;return u}var f=this,o=Array.prototype.slice.call(arguments,0);return t||a()||d?u(i):(e.push(u),v(function(){a()||e.shift()()}),null)}:n}function it(n,i){if(s||h){if(t()!==r){tt(function(){it(n,i)})();return}try{n?s(n):h(i)}finally{s=h=null}}}var r,rt=t(),ft=!!rt&&!i,e=[],d=0,o=[],g=!1,f,s,h,ut;return ft&&l({sequence:nt}),r={promise:function(){return f},code:function(n,t){return tt(n,null,t)},interleave:function(){t()===r&&(g=!0)},error:function(n){it(n,null)},complete:function(n){it(null,n)}},f=b.create(c.Promise.prototype),u(f,"_sequence",nt),ut=f._cleanupAction,u(f,"_cleanupAction",function(){ut.call(this);var n=a();e=null,o=null,n&&k()}),c.Promise.call(f,function(t,i){var u;n?(s=i,h=t,u=!!rt,tt(n,u).call(r,r),n=null):t()}),f},e(c.Promise.prototype),e(c.Promise.wrapError(null)),e(c.Promise.wrap(null)),a("promiseOperation",et)}(),function(){function n(n){this._iterator=n._source._iterator(),this._predicate=n._predicate}var t;e(r,"WhereSequence",function(n,t){si.call(this),u(this,"_source",n),u(this,"_predicate",t)},si,{_iterator:function(){return new n(this)}}),t=r.WhereSequence,n.prototype.next=function(){for(var t=this._iterator,i=this._predicate,n;t.next();)if(n=t.item(),i.call(n,n))return!0;return!1},n.prototype.item=function(){return this._iterator.item()},d(si,{all:function(n){return!this.any(function(t){return!n.call(t,t)})},any:function(n){var t=!1;return this.each(function(i){return!n||n.call(i,i)?(t=!0,!1):!0}),t},first:function(n){var t;return this.each(function(i){return!n||n.call(i,i)?(t=i,!1):!0}),t},sum:function(n){var t=0;return this.each(function(i){t+=n?n.call(i,i):i}),t},where:function(n){return new t(this,n)}})}(),function(){var n=/\{(\d+)\}/g;au=function(t){var i=Array.prototype.slice.call(arguments,1);return t.replace(n,function(n,t){return i[t]})}}(),function(){function d(t,i){var r=n[t];return r?n[t]=null:r=i,r}function g(n){return n.split("-",1)[0]}function a(n){p[n]&&t.push(n)}var p={},r,u,e,l,t,w,v="msls",y=[v,"client","service"],k,h={},nt=/^\/([^\/]+)\/([^\/]+)$/;t=d("__msls_supportedLanguages","EN-US"),t=t.toUpperCase(),t=t.split(";"),i.each(t,function(n,t){t=i.trim(t),t&&(p[t]=!0)}),t=[],r=uf("preferredLanguage"),r=r?i.trim(r.toUpperCase()):null,r&&(a(r),u=g(r),u!==r&&a(u)),e=d("__msls_defaultLanguage","EN-US"),e=i.trim(e.toUpperCase()),e!==r&&e!==u&&(a(e),l=g(e),l!==e&&l!==u&&a(l)),o(s.loadResourcesStart),w=new c.Promise(function(n,f){function l(){var r=!1,i,u=!1;if(c--,!c){if(!w)for(e=0;e<t.length;e++)if(i=t[e],u=i==="EN-US",v in h[i]){r=!0;break}w||r?(o(s.loadResourcesEnd),d?f(d):n()):(w=!0,c++,u||(t.push("EN-US"),h["EN-US"]={}),nt("EN-US",v))}}function tt(n){return"//ajax.aspnetcdn.com/ajax/globalize/0.1.1/cultures/globalize.culture."+n+".js"}function g(n,t){function r(){t&&t()}c++;var u=tt(n);i.ajax({url:u,dataType:"script",cache:!0,error:function(){r(),l()},success:function(){var t;n=n.toUpperCase();for(t in rt.cultures)if(t.toUpperCase()===n){rt.culture(t);break}rt.culture().name.toUpperCase()!==n&&r(),l()}})}function it(n,t){function u(n){d+=au("Failed to load resources from {0}. {1}",r,n)+"\n"}var r=uu+"/Content/Resources/"+n;i.ajax({url:r,dataType:"text",cache:!0,error:function(){l()},success:function(n){try{if(n=i.parseJSON(n),!(n instanceof b))throw"Invalid JSON.";t(n)}catch(r){u(au("Failed to parse the resources JSON string. Failure reason: {0}",r||""))}finally{l()}}})}function ut(n,t){return function(i){h[n][t]=i}}function nt(n,t){it(t+".lang-"+n+".resjson",ut(n,t))}var c=0,p,e,a,w=!1,d="";for(!r||r==="EN"||g(r,function(){!u||u==="EN"||u===r||g(u)}),c+=t.length*y.length,e=0;e<t.length;e++)for(p=t[e],h[p]={},a=0;a<y.length;a++)k=y[a],nt(p,k);c||(c++,l())}),gs=function(){return w},sf=function(n){var i=n,u=nt.exec(n),f,e,r,o,s,c;if(u===null)return{value:i,empty:!0};for(f=u[1].toLowerCase(),e=u[2],r=0;r<t.length;r++)if(o=t[r],f in(s=h[o])&&e in(c=s[f]))if(i=c[e],!i||typeof i!="string")break;else return{value:i,lang:o};return{value:i,empty:!0}},f=function(n){var r=sf("/msls/"+n),t=r.value,i;return!r.empty&&arguments.length>1&&(i=Array.prototype.slice.call(arguments,0),i[0]=t,t=au.apply(null,i)),t},c.Namespace.define("WinJS.Resources",{getString:sf})}(),function(){nh=function(n,t){n.message||(n.message=f("errors_core")),"description"in n&&(n.description=n.message),t&&i.extend(n,t);throw n;},or=function(n,t,i){var r=new Error;n&&(r.name=n),t&&(r.message=t),nh(r,i)},eu=function(n,t){n||(n=f("errors_invalid_operation")),or("InvalidOperationError",n,t)},hf=function(n,t,r,u){n||(n=f("errors_argument")),or("ArgumentError",n,i.extend(u,{argumentName:r,argumentValue:t}))},to=function(n,t){if(!n){var i;i=t?f("errors_falsy_1args",t):f("errors_falsy"),hf(i,n,t)}}}(),function(){function t(n){return new c.Promise(function(t,i){n({url:uu+"/Content/Resources/Generated/model.json",cache:!0,dataType:"text",error:function(n,t,r){i({reason:t,e:r})},success:t})})}function h(n){or("ModelError",n)}var n;o(s.loadModelStart),n=t(i.ajax),e(r,"ModelService",function(){this.isLoaded=!1,u(this,"_itemDictionary",{})},null,{load:function(){var r=this;return r._loadPromise||u(this,"_loadPromise",new c.Promise(function(u,e){function c(n){o(s.loadModelEnd),e(f("model_failed_server_1args",n.reason+" - "+(n.e||"")))}function l(n){o(s.loadModelEnd),o(s.parseModelStart);try{if(n=i.parseJSON(n),!(n instanceof b))throw f("model_invalid_json");r.model=n}catch(t){e(f("model_failed_parse_1args",t||""));return}o(s.parseModelEnd),o(s.processModelStart);try{r._registerModelItem(r.model,!0),r._resolveReferenceProperties(r.model,!0)}catch(t){e(t);return}o(s.processModelEnd),r.isLoaded=!0,u(r.model)}var h=r._ajaxFunction?t(r._ajaxFunction):n;h.then(l,c)})),r._loadPromise},tryLookupById:function(n){var t;return n&&(t=this._itemDictionary[n],t)?t:null},_registerModelItem:function(n,t){var i;if(n&&n.id&&(this._itemDictionary[n.id]=n),t&&n&&n instanceof b)for(i in n)this._registerModelItem(n[i],t)},_resolveReferenceProperties:function(n,t){var r,i,u;if(n&&n instanceof b)for(r in n)i=n[r],i instanceof b&&"__id"in i?(u=i.__id,(n[r]=this.tryLookupById(u))===null&&h(f("model_reference_error_1args",u))):t&&this._resolveReferenceProperties(i,t)}}),fu("services",{modelService:new r.ModelService})}(),hi="Microsoft.LightSwitch.Extensions",function(){function t(n){return n}var n=/^\$\((.+)\)$/;ut=function(n,t){var r=null,u=null;return n&&(r=n[t],r&&(i.isArray(r)?r.length>0&&(u=r[0]):u=r)),u},vu=function(n,t){var r=null,u=null;return n&&(r=n[t],r&&(u=i.isArray(r)?r:[r])),u},cf=function(t){var i,r;return t&&(i=n.exec(t),i&&(r=sf(i[1]),r.empty||(t=r.value))),t},io=function(n){return cf(n.displayName)},vr=function(){var t=null,i=r.services.modelService,n=i.model;return!i.isLoaded||!n||!n.modules||(t=y(n.modules).first(function(n){return oo(n)})),t},yr=function(n,i,r){var u=null;return!n||!i||(u=y(n).first(function(n){return(!r||r(n))&&(n.name===i||n.name===t(i))})),u},kt=function(n,t){return t&&n.length>1&&(n=n[0].toLowerCase()+n.substring(1)),n},ih=function(n){return!n?n:(n=n[0].toLowerCase()+n.substring(1),n.replace(/([A-Z])/g,"-$1").toLowerCase())},ro=function(n){var u=[],t=r.services.modelService.model;return!t||!t.modules||i.each(t.modules,function(t,r){r.globalItems&&i.each(r.globalItems,function(t,i){(!n||n(i))&&u.push(i)})}),u},th=function(n){var t=n.id.replace(/\/Properties\[.*\]/,"");return r.services.modelService.tryLookupById(t)},ot=function(n,t){return":"+(t||"RootControl")+"/Properties["+n+"]"},ou=function(n){for(var t=n,i,t=lf(t);!!t&&fo(t);)i=t,t=i.underlyingType;return{primitiveType:t,semanticType:i}},lf=function(n){var t;return pr(n)&&(t=n,n=t.underlyingType),n},so=function(n){return n.supportedContentItemKind==="Group"},rh=function(n){return"target"in n},uh=function(n){return"links"in n},fh=function(n){return"value"in n},eh=function(n){return"member"in n},oh=function(n){return"supportedContentItemKind"in n},sh=function(n){return"__isPrimitiveType"in n},uo=function(n){return"entitySets"in n},pr=function(n){return"__isNullableType"in n},fo=function(n){return"__isSemanticType"in n},hh=function(n){return"rootContentItem"in n},ch=function(n){return"__isEntityType"in n},eo=function(n){var t;return!!n&&!!(t=n[":@Paging"])&&t.mode==="Countless"},lh=function(n){return"__isKeyProperty"in n},oo=function(n){return"homeScreen"in n}}(),function(){ct(r,{CollectionChangeAction:{refresh:"refresh",add:"add",remove:"remove"}}),st=r.CollectionChangeAction,e(r,"CollectionChange",function(n,t,i,r){this.action=n,this.items=t,this.oldStartingIndex=i,this.newStartingIndex=r}),wr=r.CollectionChange,a("CollectionChangeAction",st),a("CollectionChange",wr)}(),function(){function n(n){return n[0].toUpperCase()+n.substr(1)}function t(t,i){var e=this,r=e.simpleDescriptor,f={},h=!!e.async,o,a,y=n(i),v="get"+y,p="set"+y,w=t.constructor,b=w.Details,k=b?b.PropertySet:null,g=e.detailsClass,s;e.name=i,f[i]=r,bs(r),h&&(r.enumerable=!ei,o=r.get,r.get=function(){var t,i=r.rawGet&&r.rawGet(this.details,r),n=o.call(this);if(n._state&&n._state.name!=="success"&&n._state.name!=="error"||n.then(function(n){i=n},function(n){t=n}),t)throw t;return i}),r.set&&(a=r.set,r.set=function(n){var i=this,r,t;if(r=et(function(r){try{a.call(i,n,r)}catch(u){t=u;throw u;}a.length===1&&r.complete()}),t)throw t;}),h?f[v]=o:(f[v]={enumerable:!ei},o=r.get,f[v].value=function(){return c.Promise.as(o.call(this))}),r.set&&(f[p]=h?r.set:{enumerable:!ei,value:r.set}),d(w,f),k&&g&&(f={},s="__"+i,f[i]=l(function(){return this[s]||u(this,s,new g(this._details,e)),this[s]}),d(k,f))}ci=function(n,t,i,r,f,o,s){var c=e(n,t,i,f),h=f,v=h?h.Details:null,a=e(c,"Details",r,v),y=e(a,"PropertySet",function(n){u(this,"_details",n)},h?h.Details.PropertySet:null);return d(c,o),d(a,s),d(a,{properties:l(function(){return this._properties||u(this,"_properties",new y(this)),this._properties})}),c},ci(r,"ObjectWithDetails",function(){this.details=new this.constructor.Details(this)},function(n){this.owner=n},null,null,{getModel:function(){var n=this._model;return n||(this._findModel&&(n=this._findModel()),u(b.getPrototypeOf(this),"_model",n)),n}}),bi=r.ObjectWithDetails,sr=bi.Details,ar(bi),ar(sr),d(sr.PropertySet,{all:function(){var t=[],n;for(n in this)n.charCodeAt(0)!==95&&this[n]&&!oi(this[n])&&t.push(this[n]);return t}}),e(sr,"Property",function(n,t){this.owner=n?n.owner:null,u(this,"_details",n),u(this,"_entry",t)},null,{name:l(function(){return this._entry.name}),isReadOnly:l(function(){return!this._entry.set}),getPropertyType:function(){return this._entry.type||b},getModel:function(){var n=this._entry.model;return n||(this._findModel&&(n=this._findModel()),this._entry.model=n),n}}),hr=sr.Property,ar(hr),ir=function(n,i,r){var u=b.create(n);return u.simpleDescriptor=n,u.type=i,u.detailsClass=r,u.defineOn=t,u},a("ObjectWithDetails",bi)}(),function(){ci(r,"BusinessObject",function(){bi.call(this)},function(n){sr.call(this,n)},bi),br=r.BusinessObject,yu=br.Details,e(yu,"Property",function(n,t){hr.call(this,n,t)},hr,{_findModel:function(){return yr(this._details.getModel().properties,this._entry.name)}}),pu=yu.Property,a("BusinessObject",br)}(),function(){e(r,"ValidationResult",function(n,t){this.property=n,this.message=t}),ii=r.ValidationResult,a("ValidationResult",ii)}(),kr=n.OData,rr=n.datajs,function(){ci(r,"Entity",function(n){br.call(this),ah(this,n)},function(n){yu.call(this,n),vh(this,n)},br),e(r,"Link",function(n,t,i,r,u,f){yh(this,n,t,i,r,u,f)}),ct(r,{LinkState:{unchanged:0,added:1,deleted:3,discarded:4}}),e(r,"LinkSet",function(n,t){ph(this,n,t)}),e(r,"EntitySet",function(n,t){wh(this,n,t)}),e(r,"DataServiceQuery",function(n,t,i){bh(this,n,t,i)}),ci(r,"DataService",function(n){bi.call(this),kh(this,n)},function(n){sr.call(this,n),dh(this,n)},bi),ci(r,"DataWorkspace",function(){bi.call(this),gh(this)},function(n){sr.call(this,n),nc(this,n)},bi)}(),function(){function ti(){return this._entry.get.call(this._details.owner)}function gi(n){this._entry.set.call(this._details.owner,n)}function ut(n){return"__"+n+"_IsEdited"}function ii(n){return nt(n)||lt(n)}function nt(n){return n.kind==="reference"||n.kind==="virtualReference"}function lt(n){return n.kind==="collection"||n.kind==="virtualCollection"}function at(n){return n.kind==="virtualReference"||n.kind==="virtualCollection"}function vt(n){return"__"+n}function p(n,t){return n[vt(t.name)]}function nr(){var i=this._details,n=this._entry,r=i._,t;return n.kind==="storage"?!!r[ut(n.serviceName)]:nt(n)?(t=p(i,this),!!t&&!!t.changeInfo):!1}function rr(){return this._details.entityState===n.added?!1:this.isEdited}function yt(n,t,i){return i.association===n&&i.fromEnd===t}function pt(n,t){var r=y(t.associationSet.ends).first(function(){return this.name===t.model.toEnd.name}),i=n.entitySet.dataService,u=r.entityContainer;return u&&(i=i.details.dataWorkspace[kt(u.name)]),i[kt(r.entitySet.name)]}function ft(n,i,r){var u=r.model;return nt(i)?r.state===t.available&&(r.value=r.linkSet.getTargetEntity(u.fromEnd.name,n.entity,u.toEnd.name),r.state=t.loaded):r.value||(r.value=new rt(n,r)),r.value}function ri(n,t,i,r,u){var f=n.value;f&&f.dispatchEvent("collectionchange",new wr(t,i,r,u))}function ui(n,i,r,u){u||(u=n.properties[i.name]);var f=n.entity,e;r.state=t.available,e=ft(n,i,r),u.dispatchChange("isLoaded"),nt(i)?(u.dispatchChange("value"),f.dispatchChange(i.name)):ri(r,st.refresh)}function fr(n,t,i,r,u,f){var h=i.model,c=n.entity,e=u,o=!0,s=0;f.results.forEach(function(n){i.linkSet.attachLink(h.fromEnd.name,c,h.toEnd.name,n)});do{if(bu(e._skip)||bu(e._take)){o=!1;break}else typeof e._filter=="string"&&(s+=1);e=e._source}while(e);o&&(r&&(s-=1),o=s<=0),o&&ui(n,t,i)}function fi(n,t,i,f,e){var h,c,o,s,l,a,v;if(e)o=[],y(f.associationSet.ends).each(function(){this.name===f.model.fromEnd.name?h=this.properties:c=this.properties}),c.forEach(function(n,i){s=h[i].entityProperty,l=t[s.name],a=ou(s.propertyType).primitiveType,o.push(n.entityProperty.name+" eq "+co(l,a.id))}),v=o.join(" and "),f.query=pt(n,f).filter(v);else{var p=t[i.serviceName],w=p&&p.__deferred,b=w?w.uri:t.__metadata.uri+"/"+i.serviceName;f.query=new r.DataServiceQuery({_entitySet:pt(n,f)},b)}u(f.query,"_afterQueryExecuted",function(t,r){fr(n,i,f,e,t,r)})}function o(i,u){var nt=u.name,tt=vt(nt),s=i[tt],h=at(u),f,p,w,o,e,k,c,l,d,it,g,a,rt,v;return s||(p=i.entitySet.dataService,w=p.details,f=u.data,f||(f=u.data={},f.model=o=i.properties[nt].getModel(),e=h?o.virtualAssociation:o.association,y(e.ends).each(function(n){yt(e,n,o)||(d=y(n.entityType.properties).first(function(t){return yt(e,n,t)}))}),f.toPropertyName=d&&kt(d.name),h?g=y(vr().globalItems).first(function(){return this.virtualAssociation===e}):(it=w.getModel(),g=y(it.associationSets).first(function(){return this.association===e})),f.associationSet=g),s=i[tt]=b.create(f),s.state=t.notInitialized,v=h?p.details.dataWorkspace.details._linkSets:w._linkSets,a=f.associationSet.name,v[a]||(k=[],c={},o=f.model,e=o.association,y(e.ends).each(function(n){l=n.name,k.push(l),c[l]=yt(e,n,o)?u.name:f.toPropertyName}),v[a]=new r.LinkSet(k,c)),s.linkSet=v[a],i.entityState!==n.added&&i.entityState!==n.discarded&&fi(i,i._,u,s,h)),s}function er(){var t,i=this._details,n=this._entry,u=i._,r;return this.isChanged&&(n.kind==="storage"?t=u.__original[n.serviceName]:nt(n)&&(r=o(i,n),t=r.changeInfo.originalEntity)),t}function ei(n){var t=n.model,i=y(t.association.ends).first(function(){return this===t.toEnd});return i.multiplicity}function tt(n,i){var r,u;return i.state===t.notInitialized&&(r=i.model,i.state=ei(i)!=="Many"&&i.linkSet.hasLinks(r.fromEnd.name,n.entity)?t.available:t.unavailable),i.state!==t.unavailable}function oi(){var n=this._details;return tt(n,o(n,this._entry))}function hi(){var i=this,r=i._details,f=i._entry,n=o(r,f),s=tt(r,n),u=n.loadPromise,e;return u||(n.state!==t.unavailable&&(n.state=t.unavailable,i.dispatchChange("isLoaded")),i.loadError&&(i.loadError=null),u=n.loadPromise=et(function(t){function s(t,u){e=!0,n.loadPromise=null,t?(i.loadError=t,u.error(t)):(o||ui(r,f,n,i),u.complete(n.value))}u=n.loadPromise=t.promise();var h=r.entity,o=n.query;o?(o.execute()._thenEx(function(n){s(n,t)}),t.interleave()):s(null,t)}),e&&(n.loadPromise=null)),u}function or(){var n=o(this._details,this._entry);return n.query}function li(n,t){var r=t._addedEntities;i.each(r,function(t,i){return i===n.entity?(r.splice(t,1),!1):!0})}function it(n,t,r){var u,e,f,s;i.each(t.properties.all(),function(h,c){(u=c._entry,ii(u))&&(e=o(t,u),f=e.toPropertyName,f)&&(lt(u)?(s=c.value.array,i.each(s,function(t,i){ur(i,f,r,n)})):tt(t,e)&&ur(c.value,f,r,n))})}function ot(n){var t=n._;!t.__parent||(n._=t.__parent)}function wt(n,t){var i=n&&n.changeInfo&&n.changeInfo.changeSetIndices;return!!i&&i.indexOf(t)>-1}function ai(n,t,i,r){function o(i){var e;e=i instanceof g?t.hasOwnProperty(i._entry.serviceName):wt(p(n,i),u),e&&(f=!0,r&&r(t,i,u))}for(var f,u,e=y(n.properties.all()).where(function(n){return n instanceof v}).array;t.__parent;)f=!1,u=t.__changeSetIndex,ot(n),e.forEach(o),f&&dr(i,u,-1),t=n._}function vi(n,t,i){n.dispatchChange(i.name),t.dispatchChange("value"),t.dispatchChange("originalValue"),t.dispatchChange("isChanged"),t.dispatchChange("isEdited")}function yi(n,t){var i=n.changeInfo.changeSetIndices;return i[0]===t}function sr(){var i=this,u=i.entity,f=i.entityState,c=i.hasEdits,h=i.entitySet,e=h.dataService.details,s=e.dataWorkspace.details,r=i._;f!==n.unchanged&&f!==n.discarded&&(f===n.added?(li(i,h),r.__hasEdits&&(r.__hasEdits=!1),r.__entityState=n.discarded,it(u,i,st.remove),ai(i,r,s),dr(s,i._.__changeSetIndex,-1),r.__parent&&(r.__parent=null),r.__changeSetIndex=-1,i._=r):f===n.deleted?(ot(i),it(u,i,st.add),dr(s,r.__changeSetIndex,-1)):f===n.modified&&ai(i,r,s,function(n,r,f){var s=r._entry,e,h;r instanceof g?n.hasOwnProperty(ut(s.serviceName))&&vi(u,r,s):(e=o(i,s),yi(e,f)&&(h=e.model,e.linkSet.discardReferenceChanges(h.fromEnd.name,u,h.toEnd.name),e.value=e.changeInfo.originalEntity,e.state=t.loaded,e.changeInfo=null,vi(u,r,s)))}),i.hasEdits!==c&&i.dispatchChange("hasEdits"),i.dispatchChange("entityState"),--e._changeCount==0&&e.dispatchChange("hasChanges"),e.dispatchEvent("contentchange",u))}function hr(){var i=null,n=this.entitySet,r,u,t,f;return!n||!(r=n.dataService)||!(u=r.details)||(t=y(u.properties.all()).first(function(t){return t.value===n}),t&&(f=t.getModel(),i=f.entityType)),i}function pi(r,u,f,e,o){i.each(u.properties.all(),function(i,s){if(s instanceof v){var b=s._entry,a=b.serviceName,y,c=!1,l=!1,h,w,k;s instanceof g?(c=e.hasOwnProperty(a),c&&(delete e[a],y=ut(a),l=e.hasOwnProperty(y),l&&delete e[y])):(h=p(u,s),c=wt(h,o),c&&(w=h.model,k=h.linkSet.cancelReferenceChanges(w.fromEnd.name,r,w.toEnd.name),l=yi(h,o),h.value=k,h.state=t.loaded,l?h.changeInfo=null:h.changeInfo.changeSetIndices.pop())),c&&(r.dispatchChange(b.name),s.dispatchChange("value"),l&&(f!==n.added&&(s.dispatchChange("originalValue"),s.dispatchChange("isChanged")),s.dispatchChange("isEdited")))}}),ot(u)}function cr(){var t=this.details,r=t.entitySet,u=r.dataService.details,i=t.entityState;(i===n.added||i===n.modified)&&(t.discardChanges(),i=t.entityState),i===n.unchanged&&(bt(t,n.deleted),u.dispatchEvent("contentchange",this),it(this,t,st.remove))}function lr(){function t(n){s.call(this,n)}return t}function ar(n){return n._[this.serviceName]}function bt(t,i){var f=t.entitySet.dataService.details,o=f.dataWorkspace.details,r=t._,e=o._nestedChangeSets.length-1,h=t.entityState,s=h===n.unchanged,c=i===n.modified&&r.__changeSetIndex!==e,u;(s||c)&&(u=b.create(r),u.__parent=r,u.__changeSetIndex=e,t._=u,dr(o,e,1),s&&(r.__parent||(u.__original=r),u.__entityState=i,u.__hasEdits=!0,t.dispatchChange("entityState"),t.dispatchChange("hasEdits"),++f._changeCount==1&&f.dispatchChange("hasChanges")),r=t._),r.__hasEdits||(r.__hasEdits=!0,t.dispatchChange("hasEdits"))}function wi(t,i,r,u){var e=t.entitySet.dataService.details,f=i.name;u||(u=t.properties[f]),r&&(u.dispatchChange("isEdited"),t.entityState!==n.added&&(u.dispatchChange("isChanged"),u.dispatchChange("originalValue"))),u.dispatchChange("value"),t.entity.dispatchChange(f),e.dispatchEvent("contentchange",u)}function yr(t,i){var r=t._,u=!1,f=t.properties[this.name],e=this.serviceName,o=t.entityState;o!==n.deleted&&o!==n.discarded&&(bt(t,n.modified),r=t._,u=!f.isEdited,r[e]=i,u&&(r[ut(e)]=!0),wi(t,this,u,f))}function bi(n){var t=o(n,this),i=t.model;return tt(n,t)?c.Promise.as(ft(n,this,t)):n.properties[this.name].load()}function ki(t,i,r,u,e){var s=t.entityState,h=o(t,i),c;s!==n.deleted&&s!==n.discarded&&(r&&(c=r.details.entityState,(c===n.deleted||c===n.discarded)&&hf(f("entity_setReferencePropertyValue_DeletedDiscarded"),r,"value")),tt(t,h)?(di(t,i,s,h,r,e),u.complete()):t.properties[i.name].load().then(function(){di(t,i,s,h,r,e),u.complete()}))}function dt(n,t,i){if(!Array.isArray(t)||t.length<=0)return[];var r=[],u=n.properties;return y(t).each(function(n){var f=i?n.entityProperty.name:n,t=u[f];return t?(r.push(t),!0):(r=[],!1)}),r}function di(i,r,u,f,e,o){var p=f.model,w=p.fromEnd.name,h=f.changeInfo,g=!h,b,a,s,v,k,d,l,c;bt(i,n.modified),b=f.linkSet.setReferenceLink(w,i.entity,p.toEnd.name,e),f.value=e,f.state=t.loaded,h||(h=f.changeInfo={originalEntity:b,changeSetIndices:[]}),a=i._.__changeSetIndex,s=h.changeSetIndices,s||(s=h.changeSetIndices=[]),v=s.length,(v===0||s[v-1]!==a)&&s.push(a),wi(i,r,g),y(f.associationSet.ends).each(function(){this.name===w?k=this.properties:d=this.properties}),l=dt(i,k,o),l.length>0&&(e&&(c=dt(e.details,d,o)),c&&c.length!==l.length||l.forEach(function(n,t){n.value=c?c[t].value:null}))}function pr(n,t,i){ki(n,this,t,i,!1)}function br(n,t){return ft(n,t,o(n,t))}function kr(n,t,i){ki(n,this,t,i,!0)}function gr(n,t){var r=n,u=lr(n),i={};return ci(null,null,n,u,w),t&&(t.forEach(function(n){var r,t=n.name;n.serviceName=t,typeof n.kind!="string"&&(n.kind="storage");switch(n.kind){case"storage":n.type||(n.type=String),i[t]=ir(n,n.type,g),n.getValue=ar,n.setValue=yr;break;case"reference":case"virtualReference":n.type||(n.type=w),i[t]=ir(n,n.type,ht),n.async=!0,n.getValue=bi,n.setValue=n.kind==="reference"?pr:kr;break;case"collection":case"virtualCollection":n.type=rt,i[t]=ir(n,n.type,ni),n.async=!0,n.getValue=bi,n.rawGet=br}n.get=function(){return n.getValue(this.details)},n.setValue&&(n.set=n.async?function(t,i){n.setValue(this.details,t,i)}:function(t){n.setValue(this.details,t)})}),d(r,i)),r}var gt=si.Array,t={notInitialized:-1,unavailable:0,available:1,loaded:2},w=r.Entity,s=w.Details,k,v,g,ht,ni,rt,nu,n;ct(r,{EntityState:{unchanged:"unchanged",added:"added",modified:"modified",deleted:"deleted",discarded:"discarded"}}),n=r.EntityState,e(s,"Property",function(n,t){pu.call(this,n,t),this.entity=this.owner},pu,{value:h(null,ti,gi)}),k=s.Property,e(s,"TrackedProperty",function(n,t){k.call(this,n,t)},k,{isEdited:h(null,nr),isChanged:h(null,rr),originalValue:h(null,er)}),v=s.TrackedProperty,e(s,"StorageProperty",function(n,t){v.call(this,n,t)},v,{isReadOnly:h(null,function(){var t=this.getModel();return t.isReadOnly?!0:this._details.entityState===n.added?!1:lh(t)?!0:!this._details.entitySet.canUpdate})}),g=s.StorageProperty,e(s,"ReferenceProperty",function(n,t){v.call(this,n,t)},v,{isLoaded:h(!1,oi),loadError:h(null),isReadOnly:h(null,function(){var t=this._details,r=this._entry,u=o(t,r),e=u.model.fromEnd.name,f,i;return t.entityState===n.added?!1:(y(u.associationSet.ends).each(function(){return this.name===e?(f=this.properties,!1):!0}),i=dt(t,f,at(r)),i.length>0?y(i).any(function(n){return n.isReadOnly}):!1)}),load:hi}),ht=s.ReferenceProperty,uc=function(n){return pt(n.entity.details,o(n._details,n._entry))},fc=function(n){return ei(o(n._details,n._entry))},ec=function(n){var t=o(n._details,n._entry);return t.linkSet},oc=function(n,i){var r=o(n,i);r.state!==t.loaded&&(r.state=t.available)},sc=function(n,t){var i=p(n,t);return i&&i.value},hc=function(n,t,i){var u=t._entry,r;ii(u)&&(r=p(n,t),r&&(fi(n,i,u,r,at(u)),r.changeInfo=null))},cc=function(n,t){o(n,t._entry).changeInfo=null},e(r,"EntityCollection",function(n,t){si.call(this),u(this,"_details",n),u(this,"_data",t)},gt,{_array:[],_iterator:function(){var n=this._data,i=n.model;return n.state===t.available&&(this._array=n.linkSet.getTargetEntities(i.fromEnd.name,this._details.entity,i.toEnd.name),n.state=t.loaded),gt.prototype._iterator.call(this)},collectionchange:tr()}),rt=r.EntityCollection,e(s,"CollectionProperty",function(n,t){k.call(this,n,t)},k,{isLoaded:h(!1,oi),loadError:h(null),query:l(or),value:l(ti),load:hi}),ni=s.CollectionProperty,lc=function(n){var t=n._details,i=n._entry;return ft(t,i,o(t,i))},ac=function(n){var t=n._details,i=o(t,n._entry),r=i.model;return i.linkSet.getAddedEntities(r.fromEnd.name,t.entity,r.toEnd.name)},ur=function(n,i,r,u){if(n&&i){var e=n.details,o=e.properties[i],s=o._entry,f=e[vt(i)];!f||f.state!==t.loaded||(f.state=t.available),lt(s)?f&&ri(f,r,[u]):(o.dispatchChange("value"),n.dispatchChange(i))}},d(s,{entityState:h(null,function(){return this._.__entityState||n.unchanged}),hasEdits:h(null,function(){return!!this._.__hasEdits}),discardChanges:sr,_findModel:hr}),vh=function(t,i){t.entity=i,t._=af?af:{__entityState:n.added}},rc=function(t){var u=t.entity,i=t.entityState,c=t.hasEdits,s=t.entitySet,f=s.dataService.details,h=f.dataWorkspace.details,e=h._nestedChangeSets.length-1,r=t._,o=r.__changeSetIndex;i===n.unchanged||i===n.discarded||e>=0&&o!==e||(i===n.added?r.__parent?pi(u,t,i,r,o):(li(t,s),r.__hasEdits&&(r.__hasEdits=!1),r.__entityState=n.discarded,it(u,t,st.remove)):i===n.deleted?(ot(t),it(u,t,st.add)):i===n.modified&&pi(u,t,i,r,o),dr(h,e,-1),t.hasEdits!==c&&t.dispatchChange("hasEdits"),i!==t.entityState&&(t.dispatchChange("entityState"),--f._changeCount==0&&f.dispatchChange("hasChanges"),f.dispatchEvent("contentchange",t.entity)))},ic=function(t){var u=t.entityState,v=t.entitySet,y=v.dataService.details,w=y.dataWorkspace.details,a=w._nestedChangeSets.length-1,r=t._,h=r.__changeSetIndex,c=h-1,o=r.__parent,f,e,s,l;return u===n.unchanged||u===n.discarded||a>=0&&h!==a?!1:((u===n.modified||u===n.added)&&i.each(t.properties.all(),function(n,i){i instanceof ht&&(f=p(t,i),wt(f,h)&&(l=f.model,f.linkSet.applyReferenceChanges(l.fromEnd.name,t.entity,l.toEnd.name),e=f.changeInfo.changeSetIndices,e.pop(),s=e.length,(s===0||s>0&&e[s-1]!==c)&&e.push(c)))}),(u!==n.added||o)&&u!==n.deleted&&o.__changeSetIndex===c?(delete r.__parent,delete r.__changeSetIndex,i.each(r,function(n,t){r.hasOwnProperty(n)&&(o[n]=t)}),t._=o,!1):(r.__changeSetIndex--,!0))},d(w,{deleteEntity:cr}),ah=function(t,i){var c=t,s=c.constructor,f=t.details,u,h,e,o;i||(i=wu(r.application.activeDataWorkspace,t.constructor)),f.entitySet=i,f.entityState===n.added&&(u=i.dataService.details,i._addedEntities.push(t),h=u.dataWorkspace,e=h.details,o=e._nestedChangeSets.length-1,f._.__changeSetIndex=o,dr(e,o,1),++u._changeCount==1&&u.dispatchChange("hasChanges"),u.dispatchEvent("contentchange",t),s.created&&s.created.call(null,t))},a("EntityState",n),a("Entity",w),a("EntityCollection",rt),a("_defineEntity",gr)}(),function(){function e(n){var t;return n.length>0&&(t=n[n.length-1]),t}function h(n,t){return{state:n,changeSetIndex:t}}function c(n,t){return n._.__metadata.uri+" "+t._.__metadata.uri}function p(n,t,i,r,u){var f,e;return t===n._endNames[0]?(f=i,e=u):(f=u,e=i),c(f,e)}function w(t,i,r,u){var f=this._loadedLinks,e=p(this,t,i.details,r,u.details),o=f[e];o||(f[e]=new s(t,i,r,u,n.unchanged))}function t(n,t,r){var e=n._addedLinks,u=!0,f;if(r){for(f=e.length-1;f>=0;f--)if(u=t(e[f],f),u===!1)break}else i.each(e,function(n,i){return u=t(i,n)});u!==!1&&i.each(n._loadedLinks,function(n,i){return u=t(i,n)})}function a(t,i,r,u){var s,h=t.state,e,o;return t[i]===r&&(h===n.added||h===n.unchanged)&&(e=t[u],o=e.details.entityState,o!==f.deleted&&o!==f.discarded&&(s=e)),s}function v(n,i,r,u,f){var o=[],e;return t(n,function(n){return(e=a(n,i,r,u),e)?(o.push(e),!f):!0}),o}function b(n,t,i){return v(this,n,t,i)}function k(n,t,i){return v(this,n,t,i,!0)[0]}function g(n,t,i){var u=[],r;return this._addedLinks.forEach(function(f){r=a(f,n,t,i),r&&u.push(r)}),u}function nt(n,i){var r=!1;return t(this,function(t){return r=t[n]===i,!r}),r}function o(n,t,i){var r=n._states,u;r||(r=n._states=[]),u=e(r),!u||u.changeSetIndex!==i?r.push(h(t,i)):u.state=t}function tt(i,r,u,f){var h=r.details._.__changeSetIndex,a=this._propertyNames[u],c,l,e,v;return t(this,function(t){return t[i]===r&&(t[u]===f&&(t.state===n.unchanged||t.state===n.deleted?c=t:l=t),(t.state===n.unchanged||t.state===n.added)&&(e=t)),!(c&&l&&e)}),!e||(e.state===n.unchanged?(o(e,n.deleted,h),v=e[u]):o(e,n.discarded,h),ur(e[u],a,st.remove,r)),f&&(l?o(l,n.added,h):(!c||c.state!==n.unchanged||o(c,n.deleted,h),this._addedLinks.push(new s(i,r,u,f,n.added,h))),ur(f,a,st.add,r)),v}function it(i,r,u){var e=this,o=e._propertyNames[u],f;t(e,function(t,s){t[i]===r&&(f=t.state,f===n.added||f===n.discarded?(e._addedLinks.splice(s,1),f===n.added&&ur(t[u],o,st.remove,r)):f===n.deleted&&(t._states=null,ur(t[u],o,st.add,r)))},!0)}function rt(i,r,u){var s=this,h=s._propertyNames[u],c,f,l,o,a;return t(s,function(t,v){t[i]===r&&(c=e(t._states),c.changeSetIndex===r.details._.__changeSetIndex&&(f=c.state,f===n.added||f===n.discarded?(f===n.added&&(l=t),a=ut(s,r,u,h,t,v,f),a&&(o=a)):(t._states=null,o=t[u])))},!0),l&&ur(l[u],h,st.remove,r),o&&ur(o,h,st.add,r),o}function ut(t,i,r,u,f,e){var s=f._states,h;return s.length===1?(t._addedLinks.splice(e,1),s=null):s.pop(),!s||f.state!==n.added||(h=f[r]),h}function ft(n,i){var u,f,o,s;t(this,function(t){t[n]===i&&(u=t._states,f=e(u),o=f.changeSetIndex,o===i.details._.__changeSetIndex&&(u.length>1&&(s=u.length-2,u[s].changeSetIndex===o-1&&u.splice(s,1)),f.changeSetIndex-=1))})}function et(){var i=this,u=i._endNames[0],e=i._endNames[1],r=i._loadedLinks;t(i,function(t,i){var h,l,o,s;switch(t.state){case n.added:h=t[u],l=t[e],o=h.details,s=l.details,o.entityState===f.unchanged&&s.entityState===f.unchanged&&(t._states=null,r[c(o,s)]=t);break;case n.deleted:delete r[i]}}),i._addedLinks.length=0}var s=r.Link,n=r.LinkState,y=r.LinkSet,f=r.EntityState;d(s,{state:l(function(){var t=this._states;return t?e(t).state:n.unchanged})}),yh=function(t,i,r,u,f,e,o){t[i]=r,t[u]=f,e===n.added&&(t._states=[],t._states.push(h(e,o)))},d(y,{attachLink:w,getTargetEntities:b,getTargetEntity:k,getAddedEntities:g,hasLinks:nt,setReferenceLink:tt,discardReferenceChanges:it,cancelReferenceChanges:rt,applyReferenceChanges:ft,resetAfterSave:et}),ph=function(n,t,i){u(n,"_endNames",t),u(n,"_propertyNames",i),u(n,"_loadedLinks",{}),u(n,"_addedLinks",[])}}(),function(){function n(n,t){n.setMilliseconds(n.getMilliseconds()+t)}function i(t,i){n(t,i*864e5)}var t=3;vc=function(){return new Date},fu("relativeDates",{now:function(){return vc()},today:function(){var n=this.now();return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n},endOfDay:function(){var n=this.now();return n.setHours(23),n.setMinutes(59),n.setSeconds(59),n.setMilliseconds(999),n},startOfWeek:function(){var n=this.today();return i(n,0-n.getDay()),n},endOfWeek:function(){var t=this.startOfWeek();return i(t,7),n(t,-1),t},startOfMonth:function(){var n=this.today();return n.setDate(1),n},endOfMonth:function(){var t=this.startOfMonth();return t.setMonth(t.getMonth()+1),n(t,-1),t},startOfQuarter:function(){var n=this.startOfMonth(),i=n.getMonth();return n.setMonth(i-i%t),n},endOfQuarter:function(){var i=this.startOfMonth(),r=i.getMonth();return i.setMonth(r-r%t+t),n(i,-1),i},startOfYear:function(){var n=this.today();return n.setMonth(0,1),n},endOfYear:function(){var t=this.startOfYear();return t.setFullYear(t.getFullYear()+1),n(t,-1),t}}),a("relativeDates",r.relativeDates)}(),function(){var t={notDetermined:"NotDetermined",forms:"Forms"},n=t.notDetermined,i=new c.Promise(function(t){try{kr.request({headers:{accept:"application/json;odata=verbose"},requestUri:rf+"/Microsoft.LightSwitch.SecurityData.svc/GetAuthenticationType",method:"GET"},function(i){n=i.GetAuthenticationType,t(n)},function(){t(n)})}catch(r){t(n)}});u(r,"securityDataService",{AuthenticationType:t,getAuthenticationType:function(){return i}})}(),function(){function h(n,t,i,r){var o,e=ut(n,":@MaxLength"),u,s;return e&&(u=r,!!u&&!!u.length&&u.length>e.value&&(s=f("validation_max_length_1args",e.value),o=new ii(t,s))),o}function c(n,i,r,u){var e,s=ut(n,":@Required"),h=n,o=!1;return s&&(u!==""||ou(h.propertyType).primitiveType.id!==":String"||ut(n,":@AllowEmptyString")||(o=!0),(u===t||u===null||o)&&(e=new ii(i,f("validation_required")))),e}function l(n,t,i,r){var o,u=ut(n,":@Range"),s,h,e;return u&&(i!==":Date"&&i!==":DateTime"?!r||(r<u.minimum||r>u.maximum)&&(e=f("validation_invalidRange_2args",u.minimum,u.maximum),o=new ii(t,e)):(s=new Date(u.minimum),h=new Date(u.maximum),!!r&&(r.getTime()<s.getTime()||r.getTime()>h.getTime())&&(e=f("validation_invalidRange_2args",u.minimum,u.maximum),o=new ii(t,e)))),o}function a(n,t,i,r){var l,h=ut(n,":@DecimalConstraint"),e,o,c,u,s;return!r||!h||(e=Math.abs(r),o=e.toString().split("."),c=h.precision,u=h.scale,o[0].length>c-u?s=f("validation_decimalconstraints_precision_length_2args",e,c-u):!!o[1]&&o[1].length>u&&(s=f("validation_decimalconstraints_scale_length_2args",e,u)),s&&(l=new ii(t,s))),l}function v(n,t,i,r){var s,h,u=ut(n,e),o=!1;return!r||!u||!u.formats||(u.__regexparray||ao(u),y(u.__regexparray).each(function(n){return o=n.test(r),!o}),o||(h=f("validation_phonenumber_invalidFormat"),s=new ii(t,h))),s}function p(n,t,i,r){var c,l,a=ut(n,o),u=ut(n,s),e=vo(),h=!0;return!r||!a||e[0].test(r)||(e[1].test(r)?a.domainRequired&&(u&&(!u.defaultDomain||e[2].test(u.defaultDomain))||(h=!1)):h=!1),h||(l=f("validation_emailaddress_invalidFormat"),c=new ii(t,l)),c}function u(t,i){var r;for(r in i)n[r]&&(t[r]=!0)}var n,i=r.EntityState,e=hi+":@PhoneNumberValidation",o=hi+":@EmailAddressValidation",s=hi+":@EmailAddressProperties";ao=function(n){var t,e,u,o,i,f,s,r,h;if(e=n.formats,e)for(n.__regexparray=[],n.__formatarray=e.split(";"),f=0,s=n.__formatarray.length;f<s;f++){for(u=n.__formatarray[f].replace(/[^ACN]/gi," ").replace(/\s{2,}/g," ").replace(/^\s*/,"").replace(/\s*$/,""),i=0,t="^[^a-z\\d]*?",o="",r=0,h=u.length;r<h;r++)if(o===u[r])i++;else{i>1&&(t+="{"+i.toString()+"}"),i>0&&(t+=")");switch(u[r]){case"C":case"A":t+="(\\d";break;case"N":t+="([a-z\\d]";break;case" ":t+="[^a-z\\d]+"}i=u[r]===" "?0:1,o=u[r]}i>1&&(t+="{"+i.toString()+"}"),i>0&&(t+=")"),t+="\\s*(?:(extension|extn\\.?|ext\\.?|ex\\.?|x\\.?|#)\\s*([a-z\\d]*))?\\s*$",n.__regexparray[f]=new RegExp(t,"i")}},vo=function(){var n=[],t="^\\s*",i="\\s*$",e="("+t+'"([\\sA-z0-9!#$%&\'*+\\/=?\\^_`{|}~\\-\\(\\),:;<>@\\.]+|(\\\\\\")+)+")',r="("+e+"|("+t+"[A-z0-9!#$%&'*+\\/=?\\^_`{|}~\\-](\\.?[A-z0-9!#$%&'*+\\/=?\\^_`{|}~\\-]+)*))",u="([A-z0-9]([A-z0-9\\-]{0,61}[A-z0-9])?\\.)+([A-z][A-z0-9]+|[A-z0-9]+[A-z]|([A-z0-9]+[A-z\\-]+[A-z0-9]?)+[A-z0-9]+))",f="(\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\]";return n[0]=new RegExp(r+"@("+u+"|"+f+")"+i),n[1]=new RegExp(r+i),n[2]=new RegExp(t+"("+u+"|"+f+")"+i),n},n={":@MaxLength":h,":@Required":c,":@Range":l,":@DecimalConstraint":a,"Microsoft.LightSwitch.Extensions:@EmailAddressValidation":p,"Microsoft.LightSwitch.Extensions:@PhoneNumberValidation":v},lo=function(t,r,f){var o=[],y=t,p=!y.entity?null:y.entity,h=!p?null:p.details.entityState,c,b,l,s=t.getModel(),e=s.propertyType,w,a={},v;if(h===i.deleted||h===i.discarded||f&&h===i.unchanged||t.isReadOnly)return o;pr(e)&&(w=e,e=w.underlyingType),u(a,s),!!e&&fo(e)&&u(a,e);for(l in a)v=e,s[l]&&(v=s),c=n[l](v,t,s.propertyType.id,r),!c||o.push(c);return o}}(),function(){function st(n,t){var r=t.__metadata.uri,i=n._loadedEntities[r];return i||(af=t,i=new n._entityType(n),af=null,n._loadedEntities[r]=i),i}function vt(n){function f(n){var r=kt(n),t=i[r];t||(t=i[r]={}),i=t}function e(n){i=u,n.split("/").forEach(f)}var t=n,r,i,u={};do r=t._expand,typeof r=="string"&&r.split(",").forEach(e),t=t._source;while(t);return u}function ht(n,t,r){function d(n,r){var f=t[n][o],e=f?i.isArray(f.results)?f.results:i.isArray(f)?f:[f]:[];i.each(e,function(n,t){var i=st(a,t);v.attachLink(y,r,p,i),c.push(t),h.push(i)}),oc(r.details,u),t[n][o]=null}var e;if(!(n.length<=0)&&!(b.keys(r).length<=0)){var w=n[0],k=w.details,l=k.properties,f,u,o,a,v,s,y,p,h,c;for(e in r)e in l&&(f=l[e],u=f._entry,h=[],c=[],(u.kind==="reference"||u.kind==="collection")&&(o=u.serviceName,a=uc(f),v=ec(f),s=u.data.model,y=s.fromEnd.name,p=s.toEnd.name,i.each(n,d),ht(h,c,r[e])))}}function g(n){var i,t;if(Array.isArray(n))n.forEach(g);else for(i in n)i!=="__metadata"&&(t=n[i],t instanceof Date?t.setMinutes(t.getMinutes()+t.getTimezoneOffset()):typeof t=="object"&&g(t))}function tt(n,t,i){var r={message:n};return i&&(r.validationResult=new ii(t,i)),r}function ct(n){var t=n&&n.statusCode;return!t||typeof t=="number"||(t=parseInt(t,10)),t}function it(n,t){var o=[],ft=n.message,u=n.response,d,ot,r,a,v,s,y,h,g,p,e,nt,c,it,w,b,rt,ut,k,l,et;if(!ft)return null;if(d=ct(u),!u||200<=d&&d<=299)return o.push(tt(ft)),o;try{a=i.parseJSON(u.body),v=a&&(a.error||a["odata.error"]),e=v&&v.message&&v.message.value}catch(ot){try{s=i.parseXML(u.body),s&&(g=s.documentElement&&s.documentElement.prefix,p=g&&g+"\\:",p=p||"",y=i(s))}catch(ot){}!y||(h=y.find(p+"message"),h.length||(h=y.find("message")),!h.length||(e=h.text()))}if(e){try{nt=i.parseXML(e),nt&&(c=i(nt))}catch(ot){}c?(it=c.find("ValidationResult"),it.length>0&&!!t?i.each(it,function(n,r){w=i(r),b=w.find("Message").text(),rt=w.find("Target").text(),ut=w.find("Property").text(),l=null,rt&&ut&&(i.each(t._entitySets,function(n,t){return k=t._loadedEntities[rt],!k}),k&&(l=k.details.properties[kt(ut)])),et=l?l.name+": "+b:b,o.push(tt(et,l,b))}):r=c.find("EntityConflicts").length>0?f("conflict_dialog_message"):c.find("Message").text()||e):r=e}else r=f("dataService_status_error_message",u.statusCode,u.statusText);return!r&&r!==""||o.push(tt(r)),o}function yt(n){var t=n._metadataPromise;return t||(t=n._metadataPromise=et(function(t){var i=n._serviceUri+"/$metadata";kr.read(i,t.code(function(n){t.complete(n)}),t.code(function(i){t.error(i),n._metadataPromise=null}),kr.metadataHandler)})),t}function rt(n){o(s.queryDataStart);return et(function(t){function u(n){var i=it(n),r=[];i&&(r=i.map(function(n){return n.message})),t.error(r.join("\r\n"))}function f(f){var h={MinDataServiceVersion:"3.0"},c={requestUri:e,recognizeDates:!0,headers:h};f&&(h.accept="application/json;q=0.8, application/json;odata=fullmetadata;q=0.7, application/atomsvc+xml;q=0.5, */*;q=0.1"),kr.read(c,t.code(function(u){o(s.queryDataEnd);var e=[],h=u?i.isArray(u.results)?u.results:[u]:[],c,f;g(h),i.each(h,function(n,t){r&&(t=st(r,t)),e.push(t)}),e.length>0&&(c=vt(n),ht(e,h,c)),f=u&&u.__count,!f||typeof f!="string"||(f=parseInt(f,10),f===Number.NaN&&(f=-1)),t.complete({totalCount:f,results:e}),o(s.queryDataApplyEnd)}),t.code(function(n){o(s.queryDataEnd);var i=ct(n.response);i===404?t.complete({totalCount:0,results:[]}):u(n)}),null,null,f)}var e=n._requestUri,r=n._entitySet;ot?yt(r.dataService.details).then(function(n){f(n)},function(n){u(n)}):f(),t.interleave()})}function pt(n,i){if(n===t||n===null)return n;i.charAt(0)!==":"&&(i=":"+i);switch(i){case":Binary":case":Binary?":case":Decimal":case":Decimal?":case":Guid":case":Guid?":case":Int64":case":Int64?":return n.toString();default:return n}return}function lt(t,r,u,f,e){f===n.added?(r.method="POST",t.newEntities.push(r)):(r.method="MERGE",t.existingEntities.push(r));var c=r.data={},o,s,l,a,v,h,y,p;i.each(u.properties.all(),function(i,w){var b;w instanceof ft&&(o=w._entry.serviceName,w instanceof nt?(w.isChanged||f===n.added&&e.hasOwnProperty(o))&&(y=w.getModel(),p=ou(y.propertyType).primitiveType,b=c[o]=pt(e[o],p.id),b instanceof Date&&(b=new Date(b.valueOf()),b.setMinutes(b.getMinutes()-b.getTimezoneOffset()),c[o]=b)):w._entry.kind==="reference"&&(f===n.added||w.isChanged)&&(s=f===n.added?sc(u,w):w.value,s?(l=s.details,a=l.entityState,v=l._,h=a===n.added?"$"+v.__contentID:v.__metadata.uri,f===n.added&&a===n.added?t.links.push({method:"PUT",requestUri:"$"+e.__contentID+"/$links/"+o,data:{uri:h}}):c[o]={__metadata:{uri:h}}):f===n.modified&&t.links.push({method:"DELETE",requestUri:r.requestUri+"/$links/"+o})))})}function wt(t,r){o(s.saveDataStart);var u=t.details,a=u.dataWorkspace.details,l,c,v=t.details._serviceUri+"/$batch",e={newEntities:[],existingEntities:[],links:[]},h;if((l=a._nestedChangeSets.length>0)||(c=t.details.getChanges()).length===0)if(o(s.saveDataEnd),l)eu(f("dataService_save_with_nested_changes"));else{r.complete();return}c.forEach(function(n,t){n.details._.__contentID=t.toString()}),c.forEach(function(t){var r=t.details,f=r.entityState,l=r.entitySet,o=r._,i={recognizeDates:!0},s=i.headers={},h,c;s["Content-ID"]=o.__contentID,s.accept="application/atomsvc+xml;q=0.8, application/json;odata=verbose;q=0.5, */*;q=0.1",f===n.added?(i.requestUri=l._requestUri.substr(u._serviceUri.length+1),lt(e,i,r,f,o)):(h=o.__metadata,i.requestUri=h.uri.substr(u._serviceUri.length+1),c=h.etag,c&&(s["If-Match"]=c),f===n.modified?lt(e,i,r,f,o):f===n.deleted&&(i.method="DELETE",e.existingEntities.push(i)))}),kr.request({requestUri:v,method:"POST",data:{__batchRequests:[{__changeRequests:[].concat(e.newEntities,e.existingEntities,e.links)}]},recognizeDates:!0},r.code(function(t){var l=t.__batchResponses[0].__changeResponses,a=[],e,f;l.length===1&&(h=it(l[0],u)),h||(i.each(l,function(t,r){var l=r.headers,w=l&&l["Content-ID"],v,o,s,u,h,y,p;w&&(e=c[parseInt(w,10)],f=e.details,o=f.entityState,s=f.entitySet,u=f._,h=[],v={entity:e,oldEntityState:o,oldHasEdits:f.hasEdits},o===n.added?(g(r.data),i.each(f.properties.all(),function(n,t){t instanceof nt?r.data[t._entry.serviceName]!==t.value&&h.push(t):hc(f,t,r.data)}),v.changedProperties=h,f._=r.data,u=f._,i.each(s._addedEntities,function(n){return this===e?(s._addedEntities.splice(n,1),!1):!0}),s._loadedEntities[u.__metadata.uri]=e):o===n.modified?(y=u.__original,i.each(f.properties.all(),function(n,t){var i;t instanceof ft&&t.isChanged&&(t instanceof nt?(i=t._entry.serviceName,y[i]=u[i]):cc(f,t),h.push(t))}),v.changedProperties=h,p=l&&l.ETag,p&&(y.__metadata.etag=p),f._=y):o===n.deleted&&(delete s._loadedEntities[u.__metadata.uri],u.__entityState=n.discarded),a.push(v))}),i.each(u._linkSets,function(n,t){t.resetAfterSave()}),i.each(u.dataWorkspace.details._linkSets,function(n,t){t.resetAfterSave()}),i.each(a,function(t,r){e=r.entity,f=e.details;switch(r.oldEntityState){case n.added:i.each(r.changedProperties,function(){this.dispatchChange("value"),e.dispatchChange(this.name),u.dispatchEvent("contentchange",this)}),r.oldHasEdits&&f.dispatchChange("hasEdits"),f.dispatchChange("entityState");break;case n.modified:i.each(r.changedProperties,function(){this.dispatchChange("originalValue"),this.dispatchChange("isChanged"),this.dispatchChange("isEdited")}),f.dispatchChange("hasEdits"),f.dispatchChange("entityState");break;case n.deleted:f.dispatchChange("hasEdits"),f.dispatchChange("entityState"),u.dispatchEvent("contentchange",e)}u._changeCount--}),u.dispatchChange("hasChanges")),o(s.saveDataEnd),h?r.error(h):r.complete()}),r.code(function(n){h=it(n,u),o(s.saveDataEnd),r.error(h)}),kr.batchHandler)}function bt(){var i=this,t,n;if(t=et(function(t){try{wt(i,t)}catch(r){n=r;throw r;}}),n)throw n;return t}function dt(){var t=[];return i.each(this.properties.all(),function(){var r=this.value;t=t.concat(r._addedEntities),i.each(r._loadedEntities,function(){this.details.entityState!==n.unchanged&&t.push(this)})}),t}function gt(){i.each(this.getChanges(),function(){this.details.discardChanges()})}function ni(){var n=this.dataService,f=null,s=r.services.modelService,t,e,i,u,o;return!!n&&s.isLoaded&&(e=n.details,u=e.dataWorkspace,u&&(o=u.details,i=y(o.properties.all()).first(function(t){return t.value===n}),i&&(t=vr(),t&&(f=yr(t.globalItems,i.name,function(n){return uo(n)}))))),f}function ti(){var u=this._details,t=this._entry,i=u._entitySets,r=t.name,n=i[r];return n||(i[r]=n=new v(this.dataService,t)),n}function ri(){function t(n){k.call(this,n)}return t}function ui(n,t,i,r){var f=n,e=ri(n),u={};return ci(null,null,n,e,w),d(e,{_serviceUri:t}),i&&i.forEach(function(n){var t=n.name;n.serviceName=t,n.get=function(){return this.details.properties[t].value},u[t]=ir(n,v,ut)}),r&&r.forEach(function(n){n.serviceName=n.name,u[n.name]=n}),d(f,u),f}function p(n){return n<10?"0"+n.toString():n.toString()}function at(n,t){var i,r;return y(n.details.properties.all()).each(function(n){return y(n.value.details.properties.all()).each(function(n){return(i=n.value,i.getEntityType()===t)?(r={entitySet:i,model:n.getModel()},!1):!0}),!r}),r}var w=r.DataService,k=w.Details,ut,v=r.EntitySet,c=r.DataServiceQuery,n=r.EntityState,ft=r.Entity.Details.TrackedProperty,nt=r.Entity.Details.StorageProperty,ot;ot=!!rr&&!!rr.version&&!!rr.version.major&&rr.version.major>=1&&!!rr.version.minor&&rr.version.minor>=1&&!!rr.version.build&&rr.version.build>=1,u(r,"queryable",{filter:function(n){var t=new c(this);return u(t,"_filter",n),t},orderBy:function(n){var t=new c(this);return u(t,"_orderBy",n),t},orderByDescending:function(n){var t=new c(this);return u(t,"_orderBy",n+" desc"),t},thenBy:function(n){var t=new c(this);return u(t,"_orderBy",n),t},thenByDescending:function(n){var t=new c(this);return u(t,"_orderBy",n+" desc"),t},expand:function(n){var t=new c(this);return u(t,"_expand",n),t},skip:function(n){var t=new c(this);return u(t,"_skip",n),t},top:function(n){var t=new c(this);return u(t,"_take",n),t},includeTotalCount:function(){var n=new c(this);return u(n,"_includeTotalCount",!0),n}}),d(c,r.queryable),bu=function(n){return typeof n=="number"&&n>0},d(c,{execute:function(){var n=this,t=n,i;do{if(i=t._afterQueryExecuted,oi(i))break;t=t._source}while(t);return i?et(function(t){rt(n)._thenEx(function(r,u){if(r)t.error(r);else{try{i(n,u)}catch(f){t.error(f)}t.complete(u)}}),t.interleave()}):rt(n)},_requestUri:l(function(){var e,n=this,c,r=[],u,f,o,s=[],h=[],t=[];do{if(n._rootUri){e=n._rootUri;break}typeof n._filter=="string"&&(r.length===0?r.unshift(n._filter):(r.length===1&&(r[0]="("+r[0]+")"),r.unshift("("+n._filter+")"))),typeof n._orderBy=="string"&&s.unshift(n._orderBy),typeof n._expand=="string"&&h.push(n._expand.replace(/\./g,"/")),typeof u!="number"&&bu(n._skip)&&(u=n._skip),typeof f!="number"&&bu(n._take)&&(f=n._take),typeof o!="boolean"&&n._includeTotalCount&&(o=n._includeTotalCount),n=n._source}while(n);return n._queryParameters&&i.each(n._queryParameters,function(n,i){i!=="null"&&t.push(n.toString()+"="+encodeURIComponent(i.toString()))}),r.length>0&&t.push("$filter="+encodeURIComponent(r.join(" and "))),s.length>0&&t.push("$orderby="+s.join(",")),h.length>0&&t.push("$expand="+h.join(",")),typeof u=="number"&&t.push("$skip="+u.toString()),typeof f=="number"&&t.push("$top="+f.toString()),o&&t.push("$inlinecount=allpages"),t.length>0&&(e+="?"+t.join("&")),e})}),bh=function(n,t,i,r){u(n,"_source",t),u(n,"_entitySet",t._entitySet),u(n,"_rootUri",i),u(n,"_queryParameters",r)},d(v,r.queryable),d(v,{canInsert:l(function(){return!!this._model.canInsert}),canUpdate:l(function(){return!!this._model.canUpdate}),canDelete:l(function(){return!!this._model.canDelete}),getModel:function(){return this._model},getEntityType:function(){return this._entityType},load:function(){return rt(this)},addNew:function(){return new(this.getEntityType())(this)}}),wh=function(n,t,i){var r=t.details;n.dataService=t,n.name=i?i.name:null,u(n,"_model",r.properties[i.name].getModel()),u(n,"_entityType",i.elementType),u(n,"_requestUri",r._serviceUri+"/"+i.serviceName),u(n,"_rootUri",n._requestUri),u(n,"_entitySet",n),u(n,"_addedEntities",[]),u(n,"_loadedEntities",{})},d(w,{saveChanges:bt}),kh=function(n,t){t&&(n.details.dataWorkspace=t)},d(k,{hasChanges:h(null,function(){return this._changeCount>0}),getChanges:dt,discardChanges:gt,_findModel:ni,contentchange:tr(),dispatchEvent:ge(function(n,t,i){i.call(this,n,t);var f=this.dataWorkspace,r,u;f&&(r=f.details,n==="contentchange"?r.dispatchEvent("contentchange",t):n===cu&&t==="hasChanges"&&(u=this.hasChanges?++r._changeCount==1:--r._changeCount==0,u&&r.dispatchChange("hasChanges")))})}),dh=function(n,t){n.dataService=t,u(n,"_entitySets",{}),u(n,"_linkSets",{}),u(n,"_changeCount",0)},yc=function(n){i.each(n.getChanges(),function(){rc(this.details)})},pc=function(n){var t=0;return i.each(n.getChanges(),function(){ic(this.details)&&t++}),t},e(k,"EntitySetProperty",function(n,t){hr.call(this,n,t),this.dataService=this.owner},hr,{value:l(ti),_findModel:function(){return yr(this._details.getModel().entitySets,this._entry.name)}}),ut=k.EntitySetProperty,co=function(n,i){var u,c,o,r,f,s,h,e;if(n===t||n===null)return"null";i.charAt(0)!==":"&&(i=":"+i);switch(i){case":Binary":case":Binary?":return"binary'"+n+"'";case":Date":case":DateTime":case":Date?":case":DateTime?":return u=n,"datetime'"+u.getFullYear().toString()+"-"+p(u.getMonth()+1)+"-"+p(u.getDate())+"T"+p(u.getHours())+":"+p(u.getMinutes())+":"+p(u.getSeconds())+"'";case":Decimal":case":Decimal?":return n+"M";case":Guid":case":Guid?":return"guid'"+n+"'";case":Int64":case":Int64?":return n+"L";case":Single":case":Single?":return n+"f";case":String":case":String?":return"'"+n.replace(/'/g,"''")+"'";case":TimeSpan":case":TimeSpan?":return c=n,o="",r=c.ms,r<0&&(o="-",r=-r),f=Math.floor(r/864e5),r-=864e5*f,s=Math.floor(r/36e5),r-=36e5*s,h=Math.floor(r/6e4),r-=6e4*h,e=Math.floor(r/1e3),r-=e*1e3,"time'"+o+"P"+(f>0?f.toString()+"D":"")+"T"+s.toString()+"H"+h.toString()+"M"+(r>0?(e+r/1e3).toString():e.toString())+"S'";case":Byte":case":Byte?":case":Boolean":case":Boolean?":case":Double":case":Double?":case":Int16":case":Int16?":case":Int32":case":Int32?":case":SByte":case":SByte?":return n.toString();default:return}return},a("DataService",w),a("_toODataString",co),a("EntitySet",v),a("DataServiceQuery",c),a("_defineDataService",ui),wu=function(n,t){var i=at(n,t);return i?i.entitySet:null},tc=function(n,t){var r=at(n,t),i=r.model;return!(i.canDelete||i.canInsert||i.canUpdate)}}(),function(){function w(){return this._changeCount>0}function b(n){var t=n._owner._nestedChangeSets;return t.length<=0?!1:n===t[t.length-1]}function o(n,t){var i=n.hasNestedChanges;n._changeCount+=t,i!==n.hasNestedChanges&&n.dispatchChange("hasNestedChanges")}function v(n,t,i){o(n,-n._changeCount),t&&o(t,i)}function y(n,t){var r=n._owner,i=r._nestedChangeSets,u;i.pop(),i.length>0&&(u=i[i.length-1]),v(n,u,t),i.length===0&&r.dispatchChange("hasNestedChangeSets")}function p(n){var t=0;return i.each(n._owner._dataServices,function(n,i){t+=pc(i.details)}),t}function k(){var t=this._owner.getChanges(),r=this._owner._nestedChangeSets.indexOf(this),n=[];return i.each(t,function(){for(var t=this.details._;t;){if(t.__changeSetIndex===r){n.push(this);break}t=t.__parent}}),n}function s(n){b(n)||eu(f("nestedChangeSet_not_last"))}function g(){s(this);var i=p(this),r=this._owner,n=r._nestedChangeSets,t;n.length>1&&(t=n[n.length-2]),v(this,t,i)}function nt(){s(this),y(this,p(this))}function tt(){s(this),i.each(this._owner._dataServices,function(n,t){yc(t.details)}),y(this,0)}function it(){return this._changeCount>0}function rt(){return this._nestedChangeSets.length>0}function ut(){var n=[];return i.each(this._dataServices,function(){n=n.concat(this.details.getChanges())}),n}function ft(){return yr(vr().globalItems,"DataWorkspace")}function et(){var t=this._details,i=this._entry,r=t._dataServices,u=i.name,n=r[u];return n||(r[u]=n=new i.type(t.dataWorkspace)),n}function ot(){function i(n){t.call(this,n)}return i}function st(t,i){var r=t,f=ot(t),u={};return ci(null,null,t,f,n),i&&(i.forEach(function(n){var t=n.name;n.serviceName=t,n.get=function(){return this.details.properties[t].value},u[t]=ir(n,n.type,c)}),d(r,u)),r}var n=r.DataWorkspace,t=n.Details,c;e(n,"NestedChangeSet",function(n){u(this,"_owner",n)},null,{_changeCount:0,hasNestedChanges:h(null,w),getNestedChanges:k,applyNestedChanges:g,commitNestedChanges:nt,cancelNestedChanges:tt}),gh=function(){},ho=function(n){var t=n.details,i=t._nestedChangeSets,u=new r.DataWorkspace.NestedChangeSet(t);return i.push(u),i.length===1&&t.dispatchChange("hasNestedChangeSets"),u},d(t,{hasChanges:h(null,it),hasNestedChangeSets:h(null,rt),getChanges:ut,_findModel:ft,contentchange:tr()}),nc=function(n,t){n.dataWorkspace=t,u(n,"_dataServices",{}),u(n,"_linkSets",{}),u(n,"_nestedChangeSets",[]),u(n,"_changeCount",0)},dr=function(n,t,i){var r=n._nestedChangeSets;0<=t&&t<r.length&&o(r[t],i)},e(t,"DataServiceProperty",function(n,t){hr.call(this,n,t),this.dataWorkspace=this.owner},hr,{value:l(et),_findModel:function(){return yr(this._details.getModel().members,this._entry.name)}}),c=t.DataServiceProperty,a("DataWorkspace",n),a("_defineDataWorkspace",st)}(),function(){function n(n,t){u(this,"_collectionChangeCallback",n),u(this,"_invalidatedCallback",t)}function i(){throw t;}function f(){throw t;}function o(){throw t;}function s(){throw t;}e(r,"CollectionLoader",function(n){n||(n=45),u(this,"_pageSize",n)},null,{canLoadNext:!1,subscribe:n,loadNext:i,reset:f,addNewItem:o,deleteItem:s}),ku=r.CollectionLoader}(),vf=0,function(){function s(n,t,r,u,f){if(this.bindingPath=n,this.bindingSource=t,this.targetProperty=r,this.bindingTarget=u,this.bindingMode=f?f:yt.twoWay,this._resetting=!1,this._lastSourceNode=null,this._lastSourceProperty=null,this._callbacks=[],i.isFunction(u)&&(this.bindingMode===yt.twoWay||this.bindingMode===yt.oneWayFromTarget))throw"Binding initialization error. Invalid binding mode.";}function u(n,t,i){this.host=n,this.propertyName=t,this.callback=i}function h(){var t=this,r=t.bindingTarget;n(t,!1),ds(t)||(r&&!i.isFunction(r)?bt(r,t):bt(t.bindingSource,t))}function c(){this._isDeactivated&&(this._isDeactivated=!1,this._invalidated&&(n(this,!1),this._invalidated=!1))}function l(){this._isDeactivated=!0}function a(){this.bindingSource=null,n(this,!0),this.bindingTarget=null,this.value=null}function n(i,r){function k(){i._isDeactivated?i._invalidated=!0:(w=f(i,i._lastSourceNode[i._lastSourceProperty]),t(i,l,i.targetProperty,w))}function d(){i._isDeactivated?i._invalidated=!0:n(i,!1)}var p=i.bindingPath?i.bindingPath.split("."):[],e=i.bindingSource,a=i._callbacks,s,h,b,c=i._targetCallback,l=i.bindingTarget,w,y;if(!i._resetting)try{for(vf++,i._resetting=!0,s=0;s<a.length;s++)h=a[s],h.host.removeChangeListener(h.propertyName,h.callback);if(a=[],r)i._lastSourceNode=null,i._lastSourceProperty=null,i.value=null;else{for(s=0;s<p.length;s++){if(y=p[s],e&&o(e)&&(i.bindingMode===yt.twoWay||i.bindingMode===yt.oneWayFromSource)&&(h=s===p.length-1?k:d,e.addChangeListener(y,h),a.push(new u(e,y,h))),i._lastSourceNode=e,i._lastSourceProperty=y,!e)break;if(e=e[y],!e&&s<p.length-1){i._lastSourceNode=null;break}}w=f(i,e),t(i,l,i.targetProperty,w)}c&&c.host.removeChangeListener(c.propertyName,c.callback),c=null,r||!!l&&o(l)&&(i.bindingMode===yt.twoWay||i.bindingMode===yt.oneWayFromTarget)&&(b=function(){i._isDeactivated?i._invalidated=!0:v(i)},l.addChangeListener(i.targetProperty,b),c=new u(l,i.targetProperty,b))}finally{i._resetting=!1,vf--,i._callbacks=a,i._targetCallback=c}}function v(n){var r=n._lastSourceProperty,i;n._resetting||(n._resetting=!0,i=y(n,n.bindingTarget[n.targetProperty]),t(n,n._lastSourceNode,n._lastSourceProperty,i),n._resetting=!1)}function f(n,t){var r=n.converter;return!r||!i.isFunction(r.convert)?t:r.convert(t)}function y(n,t){var r=n.converter;return!r||!i.isFunction(r.convertBack)?t:r.convertBack(t)}function o(n){return n.addChangeListener&&n.removeChangeListener}function t(n,t,r,u){var f=n.value,e=f===u;e||!f||!u||!f.valueOf||f.valueOf!==u.valueOf||(e=u.valueOf()===f.valueOf()),e&&n._isTargetInitialized||(n.value=u,i.isFunction(t)?t.call(n,u):!t||!r||t[r]===u||(t[r]=u),n._isTargetInitialized=!0)}ct("data",{DataBindingMode:{twoWay:1,oneWayFromSource:2,oneWayFromTarget:3,once:4}}),yt=r.data.DataBindingMode,e("data","DataBinding",s,null,{value:null,bind:h,activate:c,deactivate:l,_onDispose:a})}(),function(){function n(n){return e(null,null,function(){},r.BoundArguments,{length:n})}function t(){for(var t=[],n=0,i=this.length;n<i;n++)t.push(this["arg"+n.toString()]);return t}su=function(t,u){var e=n(u.length),o=new e,f={},s,c=[];return i.each(u,function(n){var i="arg"+n.toString(),l=this.optional,u=this.binding,e=this.value;u?(f[i]=h(e),s=new r.data.DataBinding(u,t,i,o),c.push(s)):f[i]=de(e),l&&(f[i+".optional"]=!0)}),d(e,f),c.forEach(function(n){n.bind()}),o},e(r,"BoundArguments",function(){},null,{getCurrentValues:t}),ar(r.BoundArguments)}(),function(){function r(){}function u(n){for(var u=/\{(.*)\}/,t,r=u.exec(this.format),i=this.format,f;!!r;)t=r[1],f=t==="value"?n:this[t]?this[t]:"",i=i.replace("{"+t+"}",f),r=u.exec(i);return i}function o(n){return n}function s(n,t){to(n,"convert"),this._convert=n,this._convertBack=t}function h(n){return this._convert.call(this,n)}function c(n){return this._convertBack?this._convertBack.call(this,n):n}function i(){var n=rt.culture().calendars.standard.patterns;return n.d+" "+n.T}function l(){var n=rt.culture().calendars.standard.patterns;return n.d+" "+n.t}function n(n){return n<10?"0"+n.toString():n.toString()}function a(t){var s=t,o="",i,r,u,f,e;return i=s.ms,i<0&&(o="-",i=-i),r=Math.floor(i/864e5),i-=864e5*r,u=Math.floor(i/36e5),i-=36e5*u,f=Math.floor(i/6e4),i-=6e4*f,e=Math.floor(i/1e3),i-=e*1e3,o+(r>0?r.toString()+".":"")+n(u)+":"+n(f)+":"+n(e)+(i>0?"."+i.toString():"")}e("ui.converters","TextFormatConverter",r,null,{convert:u,convertBack:o}),e("ui.converters","GenericConverter",s,null,{convert:h,convertBack:c}),pf=function(n){var i=n===null||n===t?"":n.toString(),r=i.indexOf(".");return r!==-1?i.length-r-1:0},yf=function(n){return n===""?null:n===null||n===t?n:parseFloat(n.toString())},yo=function(n,r){var f="",e,u,o,s,h,c;return n!==t&&n!==null&&(e=ou(r.propertyType),u=e.primitiveType.id,o=e.semanticType?e.semanticType.id:"",o===":Date"?f=rt.format(n,"d"):u===":DateTime"?f=rt.format(n,i()):u===":TimeSpan?"||u===":TimeSpan"?f=a(n):u===":Decimal"||u===":Double"||u===":Single"?(u===":Decimal"&&(n=yf(n)),f=rt.format(n,"n"+pf(n).toString())):f=n.toString()),f},wc=function(n,t){var a,r,e,et=t.propertyType,w=ou(et),u=w.primitiveType.id,v=w.semanticType?w.semanticType.id:"",s,h,c,b=rt.culture().numberFormat,o,ft,k,d,g,nt,y;if(u===":String"&&n===""&&!!ut(t,":@Required")&&!!ut(t,":@AllowEmptyString"))return{value:""};if(!n)return{value:null};if(a=n.toLowerCase(),u===":Byte"||u===":Int16"||u===":Int32"||u===":Int64")r=rt.parseInt(n),isNaN(r)||n.indexOf(b["."])!==-1?e=f("validation_invalidValue_integer"):(u===":Byte"?(s=0,h=255):u===":Int16"?(s=-65536,h=65535):u===":Int32"?(s=-4294967296,h=4294967295):u===":Int64"&&(s=-18446744073709551616,h=18446744073709551615),(r<s||r>h)&&(e=f("validation_invalidRange_2args",rt.format(s,"n"),rt.format(h,"n"))));else if(u===":Decimal"||u===":Double"||u===":Single")r=rt.parseFloat(n),(isNaN(r)||n.indexOf(b.currency.symbol)!==-1||n.indexOf(b.percent.symbol)!==-1)&&(e=f("validation_invalidValue_decimal"));else if(u===":Boolean")r=a==="true"||a==="1",r||a!=="false"&&a!=="0"&&(e=f("validation_invalidValue_boolean"));else if(v===":Date"||u===":DateTime")r=rt.parseDate(n,[i(),l()]),!r||isNaN(r.getFullYear())?(r=rt.parseDate(n),(!r||isNaN(r.getFullYear()))&&(e=v===":Date"?f("validation_invalidValue_date"):f("validation_invalidValue_dateTime"))):v===":Date"&&r.setHours(0,0,0,0);else if(u===":TimeSpan")c=/^\s*(\+|-)?((\d+)?\.)?(\d{1,2})?:{0,1}(\d{1,2})?:{0,1}(\d{1,2})?(\.(\d{1,7})?)?\s*$/,o=c.exec(n),o===null?e=f("validation_invalidValue_timespan"):(ft=parseInt(o[3]||"0",10),k=parseInt(o[4]||"0",10),d=parseInt(o[5]||"0",10),g=parseInt(o[6]||"0",10),nt=parseInt((o[8]||"0").slice(0,3),10),k>23||d>59||g>59||nt>999?e=f("validation_invalidRange_timespan"):(y=ft*864e5+k*36e5+d*6e4+g*1e3+nt,o[1]==="-"&&(y=-y),r={ms:y,__edmType:"Edm.Time"}));else if(u===":Guid")r=n,c=/^(\{{0,1}([0-9a-fA-F]){8}(-([0-9a-fA-F]){4}){3}-([0-9a-fA-F]){12}\}{0,1})$/,c.test(r)||(e=f("validation_invalidValue_guid"));else if(v===hi+":WebAddress")c=/^\s*(http|https):\/\/(.*)$/,r=c.test(n)?n:"http://"+n.replace(/^\s*/,"").replace(/\s*$/,"");else if(v===hi+":EmailAddress"){var tt=vo(),p=ut(t,hi+":@EmailAddressProperties"),it=n.replace(/@\s*$/,"");r=tt[0].test(it)||!p||!p.defaultDomain||!tt[1].test(it)||!tt[2].test(p.defaultDomain.replace(/^\s*@/,""))?n:it+"@"+p.defaultDomain.replace(/^\s*@/,"")}else r=n;return{value:e?null:r,error:e}}}(),function(){function t(n){var t=n._activeQuery,i=t.execute||t.load;return i.call(t)}function n(n){var t,i;return n&&(t=n.details._)&&(i=t.__metadata)&&i.uri}function i(t,i,r){var u=r,f={};return!i||i.length<=0||!r||r.length<=0?u:(u=[],i.forEach(function(t){var i=n(t);i&&(f[i]=!0)}),r.forEach(function(t){var i=n(t);i&&f[i]||u.push(t)}),u)}function r(n){var r=this,u=r._activePromise,f;return u||(u=r._activePromise=et(function(e){function l(n,t,u,e){if(f=!0,r._activePromise=null,r._activeQuery=null,t)e.error(t);else{var s=u.results,h=s.length,c=u.totalCount,o,l;r._isFirstPage?(o=s,l=r._getAddedEntities(),!!l&&l.length>0&&(o=l.slice(0).reverse().concat(o)),r._skipCount=h,r._serverCount=r._isTotalCountIncluded?typeof c!="number"||c<0?Number.MAX_VALUE:c:r._disablePaging||h<r._pageSize?h:Number.MAX_VALUE,r._isFirstPage=!1):(o=i(r,n,s),r._skipCount+=h,s.length<r._pageSize?r._serverCount=r._skipCount:r._isTotalCountIncluded&&(r._serverCount=c)),e.complete(o)}}u=r._activePromise=e.promise();var o=r._baseQuery,c=r._skipCount,h,s;r.canLoadNext&&!!o?(h=r._pageSize,s=r._isFirstPage?!0:c+h>=r._serverCount,s=s&&!r._disableTotalCount,r._isTotalCountIncluded=s,r._disablePaging||(o=o.skip(c).top(h)),s&&(o=o.includeTotalCount()),r._activeQuery=o,t(r)._thenEx(function(t,i){r._activeQuery!==o?e.complete():l(n,t,i,e)}),e.interleave()):l(n,null,{totalCount:0,results:[]},e)}),f&&(r._activePromise=null)),u}function u(){this._activePromise=null,this._activeQuery=null,this._isFirstPage=!0,this._skipCount=0}wf=function(n){d(n,{_isFirstPage:!0,_serverCount:0,_skipCount:0,canLoadNext:l(function(){var n=this;return n._isFirstPage||!!n._baseQuery&&n._skipCount<n._serverCount}),loadNext:r,reset:u})}}(),function(){function s(t){return n(t,l)}function h(t){return n(t,a)}function n(n,t){var f=new r.ExpressionInfo,i;return uh(n)?(i=n,u(i.links||[],t)):u([n],t)}function u(i,u){var f=new r.ExpressionInfo,p,d,b,rt,g,o,k,w,a,ot,v,s;if(i.length===1&&fh(i[0]))return f.constantValue=i[0].value,f.isConstant=!0,f;if(f.valueBindingPath=u(i),i.length===0)return f.isBinding=!0,f;for(p=0;p<i.length;p++){var e=i[p],c,l,it=eh(e),st=rh(e),ht=p===i.length-1;if(it)c=e.member,typeof e.member=="string"?(l=e.member,c=null):l=c.name;else if(st)c=e.target,l=c.name,f.valueBindingPath==="screen"&&l==="showDialog"&&(l="showPopup");else return f;if(d=kt(l),b=f.valueBindingPath,f.valueBindingPath=t(b,d),ht)if(f.lastModelItem=c,f.lastObjectBindingPath=b,it)rt=t(b,"details","properties",d),f.detailsBindingPath=rt;else{g=ut(e,":@AssociatedCollection"),g&&(f.associatedCollection=g.collection),f.createNewEntities=vu(e,":@CreateNewEntity")||[],f.argumentBindings=[],f.isCall=!0;for(var h=e.target.parameters,nt=e.target.source,tt,ft,ct=e,et=ct.arguments||[];nt;)if(!(tt=nt.member))break;else!(ft=tt.parameters)||(h=ft.concat(h||[])),nt=tt.source;if(h){for(o=f.argumentBindings,k=0;k<et.length;k++)w=et[k],a=h.indexOf(w.parameter),a<0||!w.value?o[a]=null:(ot=w.value,v=n(ot,u),v.isConstant?o[a]={value:v.constantValue}:v.isCall||v.isBinding&&(o[a]={binding:v.valueBindingPath}),pr(w.parameter.parameterType)&&(o[a].optional=!0));for(s=0;s<h.length;s++)o[s]||(o[s]=null,(pr(h[s].parameterType)||y(f.createNewEntities).any(function(n){return n.targetParameter===h[s]}))&&(o[s]={optional:!0}))}}}return f.isBinding=!0,f}function c(){return null}function l(n){var t="data";if(n.length===0)return t;switch(f(n[0])){case"Screen":return"screen";case"Application":return"application";case"EntityType":return t;default:return null}}function a(n){if(n.length===0)return"";switch(f(n[0])){case"Screen":return"";case"EntitySets":return"";default:return null}}function f(n){var u=n.member||n.target,t,i;return u&&(i=u.id.replace(/[\/].*/,""),t=r.services.modelService.tryLookupById(i),!t&&vr().name===i)?"Application":oo(t)?"Application":hh(t)?"Screen":ch(t)?"EntityType":uo(t)?"EntitySets":void 0}function t(){var n=null;return i.each(arguments,function(t,i){!i||(n=!n?i:[n,i].join("."))}),n}var o="";e(r,"ExpressionInfo",function(){},null,{isConstant:!1,isBinding:!1,detailsBindingPath:null,valueBindingPath:o}),bf=s,po=h,bc=function(t){var i=n(t,c);return i.constantValue},la=t}(),function(){function i(n){var t={result:n};switch(n){case p.cancel:t.text=f("dialogService_cancel"),t.icon="back";break;case p.ok:t.text=f("dialogService_ok"),t.icon="check";break;case p.yes:t.text=f("dialogService_yes"),t.icon="check";break;case p.no:t.text=f("dialogService_no"),t.icon="delete";break;default:return}return t}function e(n){var t=[];return n&&(Array.isArray(n)?t=n:typeof n=="number"&&ps(gr,n)&&[p.ok,p.yes,p.no,p.cancel].forEach(function(r){(n&r)===r&&t.push(i(r))})),t}var n,t;u(r,"modal",{}),pt=r.modal,ct(pt,{DialogResult:{none:0,cancel:1,ok:2,yes:4,no:8}}),p=pt.DialogResult,ct(pt,{DialogButtons:{none:0,ok:p.ok,okCancel:p.ok|p.cancel,yesNo:p.yes|p.no,yesNoCancel:p.yes|p.no|p.cancel}}),gr=pt.DialogButtons,u(pt,"show",function(n){return et(function(t){n.buttons=e(n.buttons),pt._modalView.show(n).then(function(n){t.complete(n)})})}),u(pt,"close",function(){pt._modalView.close()}),u(pt,"isOpen",function(){return pt._modalView.isOpen()}),wo=function(n,t){function f(n){return n&&n.message&&typeof n.message=="string"?n.message:typeof n=="string"?n:null}var r="Error",u,i;return n.noErrorDialog?c.Promise.as():(n.title&&typeof n.title=="string"?r=n.title:!t||typeof t!="string"||(r=t),Array.isArray(n)?(i="",u=n,u.forEach(function(n){var t=f(n);t&&(i&&(i+="\r\n"),i+=t)})):i=f(n),pt.show({title:r,message:i,buttons:gr.ok}))},ct(r,{MessageBoxButtons:{ok:gr.ok,okCancel:gr.okCancel,yesNo:gr.yesNo,yesNoCancel:gr.yesNoCancel}}),n=r.MessageBoxButtons,ct(r,{MessageBoxResult:{ok:p.ok,yes:p.yes,no:p.no,cancel:p.cancel}}),t=r.MessageBoxResult,a("MessageBoxButtons",r.MessageBoxButtons),a("MessageBoxResult",r.MessageBoxResult),a("showMessageBox",function(i,r){r=r||{};var f=r.buttons||n.ok,u=r.defaultResult;if(!u)switch(f){case n.ok:u=t.ok;break;case n.okCancel:u=t.cancel;break;case n.yesNo:u=t.no;break;case n.yesNoCancel:u=t.cancel;break;default:u=t.cancel}return pt.show({title:r.title,message:i,buttons:f,defaultResult:u})})}(),bo="CommandProgressStart",kf="CommandProgressComplete",function(){function o(){var i=n<=0;n++,i&&lt(bo)}function s(){n--,n<=0&&lt(kf)}function u(){var r=this,e=r._method,o=r._executionContext,f=r._argumentValues,s=!1,n,u;return!e||!o||!f?!1:(i.each(f,function(n,i){return(i===t||i===null)&&!r._isOptional(n)?(s=!0,!1):!0}),s)?!1:(n=e.canExecute,u=i.isFunction(n)?!!n.apply(o,f):typeof n=="boolean"?n:!0)}function l(){return!1}function a(t){var i=this;return n?c.Promise.as():(o(i),i._isExecuting=!0,et(function(n){var r,u;i._computeCanExecute()||or("cannotExecuteError",f("command_cannot")),ko=t;try{r=i._method.apply(i._executionContext,i._argumentValues)}finally{ko=null}c.Promise.is(r)?(u=r,u.then(function(t){n.complete(t)},function(t){n.error(t)})):n.complete(r)})._thenEx(function(n,t){if(i._isExecuting=!1,s(i),n)throw n;return t}))}var n=0;e(r,"Command",function(n,t,i){this._method=n,this._executionContext=t,this._argumentValues=i,this.options={}},null,{_method:h(null),_executionContext:h(null),_argumentValues:h(null),_isExecuting:h(!1),canExecute:wt(function(){return!this._isExecuting&&u.call(this)}),execute:a,_computeCanExecute:u,_isOptional:l})}(),function(){e(r,"BoundCommand",function(n,t,i){var f,o,e,s;r.Command.prototype.constructor.call(this,null,null,null),to(t,"bindingSource"),f=this,o=new r.data.DataBinding(n,t,"_method",f),o.bind(),e=n.replace(/[.][^.]+$/,""),n===e?f._executionContext=t:(s=new r.data.DataBinding(e,t,"_executionContext",f),s.bind()),!!i&&i.length>0?(u(f,"_boundArguments",i),f._argumentValues=f._boundArguments.getCurrentValues(),i.addChangeListener(null,function(){f._argumentValues=f._boundArguments.getCurrentValues()})):f._argumentValues=[]},r.Command,{_isOptional:function(n){return!!this._boundArguments["arg"+n.toString()+".optional"]},_onDispose:function(){var n=this;n._boundArguments&&(k(n._boundArguments),n._boundArguments=null)}})}(),function(){ct(r,{BoundaryOption:{none:"none",nested:"nested",save:"save"}}),nt=r.BoundaryOption,ct(r,{NavigateBackOption:{none:"none",saveBoundary:"saveBoundary",beforeSaveBoundary:"beforeSaveBoundary"}}),li=r.NavigateBackOption,ct(r,{NavigateBackAction:{cancel:"cancel",commit:"commit"}}),df=r.NavigateBackAction,a("NavigateBackAction",df)}(),function(){function i(t,i){var u=i.defaultValueSource,r;u&&n(t,u),r=i.isReadOnly,typeof r!="undefined"&&(t._isReadOnly=!!r)}function n(n,t){t&&(n._defaultValue=bc(t))}function t(n){var t=new r.PropertyDescription(n.propertyDefinition);return t._defaultValue=n._defaultValue,t._isReadOnly=n._isReadOnly,t}function u(n){var r=t(this);return i(r,n),r}function f(i){var r=t(this);return n(r,i),r}function o(n){var i=t(this);return i._defaultValue=n,i}e(r,"PropertyDescription",function(t){this.propertyDefinition=t;var i=t.propertyType;i&&!sh(i),n(this,t.defaultValueSource),this._isReadOnly=!!t.isReadOnly},null,{_defaultValue:null,isReadOnly:l(function(){return this._isReadOnly}),defaultValue:l(function(){return this._defaultValue}),propertyType:l(function(){return this.propertyDefinition.propertyType}),isAttachable:l(function(){return!!this.propertyDefinition.isAttachable}),isInheritable:l(function(){return!!this.propertyDefinition.isInheritable}),propertyId:l(function(){return this.propertyDefinition.id}),propertyName:l(function(){return this.propertyDefinition.name}),applyPropertyOverrides:u,applyDefaultValueOverride:f,applyDefaultValueOverrideFromConstant:o})}(),function(){function t(t,i){t in this.values&&n(this,t,i)}function n(n,t,i){var f=r.services.modelService.tryLookupById(t),u=kt(f.name,!0);u in n.values&&(delete n.values[u],delete n.values[t]),b.defineProperty(n.values,u,{configurable:!0,enumerable:!0,writable:!1,value:i}),b.defineProperty(n.values,t,{configurable:!0,enumerable:!0,writable:!1,value:i})}e(r,"PropertyDictionary",function(t,r){var u=this;this.descriptions=t,this.values={},this.contentItemName=r,i.each(t,function(t,i){n(u,i.propertyId,i.defaultValue)})},null,{setValue:t})}(),function(){function c(n){return w(this),k(this,n),d(this,n),g(this,this._parentView),nt(this,this._placeholderInParent),this._stateIsResolved=!0,this._properties}function l(n,t){var r,i;if(!t||!(r=th(t)))return!1;for(i=n._parentView;i;){if(r.id===i.id)return!0;i=i.baseControl}return!1}function a(n){if(!t){t=[],f=[];var u=v(n);i.each(u,function(n,i){i.isAttachable&&i.attachedPropertyAvailability==="ImmediateChildren"?f.push(new r.PropertyDescription(i)):t.push(new r.PropertyDescription(i))})}return t}function v(){var r=[],u=ro(oh);return i.each(u,function(n,t){t.properties&&i.each(t.properties,function(n,t){t.isInheritable&&!t.isAttachable,t.isAttachable&&r.push(t)})}),!n||!n.properties||i.each(n.properties,function(n,t){t.isAttachable||r.push(t)}),r}function y(n){var t=a(n).slice(0);return i.each(f,function(i,r){l(n,r.propertyDefinition)&&t.push(r)}),t}function p(n,t){var i=t;!i||s(n,i)}function s(t,u){var f=u.baseControl;f||(f=n),f&&(n&&f.id===n.id||s(t,f)),u.propertyOverrides&&i.each(u.propertyOverrides,function(n,i){var r=i.property.id,u=t._properties[r];!u,t._properties[r]=u.applyPropertyOverrides(i)}),u.properties&&i.each(u.properties,function(n,i){i.isAttachable||(t._properties[i.id]=new r.PropertyDescription(i))})}function w(n){var t=y(n);i.each(t,function(t,i){var r;!i.isInheritable||!n._ownerPropertyValues||!(r=n._ownerPropertyValues[i.propertyDefinition.id])||(i=i.applyDefaultValueOverrideFromConstant(r)),n._properties[i.propertyDefinition.id]=i})}function b(n,t,i){var r=t.id,u=n._properties[r];u&&(n._properties[r]=u.applyDefaultValueOverride(i))}function k(n,t){t&&p(n,t)}function d(n,t){!t||!t.propertySources||o(n,t.propertySources)}function g(n,t){!t||!t.childItemPropertySources||o(n,t.childItemPropertySources)}function nt(n,t){!t||!t.propertySources||o(n,t.propertySources)}function o(n,t){i.each(t,function(t,i){b(n,i.property,i.source)})}var h=":RootControl",n,t,f;aa=function(){n=null,t=null,f=null},e(r,"PropertyDefaultsResolver",function(t,i,f,e){u(this,"_ownerPropertyValues",i),u(this,"_placeholderInParent",f),u(this,"_parentView",e),u(this,"_properties",{}),n||(n=r.services.modelService.tryLookupById(h))},null,{_stateIsResolved:!1,resolveProperties:c})}(),function(){ci(r,"Screen",function(n,t,i){br.call(this),kc(this,n,t,i)},function(n){yu.call(this,n),dc(this,n)},br),e(r,"VisualCollection",function(n,t){nl(this,n,t)})}(),ts=ot("IsDynamicTile","TileList"),is=ot("WidthSizingMode"),function(){function tt(){var n=this;n.children.forEach(k),n.children=null,n.commandItems.forEach(k),n.commandItems=null,n._binding=null,n._detailsBinding=null,n._choicesSourceBinding=null,n._externalBindings=null,n.parent=null,n._view=null,n.__details=null,n.__screen=null,n.__value=null,n.__data=null,n.__choicesSource=null}function rt(n){var t=this,i=t.model,r=i.choicesSource,u;t.kind=i.kind,t.name=i.name,t.displayName=io(i),t.validationResults=[],r&&(u=bf(r),t._choicesSourceBindingPath=u.valueBindingPath),t._initializeCore(n)}function ft(n){var t=this,r=t.model,i;t.data=n,t.children=[],t.commandItems=[],t._parseDataSource(),!t.parent||t.parent.kind==="Collection"||(t.data=t.parent.value),t._resolveProperties(),ei(t),t._parseChoiceList(),t.kind===it.value&&t.valueModel&&(i=ut(t.valueModel,":@MaxLength"),!i||(t.maxLength=i.value)),!!t.parent&&t.parent._isActivated&&t._activate(),t._isUnderList=!!t.parent&&(t.parent.kind===it.collection||t.parent._isUnderList)}function et(){var n=this,t,i,r;if(n._bindingInitialized){if(!n._detailsBinding||n._detailsBinding.activate(),!n._binding||n._binding.activate(),!n._choicesSourceBinding||n._choicesSourceBinding.activate(),r=n._externalBindings,!!r)for(t=0,i=r.length;t<i;t++)r[t].activate()}else u(n,"_bindingInitialized",!0),ui(n);for(u(n,"_isActivated",!0),t=0,i=n.children.length;t<i;t++)n.children[t]._activate();for(t=0,i=n.commandItems.length;t<i;t++)n.commandItems[t]._activate()}function st(){var n=this,t,i,r;if(n._isActivated=!1,!n._detailsBinding||n._detailsBinding.deactivate(),!n._binding||n._binding.deactivate(),!n._choicesSourceBinding||n._choicesSourceBinding.deactivate(),r=n._externalBindings,!!r)for(t=0,i=r.length;t<i;t++)r[t].deactivate();for(t=0,i=n.children.length;t<i;t++)n.children[t]._deactivate();for(t=0,i=n.commandItems.length;t<i;t++)n.commandItems[t]._deactivate()}function ht(){var n=this,t,r,i;if(!!n._stringValueConversionError)try{n._doNotUpdateValue=!0,v(n)}finally{n._doNotUpdateValue=!1}for(i=n.children,t=0,r=i.length;t<r;t++)i[t]._refreshStringValue()}function lt(n){this.parent=n,n.children.push(this)}function at(n){this.parent=n,n.commandItems.push(this)}function vt(n){var r=0,t,u=this._isClone,i;if(this.name===n)return this;if(!!this.children)while(r<this.children.length)if(i=this.children[r++],i._isClone===u&&(t=i.findItem(n),!!t))return t;if(r=0,!!this.commandItems)while(r<this.commandItems.length)if(i=this.commandItems[r++],i._isClone===u&&(t=i.findItem(n),!!t))return t;return t}function o(n,t,i){var r,f=n.details,e=n.children,u,s;if(!f||n.kind!==it.value||gf(n)||(r=lo(f,n.value,i)),r?(!n._stringValueConversionError||r.push(n._stringValueConversionError),n.validationResults=r):c(n),t)for(u=0,s=e.length;u<s;u++)o(e[u],t,i)}function pt(n){o(this,n,!0)}function dt(n){return this.validationResults.length?!0:n?y(this.children).any(function(){return this.hasValidationErrors(n)}):!1}function gt(n,t){if(!t||!i.isFunction(t))throw f("databinding_invalid_callback");var e=new r.data.DataBinding(n,this,"",t,yt.oneWayFromSource);e.bind(),this._externalBindings?this._externalBindings.push(e):u(this,"_externalBindings",[e])}function p(n){return n.pageKind!==vi.none}function ti(){var n=this,i=n.model,r=!!n.parent&&n.parent.kind!=="Collection",t;i.dataSource?n.kind===it.command?(n.bindingPath=null,u(n,"_detailsBindingPath",null)):(t=bf(i.dataSource),n.bindingPath=t.valueBindingPath,n.bindingPath==="data"&&r?u(n,"_detailsBindingPath","parent.details"):u(n,"_detailsBindingPath",t.detailsBindingPath),n.valueModel=t.lastModelItem):(n.bindingPath="data",r&&u(n,"_detailsBindingPath","parent.details"))}function ui(n){function f(){var t=n.details,i=t&&t.owner,u=i&&i.details;n.kind===it.value&&(n._stringValueUpdating||!!t&&(t.isChanged||!!u&&u.entityState===r.EntityState.added)?o(n,!1,!1):c(n)),n._validated=!0}var i;!n._detailsBindingPath||(u(n,"_detailsBinding",new s(n._detailsBindingPath,n,"details",n,yt.oneWayFromSource)),n._detailsBinding.bind()),!n.bindingPath||(u(n,"_binding",new s(n.bindingPath,n,"value",n)),n._binding.bind()),i=n._choicesSourceBindingPath,i&&(u(n,"_choicesSourceBinding",new s(i,n,"choicesSource",n)),n._choicesSourceBinding.bind()),n.addChangeListener("details",function(){n._validated=!1,ni(function(){n._validated||f()})}),n.addChangeListener("value",function(){n._valueUpdating=!0;try{if(n._stringValueUpdating||n.kind!==it.value||v(n),f(),n.kind!==it.collection){var e=n.value,r=n.children,u=n.commandItems,t,i;if(r)for(t=0,i=r.length;t<i;t++)r[t].data=e;if(u)for(t=0,i=u.length;t<i;t++)u[t].data=e}}finally{n._valueUpdating=!1}}),n.addChangeListener("stringValue",function(){if(!n._stringValueUpdating){n._stringValueUpdating=!0;try{n._valueUpdating||n._doNotUpdateValue||n.kind!==it.value||ci(n)}finally{n._stringValueUpdating=!1}}}),n.value!==t&&n.dispatchChange("value")}function fi(){var n=this,t=n.parent,f=n.model,e=t?t.properties:{},o=null,s=new r.PropertyDefaultsResolver(n.name||n.displayName,e,o,n.parent?n.parent.controlModel:null),h=s.resolveProperties(n.controlModel);u(n,"_dictionary",new r.PropertyDictionary(h,n.name)),f.propertySources&&i.each(f.propertySources,function(){var t=oi(n,this);n._dictionary.setValue(t.property.id,t.value)})}function ei(n){n.horizontalAlignment=n.properties[w],n.widthSizingMode=n.properties[ts]?ai.stretchToContainer:n.properties[is],n.heightSizingMode=n.properties[b],u(n,"_isHStretch",n.widthSizingMode===ai.stretchToContainer),u(n,"_isVStretch",n.heightSizingMode===ki.stretchToContainer)}function oi(n,t){var e=t.property,f,i,u,o;return"value"in t?f=t.value:!e.isAction||!t.source||(i=bf(t.source),u=su(n,i.argumentBindings),(!!i.associatedCollection||i.createNewEntities.length>0)&&(o=i.lastModelItem,u.length=o.parameters.length,u["arg"+(u.length++).toString()]={canExecute:si(n,i),beforeShown:hi(n,i)}),f=new r.BoundCommand(i.valueBindingPath,n,u),bt(f,u),bt(n,f)),{property:e,value:f}}function si(t,i){return function(){var r=!0,e=i.createNewEntities,s=t.screen.details.dataWorkspace,u=i.associatedCollection,f,o;return(u&&(f=t.screen[kt(u.name)]),r=y(e).all(function(){var t;if(u||!this.entityType){if(u)return f.addNew.canExecute.apply(f)}else return t=n.msls.application[this.entityType.name],wu(s,t).canInsert;return!0}),!r)?r:(!u||y(e).first(function(){return!this.entityType})||(o=f.selectedItem,r=!!o),r)}}function hi(t,i){return i.createNewEntities.length>0?function(){var f=this,r,e,u;i.createNewEntities.forEach(function(o){i.associatedCollection||!o.entityType?i.associatedCollection&&(e=t.screen[kt(i.associatedCollection.name)],u=e.addNew()):(r=n.msls.application[o.entityType.name],u=new r(wu(f.details.dataWorkspace,r))),o.targetParameter&&(f[kt(o.targetParameter.name)]=u)})}:null}function c(n){n.validationResults.length&&(n.validationResults=[])}function v(n){var u="",r=n.value,f=!1,e;du(n),r!==t&&r!==null&&(n.choiceList&&i.each(n.choiceList,function(){return this.value===r?(u=this.stringValue,f=!0,!1):!0}),f||(n.details?(e=n.details.getModel(),u=yo(r,e)):u=r.toString())),n.stringValue=u}function ci(n){var r=n.stringValue,u=!1,f,t,e;n.choiceList&&i.each(n.choiceList,function(){return this.stringValue===n.stringValue?(r=this.value,u=!0,!1):!0}),u||!n.details?n.value=r:(f=n.details.getModel(),t=wc(r,f),t.error?(e=new ii(n.details,t.error),ne(n,e)):(du(n),n.value===t.value&&o(n,!1,!1),n.value=t.value,v(n)))}function li(){var n=this,u,t,f,r;n.kind===it.value&&n.valueModel&&(t=vu(n.valueModel,":@SupportedValue"),t&&(n.choiceList=[],r=ut(n.valueModel,":@Required"),r||n.choiceList.push({value:"",stringValue:""}),i.each(t,function(){n.choiceList.push({value:this.value,stringValue:cf(this.displayName)||this.value})})))}function yi(){return this.kind===it.tab?vi.tab:this.kind===it.popup?vi.popup:vi.none}function pi(){var t=this.details,i,u,n,f,o,e;return!t&&!this.value?!1:this.kind===it.command&&!!(i=this.properties[d])&&!i.canExecute&&!i._isExecuting?!1:(u=t&&t.owner,n=u&&u.details,n&&"entityState"in n&&(f=n.entityState,f===r.EntityState.deleted||f===r.EntityState.discarded))?!1:(o=this._backingIsEnabled,typeof this._backingIsEnabled=="boolean")?o:(e=this.parent,!!e&&!p(this))?e.isEnabled:!0}function wi(n){this._backingIsEnabled=n}function bi(){var n=this,i=n.details,r=i&&i.isReadOnly,u=n._backingIsReadOnly,t=n.parent;return typeof r=="boolean"&&r?!0:typeof u=="boolean"?u:!!t&&!p(n)&&t.kind!==it.collection?t.isReadOnly:!1}function di(n){this._backingIsReadOnly=n}function gi(){var n=this._backingIsVisible,t;return typeof n=="boolean"?n:this.properties[nt]&&!this.isEnabled?!1:(t=this.model,!t.isHidden)}function nr(n){this._backingIsVisible=n}function tr(){var n,t;return this.kind===it.command?!1:(n=this.details,n&&(t=n.isLoaded,typeof t=="boolean"))?!t&&!n.loadError&&!this.displayError:!1}function ir(){if(this.kind===it.command)return!1;if(this._backingDisplayError)return this._backingDisplayError;var n=this.details;return n?n.loadError:null}function rr(n){this._backingDisplayError=n}function ur(){return this.isVisible?this.displayError?g.hasDisplayError:this.isLoading?g.loading:this.isEnabled?this.isReadOnly?g.readOnly:!this.validationResults.length||this.kind===it.command?g.normal:g.hasValidationError:g.disabled:g.hidden}var s=r.data.DataBinding,w=ot("HorizontalAlignment"),b=ot("HeightSizingMode"),d=ot("Tap"),nt=ot("HiddenIfDisabled","RootCommand");ct(r,{AttachedLabelPosition:{leftAligned:"LeftAligned",rightAligned:"RightAligned",topAligned:"Top",hidden:"Hidden",none:"None"}}),ri=r.AttachedLabelPosition,ct(r,{HorizontalAlignment:{left:"Left",right:"Right"}}),ns=r.HorizontalAlignment,ct(r,{WidthSizingMode:{stretchToContainer:"StretchToContainer",fitToContent:"FitToContent",fixedSize:"FixedSize"}}),ai=r.WidthSizingMode,ct(r,{HeightSizingMode:{stretchToContainer:"StretchToContainer",fitToContent:"FitToContent",fixedSize:"FixedSize"}}),ki=r.HeightSizingMode,ct(r,{ContentItemKind:{collection:"Collection",command:"Command",value:"Value",details:"Details",group:"Group",screen:"Screen",tab:"Tab",popup:"Popup"}}),it=r.ContentItemKind,ct(r,{PageKind:{none:"None",tab:"Tab",popup:"Popup"}}),vi=r.PageKind,ct(r,{VisualState:{hidden:"hidden",loading:"loading",hasDisplayError:"hasDisplayError",disabled:"disabled",readOnly:"readOnly",hasValidationError:"hasValidationError",normal:"normal"}}),g=r.VisualState,gf=function(n){var t=n.controlModel;return t?t.isViewer:!1},ne=function(n,t){n._stringValueConversionError=t,n.validationResults=[t]},du=function(n){n._stringValueConversionError&&(n._stringValueConversionError=null,c(n))},e(r,"ContentItem",function(n,t){this.screen=n,this.model=t},null,{application:l(function(){return n.msls.application}),choicesSource:h(),data:h(),details:h(),displayName:h(),isEnabled:wt(pi,wi),isReadOnly:wt(bi,di),isLoading:wt(tr),displayError:wt(ir,rr),isVisible:wt(gi,nr),_visualState:wt(ur),_backingIsEnabled:h(),_backingIsReadOnly:h(),_backingIsVisible:h(),_backingDisplayError:h(),pageKind:l(yi),properties:l(function(){return this._dictionary.values}),stringValue:h(),value:h(),controlModel:l(function(){var n=this.model;return n.view}),validationResults:h(),_stringValueConversionError:h(),_alwaysShowValidationResults:wt(function(){var n,t;return n=this._alwaysShowValidationResultsValue||!!this.parent&&this.parent._alwaysShowValidationResults||!!this._stringValueConversionError,n||(t=this.details,n=!!t&&t.isEdited),n},function(n){this._alwaysShowValidationResultsValue=n}),_alwaysShowValidationResultsValue:h(),findItem:vt,validate:pt,hasValidationErrors:dt,dataBind:gt,handleViewDispose:function(n){if(n!==null&&!i.isFunction(n))throw f("view_dispose_invalid_handler");this._customViewDisposeHandler=n},_initialize:rt,_activate:et,_deactivate:st,_initializeCore:ft,_refreshStringValue:ht,_setParent:lt,_setCommandItemParent:at,_parseDataSource:ti,_resolveProperties:fi,_parseChoiceList:li,_onDispose:tt}),a("ContentItem",r.ContentItem),a("HorizontalAlignment",ns),a("WidthSizingMode",ai),a("HeightSizingMode",ki),a("ContentItemKind",it),a("PageKind",vi),a("ContentItem",r.ContentItem)}(),function(){function n(n){var t=this._template,i=t._choicesSourceBindingPath;this.kind=t.kind,this.name=t.name,this.displayName=t.displayName,this.model=t.model,this.validationResults=[],this.screen=t.screen,i&&(this._choicesSourceBindingPath=i),this._initializeCore(n)}function t(){this.bindingPath=this._template.bindingPath,this._detailsBindingPath=this._template._detailsBindingPath,this.valueModel=this._template.valueModel}function i(){this._dictionary=this._template._dictionary}function u(){this.choiceList=this._template.choiceList}e("ui","ContentItemClone",function(n){this._template=n},r.ContentItem,{_initialize:n,_parseDataSource:t,_resolveProperties:i,_parseChoiceList:u,_isClone:!0})}(),function(){function f(){}function o(t,i,r,u){return n(t,i,r,null,u)}function n(t,u,f,e,o){var s,h=new r.ContentItem(t,u),c,a,l,v;if(f?h._setParent(f):!e||h._setCommandItemParent(e),h._initialize(o),i.isArray(u.childContentItems))for(s=0;s<u.childContentItems.length;s++)c=u.childContentItems[s],a=n(t,c,h,null);if(i.isArray(u.commandItems))for(s=0;s<u.commandItems.length;s++)l=u.commandItems[s],v=n(t,l,null,h);return h}function s(n,i,r){return t(n,i,null,r)}function t(n,i,u,f){var e,o=new r.ui.ContentItemClone(n),s,c,h,l;for(i?o._setParent(i):!u||o._setCommandItemParent(u),o._initialize(f),e=0;e<n.children.length;e++)s=n.children[e],c=t(s,o,null);for(e=0;e<n.commandItems.length;e++)h=n.commandItems[e],l=t(h,null,o);return o}e("ui","ContentItemService",f,null,{createContentItemTree:o,cloneContentItemTree:s}),u(r.services,"contentItemService",new f)}(),function(){function o(n){return n.screen["__"+this.name]}function s(n,t){var i=this.name,f=n.properties[i],r=n.screen;u(r,"__"+i,t),f.dispatchChange("value"),r.dispatchChange(i)}function e(n){var t=this.name,i=n.properties[t],r=n._propertyData[t],u=!0;return!i.isLoaded&&u?i.load():c.Promise.as(r._value)}function v(n,t){var i=n._propertyData[t.name];return go(n,t,i)}function p(i,u,f){var c=i,l=w(i),h={};return ci(null,null,i,l,n),u&&u.forEach(function(n){var u=n.name;typeof n.kind!="string"&&(n.kind="local");switch(n.kind){case"local":n.type||(n.type=String),h[u]=ir(n,n.type,t.LocalProperty),n.getValue=o,n.setValue=s;break;case"reference":n.type||(n.type=r.Entity),h[u]=ir(n,n.type,t.ReferenceProperty),n.async=!0,n.getValue=e;break;case"collection":n.type=gc(i,n),n.elementType||(n.elementType=r.Entity),h[u]=ir(n,n.type,t.CollectionProperty),n.async=!0,n.getValue=e,n.rawGet=v}n.get=function(){return n.getValue(this.details)},n.setValue&&(n.set=function(t){n.setValue(this.details,t)})}),f&&f.forEach(function(n){n.value?h[n.name]=n:(h[n.name]=function(){var t=c[n.name+"_execute"],i;return oi(t)&&(i=t.call(null,this)),i},h[n.name].canExecute=function(){var t=!0,i=c[n.name+"_canExecute"];return oi(i)&&(t=!!i.call(null,this)),t})}),d(c,h),c}function w(){function i(n){t.call(this,n)}return i}var n=r.Screen,t=n.Details;tl=function(n,t,r){var u;return!i.isFunction(n)||!!r&&!i.isArray(r)?u:(u=b.create(n.prototype),n.call(u,r,t),u)},kc=function(n,t,i,e){var nt=n,tt=nt.constructor,o=n.details,h,l,a,w,b,c,k,v,p=!1,d=!1,g=!1,s;o.dataWorkspace=t,u(o,"_modelId",i),s=o.getModel(),s&&(n.details.displayName=io(s)),e&&s.properties&&(l=y(s.properties).where(function(n){return!!ut(n,":@IsParameter")}).array,e.length>l.length&&eu(f("screen_too_many_parameter_values")),e.forEach(function(i,f){h=kt(l[f].name),a=o.properties[h],d=a instanceof r.Screen.Details.LocalProperty,g=a instanceof r.Screen.Details.ReferenceProperty,i instanceof r.Entity?(w=i,b=w.details,c=b.entitySet,!c||!c.dataService||(k=c.dataService.details,!t||k.dataWorkspace!==t||(p=!0))):p=!0,p&&(d?u(n,"__"+h,i):g&&(v=o._propertyData[h],v._value=i,v._isLoaded=!0))}))},dc=function(n,t){n.screen=t,u(n,"_model",null),n.serverErrors=[],u(n,"_propertyData",{}),i.each(n.properties.all(),function(){n._propertyData[this.name]={}})},d(n,{showTab:function(n,t){var i=t?t.beforeShown:null;return r.shell.showTab(n,null,i)},showPopup:function(n){return r.shell.showPopup(n)},closePopup:function(){return r.shell.closePopup()},findContentItem:function(n){return this.details.rootContentItem.findItem(n)}}),u(n.prototype.showTab,"canExecute",function(n,t){return!!t&&oi(t.canExecute)?t.canExecute.apply(this,arguments):!0}),u(n.prototype.showPopup,"canExecute",function(n,t){return!!t&&oi(t.canExecute)?t.canExecute.apply(this,arguments):!0}),d(t,{displayName:h(),serverErrors:h(),saveChangesTo:l(function(){var n=this,t;return n._saveChangesToValue||(t=vu(n.getModel(),":@SaveChangesTo"),u(n,"_saveChangesToValue",[]),t&&i.each(t,function(){var t;!this.property||!(t=this.property.name)||n._saveChangesToValue.push(n.dataWorkspace[kt(t)])})),n._saveChangesToValue}),startPage:l(function(){var n;return this._startPageValue||(n=ut(this.getModel(),":@StartPage"),n?u(this,"_startPageValue",this.screen.findContentItem(n.value)):u(this,"_startPageValue",this.pages[0])),this._startPageValue}),validate:function(){var n=[],t,u;return!!this.saveChangesTo&&this.saveChangesTo.length>0&&(t=this.saveChangesTo[0],!t||(u=t.details.getChanges(),i.each(u,function(){i.each(this.details.properties.all(),function(){this instanceof r.Entity.Details.StorageProperty&&(n=n.concat(lo(this,this.value,!0)))})}))),n},rootContentItem:l(function(){if(!this._rootContentItem){var n=this.getModel();u(this,"_rootContentItem",r.services.contentItemService.createContentItemTree(this.screen,n.rootContentItem,null))}return this._rootContentItem}),pages:l(function(){var r=this.rootContentItem,t,i=[],n;if(!!r&&!!(t=r.children))for(n=0;n<t.length;n++)i=i.concat(t[n].children.slice(0));return i}),_findModel:function(){return r.services.modelService.tryLookupById(this._modelId)},_onDispose:function(){this._rootContentItem&&(k(this._rootContentItem),this._rootContentItem=null),this._startPageValue&&(this._startPageValue=null),this._propertyData=null}}),a("_defineScreen",p),a("Screen",n)}(),function(){e(r,"ShellCommandViewModel",function(n,t,i){this.command=n,this.displayName=t,this.name=i},null,{}),fr=function(n,t,i,u,f){var e=new r.BoundCommand(n,t,i),o=new r.ShellCommandViewModel(e,u,f);return bt(o,e),o}}(),function(){var n=ot("ScreenType","Screen");e(r,"NavigationUnit",function(n){this.shell=n,this._pageUiControls=[]},null,{boundaryOption:nt.none,popup:!1,nestedChangeSet:null,dialogTitle:h(),pageName:h(),isBrowseMode:function(){var t=this;return!t.isPopupPage&&t.screen.details.rootContentItem.properties[n]==="Browse"},hasChanges:l(function(){var n=this.boundaryOption;return n===nt.save?this.screen.details.dataWorkspace.details.hasChanges:n===nt.nested?!!this.nestedChangeSet&&this.nestedChangeSet.hasNestedChanges:!1}),registerPageUiControl:function(n){this._pageUiControls.push(n)},cleanPageUiControls:function(){this._pageUiControls.forEach(k),this._pageUiControls=[]},_onDispose:function(){var n=this;n.cleanPageUiControls(),n.contentItemTree=null,n.screen=null,n.task=null}}),e(r,"TaskViewModel",function(n,t,i){this.shell=n,this.screen=t,this.taskBoundaryOption=i},null,{screenTitle:h(),_onDispose:function(){var n=this,t=n.tabCommands,i,r;t&&(t.forEach(k),n.tabCommands=null),n.screen=null}})}();var ht,va="activeNavigationUnitChanged",il,rl="shellCommandStart",ul="shellCommandComplete";(function(){function bi(n,t){var i=this;return(i.saveCommand=fr("commitChanges",this,null,f("shell_saveChanges_btn"),"save"),i.discardCommand=fr("cancelChanges",this,null,f("shell_discardChanges_btn"),"discard"),i.okCommand=fr("commitChanges",this,null,f("shell_acceptNested_btn"),"ok"),i.cancelCommand=fr("cancelChanges",this,null,f("shell_cancelNested_btn"),"cancel"),i.backCommand=fr("navigateBack",this,null,f("shell_back_btn"),"back"),i.closeCommand=fr("navigateBack",this,null,f("shell_close_btn"),"close"),i.logoutCommand=fr("logout",this,null,f("shell_logout_btn"),"logout"),n=n||vr(),t&&(i._homeScreen=r.services.modelService.tryLookupById(t)),i._homeScreen||(i._homeScreen=n?n.homeScreen:null),!i._homeScreen)?c.Promise.wrapError(f("shellViewModel_noHomeScreen")):(i.logoPath=uu+n.logo,i.beforeFirstPageNavigationUnit=new r.NavigationUnit(i),i.beforeFirstPageNavigationUnit.boundaryOption=nt.none,i.beforeFirstPageNavigationUnit.index=-1,i._startNavigationOperation(null,function(n){var t=d(i,{screenDefinition:i._homeScreen,boundaryOption:nt.save});v(n,ot(i,t,!1))}))}function ki(){var n=this;return n._currentNavigationOperation?n._currentNavigationOperation.promise():et(function(t){ni(t.code(function(){n._currentNavigationOperation?v(t,n._currentNavigationOperation.promise()):t.complete()}))})}function di(n,t,i,u,f,e){var a=r.services.modelService,o,s,h=this.activeNavigationUnit,c,l;return typeof n=="string"?o=n:s=n,c=h.isBrowseMode()&&h.boundaryUnit.boundaryOption===nt.save?nt.save:nt.nested,u=!!u,l={screenId:o,screenDefinition:s,pageName:i,screenArguments:t,boundaryOption:c,popup:u,beforeShown:f,afterClosed:e},fi(this,l)}function gi(n){o(s.getPopupContentStart);var r=ko,i=this.activeNavigationUnit.screen,t=ut(i,n,!0);return ui(t,i),t._activate(),o(s.getPopupContentEnd),this.shellView.showPopup(t,function(){t._deactivate()},r)}function tr(){this.shellView.closePopup()}function ir(n,t,i){var r=this,u;if(n===r.activeNavigationUnit.pageName)return it();var f=ut(r.activeNavigationUnit.screen,n,!1),e=f.pageKind,o=e===vi.popup?nt.nested:nt.none;return t=typeof t=="string"?t:o,u={screen:r.activeNavigationUnit.screen,pageName:n,boundaryOption:t,popup:!1,beforeShown:i,isShowTab:!0},fi(r,u)}function rr(n){oi(this,this.activeNavigationUnit,n)}function ur(){var n=this,t=li.none;return n.canApplyNestedChanges?n.applyNestedChanges(t):n.saveChanges(t)}function er(){var n=this,t=li.beforeSaveBoundary;return n.canApplyNestedChanges?n.applyNestedChanges(t):n.saveChanges(t)}function sr(){var n=this;return n.canCancelNestedChanges?n.cancelNestedChanges():n.discardChanges(li.beforeSaveBoundary)}function at(n){var t=this;return t.canSaveChanges||b(),n=ai(t,n),t._startNavigationOperation("saveChanges",function(i){var r=1;ti(function(){ei(t,i,function(){var r=ft(t),u=yi(t,n);v(i,w(t,r,!0,u))})},r)})}function vt(n){var t=this;return this.canDiscardChanges||b(),n=ai(t,n),t._startNavigationOperation(null,function(i){ti(i.code(function(){var f=t.activeNavigationUnit,r=ft(t),u=yi(t,n);v(i,w(t,r,!1,u))}),1)})}function bt(n){this.canApplyNestedChanges||b();var t=this;return t._startNavigationOperation(null,function(i){t.validateActivePage(i.code(function(u){if(u)i.error(u);else{var e=ci(t,n),f=ft(t);n===r.NavigateBackOption.none&&(f.onlyApplyNestedChanges=!0),v(i,w(t,f,!0,e))}}))})}function kt(){this.canCancelNestedChanges||b();var n=this;return n._startNavigationOperation(null,function(t){var i=ci(n),r=g(n,n.activeNavigationUnit,i,!1);v(t,w(n,r,!1,i))})}function dt(){return this.activeNavigationUnit.index>0?this.navigateBack(this.activeNavigationUnit.index):it()}function hr(n){var t=this,r,i,u;return n=n||1,r=t.activeNavigationUnit.index,i=r-n,(n<=0||i<0)&&hf(null,n,"distance"),u=t.navigationStack[i],t._startNavigationOperation(null,function(n){v(n,t._requestNavigateBack(u))})}function cr(n){var t=this;if(n!==this.activeNavigationUnit)return et(function(i){var r=g(t,t.activeNavigationUnit,n,!1);hi(t,r,n).then(function(){ni(function(){i.complete()})},function(n){i.error(n||f("command_exec_err"))})})}function lr(n){var t=this,i;return n&&n!==this.activeNavigationUnit?(i=g(t,t.activeNavigationUnit,n,!0),w(t,i,!1,n)):new c.Promise(function(n){n()})}function gt(){this.shellView.logout()}function ar(){for(var n in this.navigationStack)if(this.navigationStack[n].hasChanges)return!0;return!1}function b(){or("CannotExecuteError",f("command_cannot"))}function t(n,t){n&&n(t||null)}function v(n,t){t.then(function(t){n.complete(t)},function(t){n.error(t)})}function yr(n,t){o(s.navigationStart);var i=this;return i._currentNavigationOperation&&or("AlreadyNavigatingError",f("shell_already_nav")),et(function(r){i.shellView.commitActiveElement(),n&&lt(rl,{name:n}),i._currentNavigationOperation=r,t(r),t=null})._thenEx(function(t){if(i._currentNavigationOperation=null,n&&lt(ul,{name:n,error:t}),t)throw t;})}function it(n){return et(function(t){ni(function(){t.complete(n)})})}function rt(n,t){return n.navigationStack[t]}function ii(n,t){return t.index>0?rt(n,t.index-1):null}function pr(n){for(var r=[],i,t=0;t in this.navigationStack;t++)i=this.navigationStack[t],(!n||n(i))&&r.push(i);return r}function ri(n,t){return et(function(i){function r(n){if(n.length===0)i.complete();else{var u=n[0],f=null,e=n.slice(1);try{t(u,i.code(function(n){f=n,f?i.error({error:f,errorElement:u}):r(e)}))}catch(o){i.error({error:o,errorElement:u})}}}r(n)})}function wr(n,t){if(!!t.screenId&&!t.screenDefinition&&(t.screenDefinition=r.services.modelService.tryLookupById(t.screenId),!t.screenDefinition))throw f("shell_invalid_1args",t.screenId);}function d(t,u){var e=i.extend({},d.defaults,u),p=!!e.popup,tt=!!e.isShowTab,l,h,it,rt,a=e.boundaryOption,b,c,v,f,k,w,g;return o(s.loadScreenStart),e.screen?h=e.screen:(b=t.activeNavigationUnit?t.activeNavigationUnit.screen.details.dataWorkspace:null,l=n.msls.application[e.screenDefinition.name],h=tl(l,b,e.screenArguments)),c=ut(h,e.pageName,!1),c.isVisible=!0,v=y(no(t.navigationStack).map(function(n){return n.task})).first(function(n){return n.screen===h}),v||(v=yu(t,h,a)),tt?(f=t.activeNavigationUnit,f.contentItemTree&&f.contentItemTree._deactivate(),c._activate(),f.contentItemTree=c,f.pageName=c.name):(f=new r.NavigationUnit(t),k=t.activeNavigationUnit?t.activeNavigationUnit.index:-1,w=k+1,f.index=w,f.boundaryOption=a,f.popup=p,f.popupDepth=(t.activeNavigationUnit?t.activeNavigationUnit.popupDepth:0)+(p?1:0),f.screen=h,f.contentItemTree=c,f.pageName=c.name,f.task=v,a===nt.none?t.activeNavigationUnit&&(f.boundaryUnit=t.activeNavigationUnit.boundaryUnit):f.boundaryUnit=f,p&&(g=new r.data.DataBinding("screenTitle",f.task,"dialogTitle",f,yt.oneWayFromSource),g.bind()),t.navigationStack[w]=f,a===nt.nested&&(f.nestedChangeSet=ho(h.details.dataWorkspace)),f.afterClosed=e.afterClosed),e.beforeShown&&e.beforeShown.call(h,h),!l||!l.created||l.created.call(null,h),ui(c,h),o(s.loadScreenEnd),f}function ui(n,t){n.data!==t&&(n.data=t,n.screen=t)}function fi(n,t){var s=n.activeNavigationUnit,h,i,o=!t.isShowTab,f,r,e,u;if(wr(n,t),o){if(f=t.screen?t.screen.details.getModel():t.screenDefinition,r=f.rootContentItem.propertySources,r)for(i=0;i<r.length;i++)if(r[i].property.name==="ShowAsDialog"&&(u=r[i].value,typeof u=="boolean"&&u)){e=!0;break}e&&(t.popup=!0),t.isShowTab||!n.activeNavigationUnit||!n.activeNavigationUnit.popupDepth||(t.popup=!0),n.activeNavigationUnit||(t.popup=!1),nr.enableModalScrollRegions||(t.popup=!1)}return n._startNavigationOperation(null,function(i){var r=vu(n,n.activeNavigationUnit,t.boundaryOption);hi(n,r,null)._thenEx(function(r){if(r)i.error(r);else{var f=d(n,t);v(i,ot(n,f,!1))}}).then(null,function(n){i.error(n)})})}function ut(n,t,i){var r,u;if(t){if(r=n.findContentItem(t),u=!1,r)switch(r.pageKind){case vi.tab:u=!i;break;case vi.popup:u=i}u||or(i?"PopupNotFoundError":"TabNotFoundError",f(i?"shell_popupnotfound_2args":"shell_tabnotfound_2args",t,n.details.getModel().name))}else r=n.details.startPage;return r}function br(n,i,r,u,f){if(!r.isBackward||!u){t(f);return}var o=i.screen,h="constructor",l=o[h],s=l.beforeApplyChanges,e;if(!s){t(f);return}try{e=s.call(null,o)}catch(a){t(f,a)}e===!1?t(f,new c.ErrorFromName(tt)):c.Promise.is(e)?e._thenEx(function(n,i){n?t(f,n):i===!1?t(f,new c.ErrorFromName(tt)):t(f)}):t(f)}function kr(n,i,r,u,f){var e,o,s;r.isBackward&&i.boundaryOption===nt.nested?(e=i.nestedChangeSet,e&&(u?r.onlyApplyNestedChanges?e.applyNestedChanges():e.commitNestedChanges():e.cancelNestedChanges(),r.onlyApplyNestedChanges||(i.nestedChangeSet=null)),i.contentItemTree._alwaysShowValidationResults=!1,u||i.contentItemTree._refreshStringValue(),t(f)):(o=r.isForward&&r.crossesSaveBoundary||r.isBackward&&i.boundaryOption===nt.save,o?(s=i.screen.details.dataWorkspace.details,u?dr(n,i,function(n){n||(i.contentItemTree._alwaysShowValidationResults=!1),t(f,n)}):(gr(n,i),i.contentItemTree._alwaysShowValidationResults=!1,i.contentItemTree._refreshStringValue(),t(f))):(u||i.contentItemTree._refreshStringValue(),t(f)))}function w(n,t,r,u){function e(n,t){if(n)try{n.call(t,t,r?df.commit:df.cancel)}catch(i){}}return et(function(o){var s=t.navigationUnitsCrossedOver.reverse(),h,c;ri(s,function(i,u){br(n,i,t,r,function(n){u(n)})})._thenEx(function(i){var u=i&&i.error;return u?(u.name===tt&&(u={userCanceled:!0,noErrorDialog:!0}),ct(o,u),!0):ri(s,function(i,u){kr(n,i,t,r,function(n){t.isBackward&&(i!==s[s.length-1]?e(i.afterClosed,i.screen):(h=i.afterClosed,c=i.screen)),u(n)})})})._thenEx(function(r,s){if(!s){var l=null;r&&r.error&&(u&&(u=r.errorElement),l=r.error||f("shell_unknown_save")),t.isForward&&i.each(t.navigationUnitsCrossedOver,function(n,t){t.boundaryOption!==nt.nested||t.nestedChangeSet||(t.nestedChangeSet=ho(t.screen.details.dataWorkspace))}),!u||u===n.activeNavigationUnit?ct(o,l):ot(n,u,t.isBrowserMode)._thenEx(function(n){n&&!l&&(l=n),ct(o,l),h&&ni(function(){et(function(n){e(h,c),n.complete()},!0)})})}})})}function dr(n,r,u){var s=r.screen.details,a=s.dataWorkspace.details,e,h,c,l,o,v;if(!a.hasChanges){t(u);return}if(e=il(),!e){for(h=a.properties.all(),o=0,v=h.length;o<v;o++)if(c=h[o],c.value.details.hasChanges){if(l){t(u,{title:f("screen_save_failed"),message:f("screen_save_multiple_data_sources")});return}l=c.value}e=l.saveChanges()}e._thenEx(function(n){var c=!n,e=[],o="",h,l;c||(i.each(n,function(n,t){n>0&&(o+="\r\n"),o+=t.message,h=t.validationResult,h&&e.push(h)}),l={title:f("screen_save_failed"),message:o}),s.serverErrors.length===0&&e.length===0||(s.serverErrors=e),c&&(r.contentItemTree._alwaysShowValidationResults=!1),t(u,l)}).then(null,function(n){t(u,n)})}function gr(n,t){for(var e=t.screen.details,o=e.dataWorkspace.details,u=o.properties.all(),r,i=0,f=u.length;i<f;i++)r=u[i].value.details,r.hasChanges&&r.discardChanges()}function ei(n,t,i){var r=n.activeNavigationUnit;oi(n,r,t.code(function(u){u?t.error(u):nu(n,r.screen,t.code(function(n){n?t.error(n):i()}))}))}function ft(n){var i=n.activeNavigationUnit.boundaryUnit,t=null;return t=i.index===0?n.beforeFirstPageNavigationUnit:ii(n,i),g(n,n.activeNavigationUnit,t,!1)}function oi(n,i,r){var u=i.contentItemTree,e=f("shell_validation_errors");u.validate(!0),u.hasValidationErrors(!0)?(u._alwaysShowValidationResults=!0,t(r,e)):t(r)}function nu(n,r,u){var e=r.details.validate(),s=r.details.rootContentItem,f,o;e.length>0?(f=[],i.each(e,function(){f.push(this.property.name+": "+this.message)}),o=f.join("\r\n"),t(u,o)):t(u)}function si(n){return y(n).any(function(){return this.details.hasEdits})}function tu(n){var i,t;switch(n.boundaryOption){case nt.save:return i=n.screen.details.dataWorkspace,i.details.hasChanges&&si(i.details.getChanges());case nt.nested:return t=n.nestedChangeSet,!!t&&t.hasNestedChanges&&si(t.getNestedChanges());default:return!1}}function iu(n,t){return t&&n.screen.details.dataWorkspace.details.hasChanges?!0:!1}function ru(n,t){if(t.isForward)return iu(t.sourceNavigationUnit,t.crossesSaveBoundary);for(var i=0;i<t.navigationUnitsCrossedOver.length;i++)if(tu(t.navigationUnitsCrossedOver[i]))return!0;return!1}function hi(n,t,i){var r,u,e;return ru(n,t)?(r=t.crossesSaveBoundary?{message:f("shell_save_message"),title:f("shell_save_title"),buttons:[{text:f("shell_save_btn"),icon:"check",result:p.yes},{text:f("shell_discard_btn"),icon:"delete",result:p.no},{text:f("shell_stay_btn"),icon:"back",result:p.cancel}]}:{message:f("shell_apply_message"),title:f("shell_apply_title"),buttons:[{text:f("shell_apply"),icon:"check",result:p.yes},{text:f("shell_discard_btn"),icon:"delete",result:p.no},{text:f("shell_stay_btn"),icon:"back",result:p.cancel}]},r.defaultResult=p.cancel,e=!1,et(function(f){pt.show(r).then(function(r){function e(){v(f,w(n,t,u,i))}r===p.yes||r===p.no?(u=r===p.yes?!0:!1,u?ei(n,f,e):e()):r===p.cancel?f.error({message:"User canceled the navigation by clicking Cancel button",userCanceled:!0,noErrorDialog:!0}):r===p.none?f.error({message:"User canceled the navigation without clicking any buttons",userCanceled:!0,noErrorDialog:!0}):f.error({message:"Cancel the navigation due to unexpected result.",userCanceled:!0,noErrorDialog:!0})})})):t.isBackward?w(n,t,!1,i):it()}function ot(n,t,i){return t===n.beforeFirstPageNavigationUnit&&(t=n.navigationStack[0]),et(function(r){function u(){n.activeNavigationUnit=t,i||pi(n),n.finishNavigation()._thenEx(function(t){t||lt(va,n)}),r.complete()}n.activeNavigationUnit!==t&&(o(s.pageActivationStart),n.activeNavigationUnit&&n.activeNavigationUnit.contentItemTree._deactivate(),t.contentItemTree._activate(),o(s.pageActivationEnd)),i?(n.shellView.awaitBrowserNavigation(t).then(function(){pi(n)}),u()):n.shellView.navigate(t).then(u,function(n){r.error(n||f("shell_nav_failed"))})})}function ci(n,t){var i=n.activeNavigationUnit.boundaryUnit,r;return t===li.none?null:(!i||i.boundaryOption!==nt.nested||(r=ii(n,i)),r)}function ai(n,t){switch(t){case li.none:case li.saveBoundary:case li.beforeSaveBoundary:return t}return wi}function yi(n,t){var i=n.activeNavigationUnit.boundaryUnit,r;return!i||i.boundaryOption!==nt.save?null:(t===li.none?r=null:t===li.saveBoundary?r=i:(r=i,i.index>0&&(r=rt(n,i.index-1))),r)}function fu(){var n=this.activeNavigationUnit;if(n){var t=n.screen.details,i=t.dataWorkspace.details;return!i.hasNestedChangeSets}return!1}function eu(){return this.canSaveChanges}function ou(){var t=this.activeNavigationUnit,n;return t?(n=t.boundaryUnit,n.boundaryOption===nt.nested&&!!n.nestedChangeSet):!1}function hu(){return this.canApplyNestedChanges}function cu(n){var t;return!!(t=n.activeNavigationUnit)&&t.task.home}function lu(){return!cu(this)}function pi(n){var u=n.activeNavigationUnit.index,t=[],r;o(s.cleanNavigationStackStart),i.each(n.navigationStack,function(n,i){i.index>u&&t.push(i)}),r=t.sort(function(n,t){return t.index-n.index}),i.each(r,function(t,i){au(n,i)}),o(s.cleanNavigationStackEnd)}function au(n,t){delete n.navigationStack[t.index];var i=n.shellView.onNavigationUnitClosed;i&&i.call(n.shellView,t)}function st(){this.navigationUnitsCrossedOver=[]}function g(n,t,i,r){var s=i===n.beforeFirstPageNavigationUnit,u=new st,f,e,o;for(u.sourceNavigationUnit=t,u.targetNavigationUnit=i,u.isBackward=!0,u.isBrowserMode=r,f=t;f;){if(f===i)break;u.navigationUnitsCrossedOver.push(f);switch(f.boundaryOption){case nt.nested:u.crossesNestedBoundary=!0;break;case nt.save:u.crossesSaveBoundary=!0}e=f.index-1,o=rt(n,e),f=o}return u.navigationUnitsCrossedOver=u.navigationUnitsCrossedOver.reverse(),u}function vu(n,t,i){var r=new st,f,u;if(r.sourceNavigationUnit=t,r.isForward=!0,r.crossesSaveBoundary=i===nt.save,r.crossesNestedBoundary=i===nt.nested,r.crossesSaveBoundary)for(f in n.navigationStack)u=n.navigationStack[f],u.screen===t.screen&&r.navigationUnitsCrossedOver.push(u);else r.navigationUnitsCrossedOver.push(t);return r}function yu(n,t,i){var u=new r.TaskViewModel(n,t,i),o,f,h,c;for(u.home=t.details.getModel().id===n._homeScreen.id,u.tabCommands=[],o=t.details.pages.filter(function(n){return n.pageKind===vi.tab}),f=0;f<o.length;f++){var e=o[f],l=e.name,s=fr("showTab",t,su(null,[{value:e.name}]),e.displayName,l),a=new r.data.DataBinding("displayName",e,"displayName",s);a.bind(),u.tabCommands.push(s)}return h=t,c=new r.data.DataBinding("displayName",h.details,"screenTitle",u,yt.oneWayFromSource),c.bind(),u}function ct(n,t){t?n.error(t):n.complete()}var wi=li.beforeSaveBoundary,pu="AlreadyNavigatingError",tt="Canceled";at.canExecute=function(){return this.canSaveChanges},vt.canExecute=function(){return this.canDiscardChanges},bt.canExecute=function(){return this.canApplyNestedChanges},kt.canExecute=function(){return this.canCancelNestedChanges},dt.canExecute=function(){return this.canNavigateHome},gt.canExecute=function(){var n=this;return n._isFormsAuthEnabled},d.defaults={screenId:null,screenDefinition:null,screen:null,pageName:null,prepend:!1,screenArguments:[]},st.prototype={isForward:!1,isBackward:!1,isBrowserMode:!1,sourceNavigationUnit:null,targetNavigationUnit:null,navigationUnitsCrossedOver:null,crossesSaveBoundary:!1,crossesNestedBoundary:!1,onlyApplyNestedChanges:!1},e(r,"ShellViewModel",function(){var n=this,t=r.securityDataService;n.navigationStack={},t.getAuthenticationType().then(function(i){n._isFormsAuthEnabled=i===t.AuthenticationType.forms})},null,{activeNavigationUnit:h(),logoPath:h(),canSaveChanges:wt(fu),canDiscardChanges:wt(eu),canApplyNestedChanges:wt(ou),canCancelNestedChanges:wt(hu),canNavigateHome:wt(lu),applyChanges:ur,commitChanges:er,cancelChanges:sr,saveChanges:at,discardChanges:vt,applyNestedChanges:bt,cancelNestedChanges:kt,showScreen:di,showTab:ir,showPopup:gi,closePopup:tr,navigateBack:hr,navigateHome:dt,logout:gt,_requestNavigateBack:cr,synchronizeAfterBrowserNavigation:lr,validateActivePage:rr,initialize:bi,findNavigationUnits:pr,navigationInProgress:l(function(){return!!this._currentNavigationOperation}),finishNavigation:ki,_startNavigationOperation:yr,anyNavigationUnitHasChanges:ar,_isFormsAuthEnabled:h(),_onDispose:function(){var n=this;k(n.saveCommand),k(n.discardCommand),k(n.okCommand),k(n.cancelCommand),k(n.backCommand),k(n.closeCommand),k(n.logoutCommand)}}),u(r,"shell",new r.ShellViewModel),ht=r.shell,a("showProgress",function(n){n&&ht.shellView.showProgress(n)})})(),function(){function t(n,t){var i=n.getModel();return i?yr(i.properties,t.name):null}function o(n,t){var i,r=[],u;return!t||!(i=t.source)||(u=po(i),r=u.argumentBindings),su(n.screen,r)}function s(n){var t=n._invalidatedCallback;t&&t()}function i(n,t){var i=n._entitySet,r;return i||(r=n._baseQuery,r?i=r._entitySet:(t||(t=n._entry.elementType),i=wu(n._screenDetails.dataWorkspace,t)),n._entitySet=i),i}function h(n){var t=n._entry.elementType,r=i(n,t);return new t(r)}function c(n){var t=n._entry.elementType,r=i(n,t);return r.canInsert}function v(n,t){var i=n._collectionChangeCallback,r;i&&t instanceof n._entry.elementType&&(r=t.details.entityState,r===f.added?i(st.add,t):r===f.discarded&&i(st.remove,t))}function y(n,t){var r=n._collectionChangeCallback,i=t.action;!r||i!==st.add&&i!==st.remove||r(i,t.items[0])}function a(n){var t=n._collectionProperty,i=n._collectionChangeHandler,u="collectionchange",r;i&&k(i),t=n._collectionProperty=n._entry.getNavigationProperty.apply(n._screenDetails),t&&(r=lc(t),n._collectionChangeHandler=lu(r,u,n,function(t){y(n,t.detail)}))}var n,f=r.EntityState;fl=function(n,i){return o(n,t(n,i))},e(r,"ScreenCollectionPropertyLoader",function(n,i){var r=this,f=t(n,i),e=!!f.disablePaging;ku.call(r,f.pageSize),u(r,"_screenDetails",n),u(r,"_entry",i),u(r,"_arguments",o(n,f)),e&&u(r,"_disablePaging",!0),(e||eo(f.elementType))&&u(r,"_disableTotalCount",!0),r._arguments.addChangeListener(null,function(){s(r)})},ku,{deleteItem:function(n){n.deleteEntity()},_onDispose:function(){k(this._arguments)}}),n=r.ScreenCollectionPropertyLoader,e(r,"ScreenQueryPropertyLoader",function(t,i){var r=this;n.call(r,t,i),lu(r._screenDetails.dataWorkspace.details,"contentchange",r,function(n){v(r,n.detail)})},n,{_baseQuery:l(function(){return this._entry.createQuery.apply(this._screenDetails,this._arguments.getCurrentValues())}),_getAddedEntities:function(){return i(this)._addedEntities},addNewItem:function(){return h(this)}}),wf(r.ScreenQueryPropertyLoader),u(r.ScreenQueryPropertyLoader.prototype.addNewItem,"canExecute",function(){return c(this)}),e(r,"ScreenNavigationPropertyLoader",function(i,r){var u=this,e,o,h,c=[],f,l;n.call(u,i,r),!(e=t(u._screenDetails,u._entry))||!(o=e.query)||!(h=o.source)||(l=po(h),c.push({binding:l.lastObjectBindingPath})),f=su(i.screen,c),f.addChangeListener(null,function(){a(u),s(u)}),bt(u,f),a(u)},n,{_baseQuery:l(function(){var t=this,i=t._collectionProperty,n=i&&i.query,r=t._entry.appendQuery;return!n||!r||(n=r.apply(n,t._arguments.getCurrentValues())),n}),_getAddedEntities:function(){var n=[],t=this._collectionProperty;return t&&(n=ac(t)),n},addNewItem:function(){var r=this,n=r._collectionProperty,u=h(r),t,i;return!n||(t=n._entry.data,!t||(i=t.toPropertyName,!i||(u[i]=n.owner))),u}}),wf(r.ScreenNavigationPropertyLoader),u(r.ScreenNavigationPropertyLoader.prototype.addNewItem,"canExecute",function(){return c(this)})}(),function(){e(r,"ScreenScalarPropertyLoader",function(n,t,i){var r=this;u(r,"_screenDetails",n),u(r,"_entry",t),u(r,"_arguments",fl(n,t)),r._arguments.addChangeListener(null,i)},null,{load:function(){var n=this,t=n._activePromise,i,r;return t||(t=n._activePromise=et(function(t){i=n._entry.createQuery.apply(n._screenDetails,n._arguments.getCurrentValues()),i.execute()._thenEx(function(i,u){r=!0,n._activePromise=null,i?t.error(i):t.complete(u.results[0])}),t.interleave()}),r&&(n._activePromise=null)),t}})}(),function(){function u(){return this._entry.get.call(this._details.owner)}function y(n){this._entry.set.call(this._details.owner,n)}function f(n,t,i){var r=t._loadPromise;return r||(t._isLoaded&&(t._isLoaded=!1,n.dispatchChange("isLoaded")),t._loading=!0,n.loadError&&(n.loadError=null),r=t._loadPromise=et(i,!!vf),t._loading||(t._loadPromise=null)),r}function o(n,t,i){t._loading=!1,t._isLoaded=!0,n.dispatchChange("isLoaded"),i&&(n.loadError=i),t._loadPromise=null}function p(n,t){return t.getNavigationProperty?new r.ScreenNavigationPropertyLoader(n,t):new r.ScreenQueryPropertyLoader(n,t)}var s=r.Screen,n=s.Details,t,c,i,a,v,w;e(n,"Property",function(n,t){pu.call(this,n,t),this.screen=this.owner},pu),t=n.Property,e(n,"LocalProperty",function(n,i){t.call(this,n,i)},t,{value:h(null,u,y)}),c=n.LocalProperty,e(n,"RemoteProperty",function(n,i){t.call(this,n,i)},t,{isLoaded:h(!1,function(){var n=this._details,t=n._propertyData[this.name];return!!t._isLoaded}),loadError:h(null),value:h(null,u)}),i=n.RemoteProperty,e(n,"ReferenceProperty",function(n,t){i.call(this,n,t)},i,{load:function(){var n=this,i=n._details,u=n.name,t=i._propertyData[u],e;return e=f(n,t,function(f){var e=t._loader;e||(e=t._loader=new r.ScreenScalarPropertyLoader(i,n._entry,function(){i.properties[u].load()})),e.load()._thenEx(function(i,r){o(n,t,i),t._value!==r&&(t._value=r,n.dispatchChange("value"),n.screen.dispatchChange(u)),i?f.error(i):f.complete(r)}),f.interleave()})}}),a=n.ReferenceProperty,go=function(n,t,i){var r=i._value,u;return r||(u=p(n,t),r=i._value=new t.type(n,u),bt(r,u),bt(n,r)),r},e(n,"CollectionProperty",function(n,t){i.call(this,n,t)},i,{isReadOnly:l(function(){return tc(this._details.dataWorkspace,this._entry.elementType)}),load:function(){var n=this,i=n._details,t=i._propertyData[n.name],r;return r=f(n,t,function(r){function f(i){o(n,t,i),i?r.error(i):r.complete(u)}var u=go(i,n._entry,t);u.canLoadMore?(u.load()._thenEx(f),r.interleave()):f(null)})}}),v=n.CollectionProperty}(),function(){function it(n){n._loadOperation?n._loadOperation.code(function(){g(n)})():n.load()}function rt(t,r,u){var f=t._data,e=-1;r===st.add?(f.splice(0,0,u),n(t,"change","count"),n(t,"collectionchange",new wr(r,[u],-1,0))):(i.each(f,function(n,t){return t===u?(f.splice(n,1),e=n,!1):!0}),e>=0&&(t.selectedItem===u&&(t.selectedItem=null),n(t,"change","count"),n(t,"collectionchange",new wr(st.remove,[u],e,-1))))}function p(n){n._deferEvents=!0}function w(n){var t=n._deferredEvents;n._deferEvents=!1,i.each(t,function(){this.type==="change"?n.dispatchChange(this.e):n.dispatchEvent(this.type,this.e)}),t.length=0}function n(n,t,i){n._deferEvents?n._deferredEvents.push({type:t,e:i}):t==="change"?n.dispatchChange(i):n.dispatchEvent(t,i)}function y(t,i,r,u){t[i]!==r&&(t[i]=r,n(t,"change",u))}function ut(){return this._selectedItem}function ft(n){y(this,"_selectedItem",n,"selectedItem")}function b(n,t){y(n,"_isLoaded",t,"isLoaded")}function c(n,t){y(n,"_loadError",t,"loadError")}function ot(t){function e(){u||(u=!0,n(i,"change","state"),n(i,"change","canLoadMore"),c(i,null))}var i=this,r=i._loadPromise,u,f;return r?r:(i._loadMorePromise=null,r=i._loadPromise=et(function(n){f=!0,i._loadOperation=n,r=i._loadPromise=n.promise(),e(),g(i)},t),f&&!i._loadOperation&&(i._loadPromise=null),e(),r)}function g(n){var i=n._loader,t=n._loadOperation,r;if(!i){t&&t.complete();return}i.reset(),r=n._activeLoaderPromise=i.loadNext(),r._thenEx(function(t,i){n._activeLoaderPromise===r&&ht(n,i,t)}),t&&t.interleave()}function ht(t,r,u){o(s.fillCollectionStart);var f=t._data,e=t._loadOperation;t._loadOperation=null,t._loadPromise=null;try{p(t),u?c(t,u):(c(t,null),f.length=0,i.each(r,function(){f.push(this)}),n(t,"change","state"),n(t,"change","count"),n(t,"collectionchange",new wr(st.refresh)),b(t,!0),n(t,"change","canLoadMore"),t.selectedItem=null),w(t)}finally{u?e.error(u):e.complete(t.count),o(s.fillCollectionEnd)}}function lt(t){function o(){if(!i.canLoadMore){var n;n=i._loadPromise?f("visualCollection_load_pending"):f("visualCollection_already_loaded"),eu(n)}}function s(){u||(u=!0,n(i,"change","state"))}var i=this,r=i._loadMorePromise,u,e;return r?r:(o(),r=i._loadMorePromise=et(function(n){var u=i._loader,t;if(!u){n.complete();return}o(),e=!0,i._loadMoreOperation=n,r=i._loadMorePromise=n.promise(),s(),t=i._activeLoaderPromise=u.loadNext(i._data),t._thenEx(function(n,r){i._activeLoaderPromise===t&&at(i,r,n)}),n.interleave()},t),e&&!i._loadMoreOperation&&(i._loadMorePromise=null),s(),r)}function at(t,r,u){o(s.fillCollectionStart);var f=t._data,e=f.length,h=t._loadMoreOperation;t._loadMoreOperation=null,t._loadMorePromise=null;try{p(t),u?c(t,u):(c(t,null),i.each(r,function(){f.push(this)}),n(t,"change","state"),r.length>1&&(n(t,"change","count"),n(t,"collectionchange",new wr(st.add,r,-1,e))),b(t,!0),t.canLoadMore||n(t,"change","canLoadMore")),w(t)}finally{u?h.error(u):h.complete({items:r,startIndex:e}),o(s.fillCollectionEnd)}}function nt(){var n=this._loader.addNewItem();return this.selectedItem=n,n}function tt(){var n=this.selectedItem;n?this._loader.deleteItem(n):eu(f("visualCollection_no_sel"))}var t=r.VisualCollection,v=r.EntityState,e;ct(t,{State:{idle:"idle",loading:"loading",loadingMore:"loadingMore"}}),e=t.State,nl=function(n,t,i){var r=n;r.screen=t?t.owner:null,u(r,"_loader",i),u(r,"_data",[]),u(r,"_deferredEvents",[]),i.subscribe(function(n,t){rt(r,n,t)},function(){it(r)})},nt.canExecute=function(){var n=this._loader,t=n.addNewItem;return!t.canExecute||t.canExecute.apply(n)},tt.canExecute=function(){var t=this.selectedItem,n,i;return!!t&&!!(n=t.details)&&!!(i=n.entitySet)&&n.entityState!==v.deleted&&n.entityState!==v.discarded&&(n.entityState===v.added||!!i.canDelete)},d(t,{_deferEvents:!1,_isLoaded:!1,_loadError:null,_selectedItem:null,canLoadMore:h(null,function(){return!this._loadPromise&&this._loader.canLoadNext}),data:l(function(){return this._data.slice(0)}),count:h(null,function(){return this._data.length}),isLoaded:h(null,function(){return this._isLoaded}),state:h(e.idle,function(){return this._loadPromise?e.loading:this._loadMorePromise?e.loadingMore:e.idle}),loadError:h(null,function(){return this._loadError}),selectedItem:h(null,ut,ft),load:ot,loadMore:lt,addNew:nt,deleteSelected:tt,_onDispose:function(){var n=this,t=n._loader;t&&(k(t),n._loader=null),n.screen=null,n._data=[]},collectionchange:tr()}),gc=function(){return t},a("VisualCollection",t)}();var yi="a",gu="ui-page-active",ya="msls-presenter-content",ey="msls-presenter",te="ui-btn-active",rs="msls-list-empty",pa="msls-list-loading",ui="msls-extra-option",el="msls-overlay",nu="msls-overlay-active",wa="msls-id-dialog-overlay",ba="msls-id-progress-overlay",ol="msls-progress-icon",oy="data-msls-weight",sy="msls-hstretch",hy="msls-hauto",ie="msls-vstretch",re="msls-vauto",nf="msls-vscroll",ka="msls-columns-layout",da="msls-rows-layout",ue="msls-layout-ignore",ga="msls-layout-ignore-children",cy="msls-viewer",fe="msls-attached-label",ly="msls-label-host",nv="msls-state-overlay",ee="ui-disabled",dt="msls-collapsed",sl="msls-executing",tv="msls-display-error",iv="msls-display-error-icon",hl="msls-display-error-text",rv="msls-loading",us="msls-read-only",uv="msls-validation-error",cl="msls-validation-error-text",fv="msls-screen-tab",fs="msls-screen-tab-active",ll="msls-content",ev="."+ll,al="msls-tab-content",oe="msls-tab-content-active",ov="msls-header",vl="msls-footer",sv="msls-footer-content",se="msls-footer-content-active",yl="msls-page-expired",pl="#msls-id-app-loading",hv="taskHeaderTemplate",cv="tabsBarTemplate",lv="dialogHeaderTemplate",av="screenFooterTemplate",vv="dialogFooterTemplate",yv="footerContentTemplate",wl="contentTemplate",bl="msls-background-page",kl="msls-control-header",dl="msls-dialog",ay="msls-id-animation-timekeeper",gl="msls-logo",vy="msls-logo-back-area",yy="msls-task",hu="msls-id-end-of-dialog",pv="msls-enable-modal-scroll-regions",wv="msls-show-background-screen",bv="msls-full-animation",kv="msls-quick-animation",tu="msls-dialog-transition",he="msls-nested-dialog-transition",dv="msls-opening-transition",es="msls-screen-transition",gv="msls-tab-transition",na="msls-in",os="msls-out",ta="msls-reverse",ce="msls-stage1",ia="msls-stage2",ra="msls-stage3",ny="msls-sharepoint-chrome",ty="msls-sharepoint-enabled",iy="msls-sharepoint-chrome-link",ss,tf;(function(){function e(){var n=navigator.userAgent,t=n.match(/Android/);return!!t}function h(){var n=navigator.userAgent.toLowerCase();return n.indexOf("iphone")!==-1||n.indexOf("windows phone")!==-1}function f(){return ht.navigateHome()}function v(n,t,i){return ht.showScreen(n,t,null,!1,i?i.beforeShown:null,i?i.afterClosed:null)}function y(){return ht.applyChanges()}function p(){return ht.commitChanges()}function w(){return ht.cancelChanges()}function k(){return ht.navigateBack()}function d(t){ws(),!n.performance||!n.performance.timing.domContentLoadedEventStart||o(s.applicationDomLoaded,new Date(n.performance.timing.domContentLoadedEventStart)),o(s.applicationRun);var u=i("body");return nr.enableModalScrollRegions&&u.addClass(pv),nr.showContentBehindDialog&&u.addClass(wv),nr.transitionAnimationLevel===tf.full?u.addClass(bv):u.addClass(kv),new c.Promise(function(n,u){function f(n){u("The application could not be loaded.  Please try refreshing the page.\r\n"+n)}i(pl+" img").on("error",function(){i(this).hide()});var e=gs();i(function(){e.then(function(){r.services.modelService.load().then(function(){ht.initialize(null,t).then(function(){n()},function(n){u(n)})},function(n){var t="Failed to load model: "+n;f(t)}).then(null,function(n){f(n)})},function(n){f(n)})})})}var t,u;ct(r,{TransitionAnimationLevel:{full:"Full",simple:"Simple"}}),tf=r.TransitionAnimationLevel,t=e(),u=h(),nr.enableModalScrollRegions=!t&&!u,nr.showContentBehindDialog=!t&&!u,nr.transitionAnimationLevel=t||!!navigator.userAgent.match(/Opera/)?tf.simple:tf.full,f.canExecute=function(){return ht.navigateHome.canExecute.call(ht)},fu("application",{activeDataWorkspace:l(function(){var n=ht.activeNavigationUnit;return n||(n=ht.navigationStack[0]),n.screen.details.dataWorkspace}),rootUri:rf,options:nr,navigateHome:f,showScreen:v,applyChanges:y,onsavechanges:l(function(){return this._listeners&&this._listeners.savechanges},function(n){var t=this;t._listeners&&(t._listeners.savechanges=null),c.Utilities.eventMixin.addEventListener.call(t,"savechanges",n)}),commitChanges:p,cancelChanges:w,navigateBack:k}),ss=r.application,il=function(){var t={promise:null};return c.Utilities.eventMixin.dispatchEvent.call(n.msls.application,"savechanges",t),t.promise},a("_defineShowScreen",function(n){return n.canExecute=function(){var t=arguments[n.length-1];return!!t&&!!t.canExecute?t.canExecute.apply(this,arguments):!0},n}),a("application",b.create(ss)),a("_run",d),a("TransitionAnimationLevel",tf)})(),gt={taskHeaderTemplate:'<div class="msls-header-area"><div class="titles-bar"><div class="msls-logo-back-area"> LOGO-BACK-PLACEHOLDER<\/div><div class="msls-buttons-row msls-screen-buttons"> BUTTONS-PLACEHOLDER LOGOUT-PLACEHOLDER<\/div><div class="msls-title-area"><h1 class="subControl ui-title msls-title" control="Text" data-ls-text="text:{data.task.screenTitle}"><\/h1><\/div><\/div> TAB-BUTTONS-PLACEHOLDER<\/div>',screenLogoTemplate:'<div class="msls-logo"><img src="Content/Images/user-logo.png" /><\/div>',screenBackTemplate:'<div class="subControl msls-back-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-back" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.backCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.backCommand.command}"><\/div>',screenSaveDiscardTemplate:'<div class="subControl msls-save-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-save" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.saveCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.saveCommand.command}"><\/div><div class="subControl msls-discard-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.discardCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.discardCommand.command}"><\/div>',screenOkTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div>',screenOkCancelTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div><div class="subControl msls-cancel-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.cancelCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.cancelCommand.command}"><\/div>',screenLogoutTemplate:'<div class="subControl msls-logout-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-logout" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.logoutCommand.displayName}" data-ls-isvisible="isVisible:{tap.canExecute}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.logoutCommand.command}"><\/div>',dialogHeaderTemplate:'<div class="msls-header-area"><div class="msls-buttons-row msls-dialog-buttons msls-hauto"> BUTTONS-PLACEHOLDER<\/div><h1 class="subControl ui-title msls-title" control="Text" data-ls-text="text:{data.dialogTitle}"><\/h1> TAB-BUTTONS-PLACEHOLDER<\/div>',dialogSaveDiscardTemplate:'<div class="subControl msls-save-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-save" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.saveCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.saveCommand.command}"><\/div><div class="subControl msls-discard-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-discard" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.discardCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.discardCommand.command}"><\/div>',dialogOkTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div>',dialogOkCancelTemplate:'<div class="subControl msls-ok-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-ok" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.okCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.okCommand.command}"><\/div><div class="subControl msls-cancel-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.cancelCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.cancelCommand.command}"><\/div>',dialogCloseTemplate:'<div class="subControl msls-close-button msls-large-icon" control="ShellButton" tabindex="0" data-icon="msls-cancel" data-iconpos="notext" data-role="button" data-ls-content="content:{data.shell.closeCommand.displayName}" data-ls-isenabled="isEnabled:{tap.canExecute}" data-ls-tap="tap:{data.shell.closeCommand.command}"><\/div>',tabsBarTemplate:'<div class="subControl msls-tabs-bar" control="ScreenTabs" data-ls-task="task:{data.task}" data-ls-activetab="activeTab:{data.pageName}" data-ls-hidetabtitles="hideTabTitles:{data.task.screen.properties.hideTabTitles}"><\/div>',screenFooterTemplate:'<div class="msls-footer" data-role="footer" data-position="fixed" data-track-persistent-toolbars="false" data-update-page-padding="false" data-tap-toggle-blacklist="a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-popup, li"><\/div>',dialogFooterTemplate:'<div class="msls-footer msls-vauto" data-role="footer"><\/div>',footerContentTemplate:'<div class="msls-vauto msls-footer-content msls-buttons-row"><\/div>',contentTemplate:'<div data-role="content" class="msls-content"><\/div>',popupTemplate:'<div data-role="popup" class="msls-popup"><div class="msls-popup-content"><\/div><div class="msls-clear"><\/div><\/div>',modalViewTemplate:'<div class="msls-modalview msls-collapsed"><\/div>'},function(){function t(t){var e=this,r=t.closest(".msls-vscroll");u(e,"_onScroll",function(){f(e)}),r=r.length?r:i(n),u(e,"_scrollElement",r);r.on("scroll",e._onScroll)}function f(n){n.dispatchEvent("scroll")}e("ui.controls","ScrollHelper",t,null,{viewHeight:l(function(){return this._scrollElement.height()}),viewTop:l(function(){return this._scrollElement.scrollTop()}),scroll:tr(),_onDispose:function(){var n=this;n._scrollElement.off("scroll",n._onScroll),n._onScroll=null,n._scrollElement=null}}),ry=r.ui.controls.ScrollHelper}(),function(){function t(n,t,i){this._element=n,this._trueClassName=t,this._falseClassName=i}var r=Array.prototype.slice,n=/\s+/;at=function(t,r,u,f){var s,h,l,y,c,e,p,a,o,v;for(r?(s=!u?null:u.split(n),h=!f?null:f.split(n)):(h=!u?null:u.split(n),s=!f?null:f.split(n)),l=0,y=t.length;l<y;l++)if(c=t[l],c.nodeType===1)if(e=c.className,e||!s||s.length!==1){if(a=!1,e=(" "+e+" ").replace(n," "),s)for(o=0,v=s.length;o<v;o++)s[o]&&e.indexOf(" "+s[o]+" ")<0&&(e+=s[o]+" ",a=!0);if(h){for(p=e.length,o=0,v=h.length;o<v;o++)h[o]&&(e=e.replace(" "+h[o]+" "," "));e.length<p&&(a=!0)}a&&(c.className=i.trim(e))}else c.className=s[0]},uy=function(n){n.addClass(r.call(arguments,1).join(" "))},le=function(n){n.removeClass(r.call(arguments,1).join(" "))},hs=function(n){var t=document.createElement("div");return t.innerHTML=n,t.firstChild},ae=function(n,t){n.empty(),t&&n[0].appendChild(document.createTextNode(t))},ve=function(n,t){var r=i("#"+t,n);(n.focus(),n[0]._keyDownEventHooked)||(n.keydown(function(t){t.keyCode===i.mobile.keyCode.TAB&&t.shiftKey&&t.target===n[0]&&(r.focus(),t.preventDefault())}),r.keydown(function(t){t.keyCode!==i.mobile.keyCode.TAB||t.shiftKey||(n.focus(),t.preventDefault())}),n[0]._keyDownEventHooked=!0)},e("ui.helpers","ObservableCssClass",t,null,{value:h(null,function(){function n(n,t){return n===null||n===t}var t=i(this._element),r=!!this._trueClassName&&t.hasClass(this._trueClassName),u=!!this._falseClassName&&t.hasClass(this._falseClassName);return n(r,!0)&&n(u,!1)?!0:n(r,!1)&&n(u,!0)?!1:null},function(n){var t=i(this._element);this._trueClassName&&at(t,n,this._trueClassName),this._falseClassName&&at(t,!n,this._falseClassName)})}),e("ui.helpers","ObservableVisibility",function(n){t.call(this,n,null,"msls-collapsed")},t,{})}(),di="LayoutUpdating",gi="LayoutUpdated",function(){function k(){var n=l,o=u,t=r,f=a,e;g(!0),o?(e=i(w),y(e,!1,f)):!t||y(t,!1,f),!n||y(n,!0,!0)}function d(){function n(){if(h){h=!1,t=ti(n,1);return}k()}if(t!==null){h=!0;return}c>0||(t=ti(n,1))}function g(n){t!==null&&(ke(t),t=null),h=!1,n&&(l=null),r=null,u=!1,a=!1}function nt(n){return n.length===1&&(n.hasClass("ui-page")||n.hasClass("msls-tab-content"))}function st(n){return nt(n)&&n.data("lastWindowWidth")===f&&n.data("lastWindowHeight")===e}function ht(n){if(nt(n)&&(n.data("lastWindowWidth",f),n.data("lastWindowHeight",e),n.hasClass("ui-page"))){var t=n.find(".msls-tab-content.msls-tab-content-active");t.data("lastWindowWidth",f),t.data("lastWindowHeight",e)}}function y(n,t,i){if(!(c>0)&&!v){if(st(n)){if(!i)return}else ht(n);try{v=!0,o(s.layoutStart),lt(di,n),n=n.filter(":visible"),ct(n,t);var u=yt(n,t),r=tt(u);rt(r),t||b===0||rt(r),o(s.layoutEnd),lt(gi,n),o(s.layoutEndNotified)}finally{v=!1}}}function tt(n){for(var c=[],e=[],i=[],l=[],u,r,o,s,h,f=n.length,t=0;t<f;t++)n[t].msls_layout_index=t+1,c[t]=-1,e[t]=0;for(t=f-1;t>=0;t--){for(u=n[t].parentNode;u;){if(r=u.msls_layout_index,r){c[t]=--r,e[r]++;break}u=u.parentNode}n[t].msls_layout_index=0}for(h=f,o=0,t=f-1;t>=0;t--)e[t]===0&&(i.push(t),h--);while(h>0){if(s=i.length,s===o)break;for(i.push(-1),t=o;t<s;t++)r=c[i[t]],r>=0&&--e[r]==0&&(i.push(r),h--);o=s+1}for(t=i.length-1;t>=0;t--)l.push(i[t]>=0?n[i[t]]:null);return l.push(null),l}function it(n){for(var t=0;t<n.length;t++)n[t].call()}function ct(n,t){var r=n.filter(".msls-vstretch").add(i(".msls-vstretch",n)),f,u;t||(r=r.not(".msls-layout-ignore-children .msls-vstretch, .msls-columns-layout > .msls-vstretch")),r=r.filter(":visible"),i.each(r,function(){i(this.parentNode).data("msls-rows-updated",!1)}),f=tt(r),u=[],f.forEach(function(n){var t,r,o,s,f,e;if(!n){it(u),u=[];return}(t=n.parentNode,r=0,i(t).data("msls-rows-updated"))||(i.each(dt(t),function(){r+=gt(this)}),f=0,o=ni(t),s=o-r,e=i(t).children(".msls-vstretch").filter(":visible"),i.each(e,function(){f+=p(this)}),vt(t,e,s,f,u),i(t).data("msls-rows-updated",!0))})}function vt(t,r,u,f,e){i.each(r,function(){var v=this,g=i(this),y,w,r,d,o,b,s,h,c,l,k,a;y=i(t).hasClass("msls-columns-layout")||t.tagName==="BODY",w=p(this),r=n.getComputedStyle(this),d=parseFloat(r.minHeight),o=u*(y?1:w/f),b=parseFloat(r.marginTop)+parseFloat(r.marginBottom),s=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),h=parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),o-=b,o<0&&(o=0),o<s+h&&(o=s+h),c=et(r),l=c==="content-box",k=c==="padding-box",o-=(k||l?parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth):0)+(l?parseFloat(r.paddingTop)+parseFloat(r.paddingBottom):0),o=Math.floor(o),a=o+"px",v.style.height!==a&&e.push(function(){v.style.height=a})})}function yt(n,t){var r=n.filter(".msls-columns-layout:not(.msls-static-layout)").add(i(".msls-columns-layout:not(.msls-static-layout)",n)),u=[];return t||(r=r.not(".msls-layout-ignore-children .msls-columns-layout")),r=r.filter(":visible"),i.each(r,function(){var n=i(this);(!!n.children(".msls-hstretch").length||n.hasClass("msls-dynamic-padding"))&&u.push(this)}),i(u)}function rt(n){var t=[];n.forEach(function(n){if(!n){it(t),t=[];return}var u=i(n),r=ut(n);pt(n,r,t)})}function pt(t,r,u){var a=0,e,f,v=0,o,s,l=[],c,y,h=!1,w=t.children;w.length!==0&&(i.each(w,function(){var n=i(this);n.hasClass("msls-hauto")?(f=cs(this),a+=f,l.push({element:this,isAuto:!0,requiredWidth:f})):n.hasClass("msls-hstretch")&&(e=p(this),v+=e,l.push({element:this,isAuto:!1,weight:e}),h=!0)}),h&&(o=r-a,o=o>0?o:0,c=[],h=!1,s=i(t).hasClass("msls-overflow-columns"),i.each(l,function(){var r=this.element,y=i(r);if(r.offsetWidth!==0||r.offsetHeight!==0){var u=n.getComputedStyle(r),a=parseFloat(u.marginLeft)+parseFloat(u.marginRight),l=0;this.isAuto?f=this.requiredWidth:(e=this.weight,f=o*(e/v),l=parseFloat(u.minWidth),s&&f<l&&(f=l),h=!0),this.totalWidth=Math.floor(f+a),c.push(this)}}),h&&(s?(y=wt(c,r),i.each(y,function(){bt(this,r,s,u)})):i.each(c,function(){this.isAuto||ft(this.element,this.totalWidth,s,u)}))),i(t).hasClass("msls-dynamic-padding")&&kt(t,u))}function wt(n,t){for(var i=0,o=0,f,e=[],r,u;i<n.length;){f=t,r=[];do if(u=n[i],r.length===0||u.totalWidth<=f)r.push(u),f-=u.totalWidth,i++;else break;while(i<n.length);e.push(r),o++}return e}function bt(n,t,r,u){var o=[],e=0,s=0,h=0,f=0;i.each(n,function(t){var c=t===0,f=t===n.length-1,r=i(this.element.nextSibling);this.isAuto?e+=this.totalWidth:(s+=this.totalWidth,o.push(this),h+=this.weight),r.hasClass("msls-hempty")&&u.push(function(){at(r,f,"msls-clear")})}),f=t-e-s,i.each(o,function(){var o=(t-e)*(this.weight/h),n=o-this.totalWidth,i=this.totalWidth;n=n>f?f:n,n>0&&(i+=n,f-=n),ft(this.element,i,r,u)})}function kt(n,t){var f=[],e=-1,r=[],u=!1;(i(n).children(":visible").each(function(){var n=i(this);(n.hasClass("msls-hauto")||n.hasClass("msls-hstretch"))&&r.push({element:this,offsetTop:this.offsetTop,rowIndex:0,addClassString:"",removeClassString:""})}),r.length!==0)&&(u=r[0].offsetTop!==r[r.length-1].offsetTop,i.each(r,function(){u?this.addClassString+=" msls-overflow":this.removeClassString+=" msls-overflow"}),t.push(function(){i.each(r,function(){at(i(this.element),!0,this.addClassString,this.removeClassString)})}))}function dt(n){var t=i(n);return t.hasClass("msls-columns-layout")?[]:t.children(".msls-vauto")}function p(n){var t,r=i(n).attr("data-msls-weight");return t=r?parseFloat(r):1}function gt(t){var r=0,i=0,u=n.getComputedStyle(t),f=parseFloat(u.height);return r=t.offsetHeight+(isNaN(f)?0:f-Math.round(f)),i=parseFloat(u.marginTop)+parseFloat(u.marginBottom),!isNaN(i)&&i>0&&(r+=i),Math.ceil(r)}function ut(t){var i=0,r=n.getComputedStyle(t),u=parseFloat(r.width);return i=t.clientWidth+(isNaN(u)?0:u-Math.round(u)),i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i=isNaN(i)?0:i,Math.floor(i)}function ni(t){var i=0,r=n.getComputedStyle(t),u=parseFloat(r.height);return i=t.clientHeight+(isNaN(u)?0:u-Math.round(u)),i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i=isNaN(i)?0:i,Math.floor(i)}function ft(t,i,r,u){var f=n.getComputedStyle(t),e=i,c=parseFloat(f.minWidth),s=et(f),h=s==="content-box",l=s==="padding-box",o;e-=parseFloat(f.marginLeft)+parseFloat(f.marginRight)+(l||h?parseFloat(f.borderLeftWidth)+parseFloat(f.borderRightWidth):0)+(h?parseFloat(f.paddingLeft)+parseFloat(f.paddingRight):0),e=Math.floor(e),o=e+"px",t.style.width!==o&&u.push(function(){t.style.width=o}),!r&&c>e&&t.style.minWidth!==o&&u.push(function(){t.style.minWidth=o})}function et(n){return n.boxSizing||n.MozBoxSizing||n.webkitBoxSizing}function ii(n){for(var t=n,f,r,u;!!t&&(!r||!u);)t.tagName==="LI"?r=u=t:(f=(" "+t.className+" ").replace(/\s+/," "),!r&&(f.indexOf(" msls-vstretch ")>=0||f.indexOf(" msls-fixed-height ")>=0)&&(r=t,u=u&&t),!u&&(f.indexOf(" msls-hstretch ")>=0||f.indexOf(" msls-fixed-width ")>=0)&&(u=t,r=r&&t)),t=t.parentNode;return(t=u||r,!t)?null:i(t)}function ri(){var t=i("body"),n=i('<div style="height: 100px; width: 100px; visibility: hidden" class="msls-vscroll msls-hscroll"><\/div>').appendTo(t),r=i('<div style="height: 200px; width: 200px;"><\/div>').appendTo(n);ea=b=n[0].offsetHeight-n[0].clientHeight,ot=n[0].offsetWidth-n[0].clientWidth,n.remove()}var ui=[],fi=0,t=null,c=0,l=null,r=null,u=!1,a=!1,v=!1,w="body > div:not(.msls-layout-ignore):not(.ui-loader)",f=-1,e=-1,b=0,ot=0,h;er=function(n){c++,n?t!==null&&(ke(t),t=null):g()},pi=function(n){n=typeof n=="boolean"?n:!0,c--,n&&d()},ua=function(n,t){r=n?n:i(w),a=!t,k()},h=!1,cr=function(n,t){v||(n?n.first().closest(".msls-layout-ignore-children").length?(l=l?l.add(n):n,o(s.layoutPartialRequest)):u||(r?n.filter(r).length!==n.length&&(u=!0,a=!0,o(s.layoutFullRequest)):(r=n,o(s.layoutPartialRequest))):u||c!==0||(u=!0,o(s.layoutFullRequest)),t||(a=!0),h=!1,d())},cs=function(t){var r=0,i=0,u=n.getComputedStyle(t),f=parseFloat(u.width);return r=t.offsetWidth+(isNaN(f)?0:f-Math.round(f)),i=parseFloat(u.marginLeft)+parseFloat(u.marginRight),!isNaN(i)&&i>0&&(r+=i),Math.ceil(r)},fa=ut,i(function(){var t=i(n);f=t.width(),e=t.height(),n.addEventListener("resize",function(){var n=t.width(),i=t.height();(n!==f||i!==e)&&(f=n,e=i,cr())},!1)}),i(document).ready(function(){ri();i("body").on("updatelayout",function(n){if(!n.target||n.target.tagName!=="UL"){var t=ii(n.target);t&&cr(t)}})})}(),function(){function c(n,i){var o=n.constructor,r=this,e={},f,s=r.onChanged,h=r.needPropertyEvents,c=r.contentItemProperty;h&&(ar(o),e[i+"_"+cu]=tr(!0)),f="__"+i,r.initialValue!==t&&(e[f]={enumerable:!ei,value:r.initialValue}),e[i]=l(function(){return this[f]},function(n){if(this[f]!==n&&(u(this,f,n),s&&s.call(this,n),h)){var t=this;t.dispatchChange(i)}}),d(o,e)}function a(n){var t=this;t.children=[],n&&n.length||(t._view=i("<div />")),t._view=n}function y(){var n=this,t=n._tapElement;n._isViewCreated&&!!n.tap&&(t||(t=n.getView()),ls(t,n,"tap","ButtonClickPromise"),t.addClass("msls-tap"),t.keypress(function(n){n.keyCode===i.mobile.keyCode.ENTER&&i(n.target).trigger("vclick")}))}function p(){var n=this,f=n.children,u,t,e,r=n.data;for(!!r&&i.isFunction(r._customViewDisposeHandler)&&(r._customViewDisposeHandler(),r._customViewDisposeHandler=null),n.children=null,t=0,e=f.length;t<e;t++)u=f[t],u._parent=null,k(u);n.parent=null,n.__tap=null,n.__data=null}function b(){return this._view}function g(n){this._isViewCreated||(this._isViewCreated=!0,this._attachViewCore(n),this.isRendered=!0)}function nt(){if(!this._isViewCreated){var i=this.constructor,n={},t=i._fillTemplate;t&&t(this.getView(),this.data,n),this.attachView(n)}}function it(){}function rt(){this._registerTapAction()}var ut=0,f="clickActionExecuted",n;w=function(n,t,i){return{onChanged:n,initialValue:t,needPropertyEvents:i,defineOn:c}},e("ui","Control",a,null,{controlName:"Undefined",data:w(function(n){this._onDataChanged&&this._onDataChanged(n)},null),isRendered:h(!1),tap:w(function(){this._isViewCreated&&this._registerTapAction()}),parent:l(function(){return this._parent},function(n){var t;this._parent!==n&&(!this._parent||!this._parent.children||(t=this._parent.children.indexOf(this),t>=0&&this._parent.children.splice(t,1)),this._parent=n,!n||this._parent.children.push(this))}),_onDispose:p,getView:b,attachView:g,render:nt,_attachViewCore:rt,_registerTapAction:y},{_fillTemplate:it,_skipEnhance:!1}),v=r.ui.Control,v.prototype._propertyMappings={},v.prototype._editableProperties={},tt=function(n,t){for(var r=n[0],i=t[0],u=[],e=[],f;i!==r&&!!i;)u.push(i),i=i.parentNode;if(!!i)while(u.length>0){for(i=u.pop(),r=r.firstChild,f=0;r!==i;)r=r.nextSibling,f++;e.push(f)}return e},ft=function(n,r,u){if(!r||!r.length)return r===t&&!!u?fi(n,u):n;for(var s=r.length,o,f=n[0],e=0;e<s&&!!f;e++)for(o=r[e],f=f.firstChild;o>0&&!!f;)f=f.nextSibling,o--;return i(f)},fi=function(n,t){return n.is(t)?n:n.find(t)},n={a:null,input:null,textarea:null},ls=function(t,i,r,u,e){t.off("touchend").on("touchend",function(){});t.off("vclick").on("vclick",function(t){var c,h,l,a,v,y,p;o(s.userTap),c=[],h=i;do c.push(h),h=h.parent;while(h);do h=c.pop(),h._onBeforeTap&&h._onBeforeTap(t);while(c.length);l=i[r],!!l&&l.canExecute&&(a=t.target,v=a.tagName.toLowerCase(),e&&!e(t)||v in n&&(v!=="a"||a.href)||(y=i.data,p=y.isEnabled===!1,p||(o(s.executeActionStart),i.getView().addClass(sl),lt(u,l.execute({originalEvent:t})._thenEx(function(n,t){lt(f,{control:i,result:t,error:n}),!n||wo(n),i.getView().removeClass(sl),o(s.executeActionEnd)})))),t.originalEvent.type!=="click"&&t.preventDefault(),t.stopPropagation())})},ct("ui",{Orientation:{horizontal:"horizontal",vertical:"vertical"}})}(),function(){var u=r.ui.Control.prototype._attachViewCore,o=ot("Icon","RootCommand"),s=r.ui.Orientation,t;(function(){function n(n){var t=this;v.call(t,n)}function t(n){this._isViewCreated&&(ae(this._textElement,this.text),n&&this._textElement.trigger("updatelayout"))}function f(n,t,r){i('<div class="msls-text-container"><span class="id-element"><\/span><\/div>').appendTo(n),r.idElement=tt(n,fi(n,".id-element"))}function o(n){u.call(this,n),this._textElement=ft(this.getView(),n.idElement,".id-element"),this._refreshView()}e("ui.controls","Text",n,v,{controlName:"Text",text:w(function(){this._refreshView(!0)},null,!0),_attachViewCore:o,_refreshView:t},{_fillTemplate:f,_skipEnhance:!0}),r.ui.controls.Text.prototype._propertyMappings={stringValue:"text",properties:{tap:"tap"}}})(),function(){function t(n){var t=this;v.call(t,n),t._updatingText=!1}function r(n,t,r){var u=i('<input type="text" class="id-element" data-mini="true"><\/input>').appendTo(n);u.parent().addClass("msls-textBox-container"),t.maxLength&&ye(u,t.maxLength),r.idElement=tt(n,u)}function f(n){var t=this;t._textElement=ft(t.getView(),n.idElement,".id-element"),t.placeholderText&&t._textElement.attr("placeholder",t.placeholderText),u.call(t,n),t._textElement.keydown(function(n){n.keyCode===i.mobile.keyCode.ENTER&&(t._textElement.parent().focus(),t._textElement.focus())}),t._textElement.change(function(){t._updatingText=!0,t.text=t._textElement.val(),t._updatingText=!1}),t._refreshView()}function o(){this._isViewCreated&&(this._updatingText&&this._textElement.val()===this.text||this._textElement.val(this.text))}function s(){this._refreshView()}function h(n){if(n.state===g.disabled){var t=this._textElement;this._isViewCreated&&!!t&&(t.data("textinput")?t.textinput(n.activate?"disable":"enable"):n.activate?t.attr("disabled","disabled"):t.attr("disabled","")),n.custom=!0}}ye=function(n,t){t?n.attr("maxlength",t.toString()):n.attr("maxlength")&&n.removeAttr("maxlength")};var n=e("ui.controls","TextBox",t,v,{controlName:"TextBox",text:w(function(){this._onTextChanged()},null,!0),placeholderText:w(),_attachViewCore:f,_refreshView:o,_customVisualStateHandler:h,_onTextChanged:s},{_fillTemplate:r,_isFormElement:!0});n.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}},n.prototype._editableProperties={text:"stringValue"}}(),function(){function u(t){n.call(this,t)}function f(n,t,r){i('<textarea class="id-element" data-mini="true"><\/textarea>').appendTo(n),r.idElement=tt(n,fi(n,".id-element"))}function o(n){t.call(this,n);var i=this._textElement;ks(di,this,function(){i.keyup()})}var n=r.ui.controls.TextBox,t=n.prototype._attachViewCore;e("ui.controls","TextArea",u,n,{controlName:"TextArea",_attachViewCore:o,_onDispose:function(){this._textElement.remove()}},{_fillTemplate:f,_isFormElement:!0}),r.ui.controls.TextArea.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){v.call(this,n)}function t(n,t,r){var u=i('<a tabIndex="0" class="id-element" data-role="button" data-mini="true" data-theme="'+yi+'"/>').appendTo(n);r.idElement=tt(n,u)}function f(n){var t=this.getView();this._element=ft(t,n.idElement,".id-element"),u.call(this,n),this._refreshView()}function o(){var n=this;n._isViewCreated&&(n._element.text(n.content),n._element.data("button")&&n._element.trigger("refresh"),n._initialized=!0)}function s(){var t=this._element;t&&t.hasClass(ee)&&t.removeClass("ui-btn-hover-a")}e("ui.controls","Button",n,v,{controlName:"Button",content:w(function(){this._refreshView()}),_attachViewCore:f,_refreshView:o,_customVisualStateHandler:s},{_fillTemplate:t}),r.ui.controls.Button.prototype._propertyMappings={displayName:"content",properties:{tap:"tap",hiddenIfDisabled:"hiddenIfDisabled"}}}(),t=r.ui.controls.Button,function(){function n(n){t.call(this,n)}function r(n,t,r){var u=i('<div class="id-element msls-large-icon" tabIndex="0" data-iconpos="top" data-role="button" data-theme="'+yi+'" data-corners="false" data-mini="true"><\/div>'),f=t.properties[o];u.attr("data-icon",f||"msls-star"),u.appendTo(n),r.idElement=tt(n,u)}e("ui.controls","CommandBarButton",n,t,{controlName:"CommandBarButton"},{_fillTemplate:r}).prototype._propertyMappings={displayName:"content",properties:{icon:"icon",tap:"tap",hiddenIfDisabled:"hiddenIfDisabled"}}}(),function(){function n(n){t.call(this,n)}function r(n,t,r){var u=i('<a class="id-element" data-role="button" data-mini="true" data-theme="'+yi+'"/>').appendTo(n);r.idElement=tt(n,u)}function u(){if(t.prototype._refreshView.call(this),this._isViewCreated){var n=this._element.closest(".subControl");at(n,!this.isEnabled,ee),at(n,!this.isVisible,dt)}}e("ui.controls","ShellButton",n,t,{controlName:"ShellButton",_refreshView:u,isEnabled:w(function(){this._refreshView()},!1),isVisible:w(function(){this._refreshView()},!0),tap:h()},{_fillTemplate:r}).prototype._propertyMappings={displayName:"content"}}(),function(){function f(n){var t=this;v.call(t,n),t._updatingDropdown=!1}function o(){!this._updatingDropdown&&this._isViewCreated&&(n(this),t(this))}function n(n){var r=n._dropdownElement,t;!n._updatingDropdown&&n._isViewCreated&&n.choiceList&&(r.empty(),i.each(n.choiceList,function(){t=i("<option><\/option>"),t.attr("value",this.stringValue),t.text(this.stringValue),r.append(t)}))}function t(n){var f=n._dropdownElement,r,t,u=!0;if(!n._updatingDropdown&&n._isViewCreated){t=n.selectedValue,t===null&&(t=""),i.each(n.choiceList,function(){return this.stringValue===t&&(u=!1),u}),u&&(r=i('<option disabled="disabled"><\/option>'),r.attr("value",t),r.text(t),f.append(r));try{n._updatingDropdown=!0,n._dropdownElement.val(t),n._dropdownElement.change()}finally{n._updatingDropdown=!1}}}function s(n,t,r){var u=i('<select class="id-element" data-mini="true"/>').appendTo(n);r.idElement=tt(n,u)}function h(n){var t=this,i;t._dropdownElement=ft(t.getView(),n.idElement,".id-element"),u.call(t),t._dropdownElement.change(function(){if(!t._updatingDropdown){i=t._dropdownElement.val(),i===""&&(i=null);try{t._updatingDropdown=!0,t.selectedValue=i}finally{t._updatingDropdown=!1}}}),t._refreshView()}function c(n){if(n.state===g.disabled||n.state===g.readOnly){var t=this._dropdownElement;this._isViewCreated&&!!t&&(t.data("selectmenu")?t.selectmenu(n.activate?"disable":"enable"):n.activate?this._dropdownElement.attr("disabled","disabled"):this._dropdownElement.attr("disabled","")),n.custom=!0}}var r=e("ui.controls","Dropdown",f,v,{controlName:"Dropdown",selectedValue:w(function(){t(this)},null,!0),choiceList:w(function(){n(this)}),_attachViewCore:h,_refreshView:o,_customVisualStateHandler:c},{_fillTemplate:s,_isFormElement:!0});r.prototype._propertyMappings={stringValue:"selectedValue",choiceList:"choiceList"},r.prototype._editableProperties={selectedValue:"stringValue"}}(),function(){function s(n){var t=this;u.call(t,n)}function c(n,t,r){i('<div class="msls-text-container '+(t.heightSizingMode!==ki.fitToContent?"msls-vstretch ":"")+'"><p class="id-element"><\/p><\/div>').appendTo(n),r.idElement=tt(n,fi(n,".id-element"))}function l(n){var i=this,r=i.data;u.prototype._refreshView.call(i,n),this._isViewCreated&&r._isUnderList&&!this._needLayoutText&&r.heightSizingMode!==ki.fitToContent&&(this._needLayoutText=!0,t.length===0&&vt(gi,f),t.push(this))}function a(){if(this._needLayoutText){var n=t.indexOf(this);n>=0&&(t.length===1?(t=[],wi(gi,f)):t.splice(n,1))}}function v(t){var s=t.text,h=t._textElement,y=h[0],i,r,c,l,p=0,k,w,b,e,u,a,v=0,o,f,d;return s?(i=h.parent(),r=i[0].clientHeight,c=i[0].clientWidth,r===0||c===0)?null:i.data("msls-last-height")===r&&i.data("msls-last-width")===c?null:(i.data("msls-last-height",r),i.data("msls-last-width",c),w=n.getComputedStyle(i[0]),e=parseFloat(w.paddingTop)+parseFloat(w.paddingBottom),e=isNaN(e)?0:e,r=Math.floor(r-e),b=n.getComputedStyle(y),u=parseFloat(b.marginTop)+parseFloat(b.marginBottom),u=isNaN(u)?0:u,a=Math.ceil(y.offsetHeight+u),k=s.length,o=k-1,l=r-a,l<0)?{applyChange:function(){v<o?(f=v+o>>1,ae(h,s.substr(0,f+1)+"...")):f!==p&&(d=s.substr(0,p+1),ae(h,d+"..."))},needContinue:function(){return v<o?(a=Math.ceil(y.offsetHeight+u),l=r-a,l<0?o=f-1:(v=f+1,p=f),!0):!1}}:null:null}var u=r.ui.controls.Text,t=[],f,o;f=function(){for(var i,r=[],f,n=0,u=t.length;n<u;n++)i=v(t[n]),i&&r.push(i);while((u=r.length)>0){for(n=0;n<u;n++)r[n].applyChange();for(f=[],n=0;n<u;n++)i=r[n],i.needContinue()&&f.push(i);r=f}},o=e("ui.controls","Paragraph",s,u,{controlName:"Paragraph",lines:h(),_refreshView:l,_onDispose:a},{_fillTemplate:c,_skipEnhance:!0}),o.prototype._propertyMappings={stringValue:"text",properties:{tap:"tap"}}}(),function(){function n(n){v.call(this,n)}function t(){var t;if(u.call(this),t=this.data,t){var e=t.screen.constructor,r=e[t.name+"_render"],o=this.getView();if(!!r&&i.isFunction(r))try{r.call(null,o[0],t)}catch(s){t.displayError=f("customControl_renderError_2args",t.name,s)}else t.displayError=f("customControl_noRender_1args",t.name)}}function r(n){var t="Custom",i=n.state===g.disabled&&this.disabledRendering===t||n.state===g.readOnly&&this.readOnlyRendering===t||n.state===g.hasValidationError&&this.validationRendering===t;i&&(n.custom=!0)}e("ui.controls","CustomControl",n,v,{controlName:"CustomControl",_customVisualStateHandler:r,_attachViewCore:t}).prototype._propertyMappings={stringValue:"displayName",properties:{tap:"tap"}}}()}(),function(){function l(n){var t=this;t._subControls={},t._resources={},t.dataTemplate="<div/>",v.call(t,n)}function a(){this._refreshView()}function p(n){c.call(this,n),this._refreshView(),this._dataTemplateLoaded=!0}function w(){var n=this,t,r=[];n._isViewCreated&&(t=i(n.dataTemplate).appendTo(n.getView()),b(n,t,n._subControls,r,n._resources))}function b(n,t,e,s,h){function ft(n,t){t.bind(),s.push(t)}for(var p,c,rt,ut,k,nt,tt,it,w,et,a,d,ot,b,v,g=t.children(".resource"),l=0;l<g.length;l++)p=g[l],c=i(p),rt=c.attr("type"),ut=c.attr("name"),k=u(rt),!!k&&i.isFunction(k)&&(nt=new k,f(h,p,s,nt,!1)),h[ut]=nt;for(i.each(s,function(){this.bind()}),g.remove(),tt=t.find(".subControl"),l=0;l<tt.length;l++)p=tt[l],c=i(p),it=c.attr("control"),w=r.ui.controls[it],w||(w=u(it)),!!w&&i.isFunction(w)&&(a=new w(c),a.parent=n,d=c.attr("name"),d||(d=l.toString()),b=[],f(h,p,b,a,!1),v=y(b).first(function(n){return n.targetProperty==="data"&&n.bindingTarget===a}),v||(v=o(h,a,"data:{data, bindingMode=[msls.data.DataBindingMode.oneWayFromSource]}")),v&&(v.bindingSource=n,v.bind(),b.push(v)),e[d]=a,c.removeAttr("control"),c.attr("name")&&c.removeAttr("name"),i.each(b,ft),a.render())}function f(n,t,i,r,u){for(var e,s,c,l,h=[],f=0;f<t.attributes.length;f++)e=t.attributes[f],e.name.indexOf("data-ls-")===0&&(s=o(n,r,e.value),s&&i.push(s),u&&h.push(e.name));for(f=0;f<h.length;f++)t.removeAttribute(h[f])}function o(n,t,i){var u,o,p=/^([a-zA-Z_0-9]+):(\S+)$/,w=/^\{(\S*)\}$/,h,f,c,l=[],a,v,e,y;if(e=i.replace(/\s/,""),f=p.exec(e),f&&(v=f[1],e=f[2]),f=w.exec(e),f)for(o=f[1].split(","),h=o[0],u=1;u<o.length;u++)a=o[u].split("="),l.push({option:a[0],value:a[1]});if(h){for(c=new r.data.DataBinding(h,t,v,t),u=0;u<l.length;u++)y=l[u],c[y.option]=s(n,y.value);return c}return t[v]=s(n,e),null}function s(n,r){var f,o=/^\[(\S*)\]$/,e=o.exec(r);return e?(r=e[1],r.indexOf(t)===0?(f=r.substr(t.length),n[f]):r.indexOf("#")===0?i(r):u(r)):r}function u(t){if(!t)return null;for(var f,e=t.split("."),i=n,u=0;u<e.length;u++)if(f=e[u],i=u===0&&f==="msls"?r:i[f],!i)break;return i}var c=v.prototype._attachViewCore,t;e("ui.controls","ContentControl",l,v,{controlName:"ContentControl",dataTemplate:h(),_dataTemplateLoaded:h(!1),_attachViewCore:p,_refreshView:w,_onDataChanged:a},{_fillTemplate:v._fillTemplate}),t="resource:"}();var pe,oa=ot("Width"),lr,iu,sa={},we={},be;(function(){function bt(n){var t=this;t._currentVisualState=g.normal,v.call(t,n)}function gt(n){var t=this,i=t.data,u,f,r;t._container=t.getView(),t._contentContainer=ft(t._container,n.contentPath),t.isVisible=i.isVisible,n.labelPath&&n.control.idElement&&(r=i.screen.details._pageId+"-"+i.name,u=ft(t._contentContainer,n.control.idElement,".id-element"),u.attr("id",r),f=ft(t._container,n.labelPath),f.attr("for",r)),fi(t,n.control),v.prototype._attachViewCore.call(t,n),rt(this)}function ni(){var n=this.data;!n||(n._view=null)}function ti(n){var t=this,i=n;t._contentItemEventHandler&&(k(t._contentItemEventHandler),t._contentItemEventHandler=null),!i||(i._view=t,i.addEventListener&&(t._contentItemEventHandler=lu(i,"change",t,function(n){var f=n.detail,r,e,o,u,s=["_visualState","_alwaysShowValidationResults","validationResults","displayError"];s.indexOf(f)>=0&&rt(t),r=t.underlyingControl,!r||(e=r._propertyMappings,!e||(o=r._editableProperties||{},u=r._propertyMappings[f],!u||typeof u!="string"||u in o||(r[u]=i[f])))}))),ii(t)}function ii(n){n._isViewCreated&&n._container&&n.data&&(n._isViewCreated=!1,n.getView().empty(),n.render())}function ui(n){var r=iu(n),t;return!!r&&(t=we[r],i.isFunction(t))?t._isFormElement:!1}function fi(n,t){var f=n.data,e=iu(f),u,r;!e||(u=sa[e],i.isFunction(u)&&(r=u(n._contentContainer,f,t),!!r&&i.isFunction(r.render)&&(r.parent=n,n.underlyingControl=r)))}function ei(n,t,r){var p=[],e=pe(t),f=e===ri.none,c=e===ri.topAligned,a=e===ri.leftAligned,v=e===ri.rightAligned,o=e===ri.hidden,u,s,y=iu(t),h=!t._isUnderList&&!!y&&ui(t),l;return f&&!h?n:(u="<div class='"+fe+(c?" msls-label-align-top msls-clear msls-vauto":"")+(a?" msls-label-align-left":"")+(v?" msls-label-align-right":"")+(o?" msls-label-align-hidden":"")+(f?" msls-label-align-none":"")+"' >",h?((o||f)&&(u+='<div style="height:1px;'+(f?"width:0px;":"")+'">'),u+="<label class='msls-label-text'>"+t.displayName+"<\/label>",(o||f)&&(u+="<\/div>")):u+=o?'<div style="height:1px;"><\/div>':"<label class='msls-label-text'>"+t.displayName+"<\/label>",u+="<\/div>",u+='<div class="'+(c?" msls-clear":"")+'" />',n[0].innerHTML=u,s=i(n[0].lastChild),r.contentPath=tt(n,s),h&&(l=o||f?n[0].firstChild.firstChild.firstChild:n[0].firstChild.firstChild,r.labelPath=tt(n,i(l))),s)}function oi(n,t,i){var f=t.properties,s=f[ut],h=f[et],e=f[st],c=f[ht],a=!t._isVStretch&&t.heightSizingMode===ki.fixedSize,v=!t._isHStretch&&t.widthSizingMode===ai.fixedSize,y=f[ct],p=f[oa],l=f[lt],w=t._isHStretch,b=t._isVStretch,u=[],r=[],o;r.push(ya),t._isUnderList&&r.push("msls-list-child"),l&&r.push("msls-font-style-"+l.toLowerCase()),u.push("msls-ctl-"+ih(iu(t))),a?(i.height(y),r.push("msls-fixed-height")):(s&&i.css("min-height",s+"px"),h&&i.css("max-height",h+"px")),v?(i.width(p),r.push("msls-fixed-width")):(e&&(i.css("min-width",e+"px"),n.css("min-width",e+"px")),c&&i.css("max-width",c+"px")),r.push(t._isVStretch?"msls-vstretch":"msls-vauto"),u.push(t._isVStretch?"msls-vstretch":"msls-vauto"),u.push(t._isHStretch?"msls-hstretch":"msls-hauto"),t.properties[pt]&&u.push("msls-compact-padding"),nt(t)||yi(t)||u.push("msls-leaf"),o=t.properties[yt],o==="Right"?r.push("msls-text-align-right"):o==="Center"&&r.push("msls-text-align-center"),b&&r.push("msls-vscroll"),t.kind===it.value&&u.push("msls-redraw"),w&&r.push("msls-hscroll"),u.length>0&&n.addClass(u.join(" ")),r.length>0&&i.addClass(r.join(" "))}function w(n,t){var r=0;return i.each(n.children,function(){var u,f=i(this),n=i(this.firstChild);n.length===1&&n.hasClass(fe)&&!f.hasClass("msls-collapsed")&&(n.hasClass("msls-label-align-left")||n.hasClass("msls-label-align-right")||n.hasClass("msls-label-align-hidden"))&&(u=n[0].offsetWidth,u>r&&(r=u),t.push(n[0]))}),r}function si(n,t){if(!n)throw f("render_invalid_arg_element");if(!t)throw f("render_invalid_arg_contentItem");var u=new r.ui.controls.ContentItemPresenter(i(n));u.data=t,u.render()}function hi(n){return" "+n+" "}function b(n,t){var f=n.getView(),u=n._contentContainer,r=u.children().filter("."+nv);return r.length>0?t?r:(r.remove(),null):t?r=i("<div class='msls-state-overlay'><\/div>").appendTo(u):null}function ci(n,t){function u(n){var e;i=t(n),i&&r.push(i);for(var f=0,o=n.childNodes,s=o.length;f<s;f++)e=o[f],hi(e.className).match(/ msls-presenter /)||u(e)}var r=[],i;return n.length&&u(n[0]),r}function h(n,t){return ci(n,function(n){var i=n.tagName;return i&&t.indexOf(i.toLowerCase())>=0?n:null})}function li(n,t,r){function f(n){var u=i.attr(n,t);i.data(n,y+t,u),i.attr(n,t,r)}if(n.length===1)f(n[0]);else for(var u=0,e=n.length;u<e;u++)f(n[u])}function vi(n,r){function f(n){var u=y+r,f=i.data(n,u);f===t?n.removeAttribute(r):n.setAttribute(r,f),i.removeData(n,u)}if(n.length===1)f(n[0]);else for(var u=0,e=n.length;u<e;u++)f(n[u])}function c(n,t,i,r){t?li(n,i,r):vi(n,i)}function d(n){function t(n){if(n.id===":RootCustomControl")return!0;var i=n.baseControl;return i&&t(i)}var i=n.data;return i?t(i.controlModel):!1}function nt(n){var t=n.controlModel;return t?so(t):!1}function yi(n){var t=n.controlModel;return t?t.supportedContentItemKind===it.collection:!1}function pi(n,t){var r=h(n,["a","area","button","input","object","select","textarea"]);c(i(r),t,wt,"-1")}function l(n,t){var i=b(n,t);return pi(n.getView(),t),i}function wi(n,t){var u=n.getView(),f=n.data,i,r;at(u,t.activate,dt),t.activate||(r=pe(f),(r===ri.leftAligned||r===ri.rightAligned||r===ri.hidden)&&(i=n.parent||n,i=i.parent||i,be(i.getView()))),t.needsLayoutUpdate=!0}function bi(n,t){var r,i,u;t.custom||(r=n.data,r.kind!==it.command)&&(i=t.activate,u=b(n,i),at(n._contentContainer,i,rv))}function di(n,t){function c(n){var t=Array.prototype.slice.call(n||[],0),i=t.map(function(n){return n.message});return i.join("<br/>")}var u=n.data,o,r,h,s,f,e;t.custom||gf(u)||(o=u._alwaysShowValidationResults&&t.activate,at(n._contentContainer,o,uv),r=n._container.children("."+cl),o?(h=c(u.validationResults),r.length||(s="",f=n._container.children("."+fe),!f||!f.length||(e=pe(u),(e===ri.leftAligned||e===ri.rightAligned||e===ri.hidden)&&(s=" style='margin-left:"+cs(f[0]).toString()+"px'")),r=i("<div class='"+cl+" "+re+"'"+s+"><\/div>").appendTo(n._container)),r.append(h),t.needsLayoutUpdate=!0):r.length&&(r.remove(),t.needsLayoutUpdate=!0))}function gi(n,t){var o=n.data,f=n.getView(),r=t.activate,e;if(t.custom){at(f,r,ee);return}d(n)?l(n,r):(e=h(f,["button","fieldset","input","optgroup","option","select","textarea"]),c(i(e),r,u,u)),at(f,r,ee)}function nr(n,t){var a=n.getView(),f=n.data,e=f.kind,r=t.activate,o,s;if(!t.custom){switch(e){case it.group:case it.details:case it.value:break;default:return}if(d(n))l(n,r);else{if(gf(f)||nt(f))return;(e===it.value||e===it.details)&&(o=i(h(a,["input","textarea"])),s=i(h(a,["select","option"])),c(o,r,p,p),c(s,r,u,u),at(o,r,us),at(s,r,us))}at(n._contentContainer,r,us)}}function tr(n,t){var u=t.activate,s=l(n,u),f=n._contentContainer,r,e,o;at(f,u,tv),r=n._contentContainer.children().filter("."+hl),u?(e=n.data,o=e.displayError,r.length||(r=i("<div class='"+hl+"'><\/div>").appendTo(f),s.append("<div class='"+iv+"'><\/div>")),r.text(o),t.needsLayoutUpdate=!0):r.length&&(r.remove(),t.needsLayoutUpdate=!0)}function rt(t){var r=t.data,e,o;if(r&&!r._isUnderList){var u=t.underlyingControl,s=t._currentVisualState,i=r._visualState,h,c,f=u&&u._customVisualStateHandler,l;if(s===i)switch(i){case g.normal:case g.disabled:case g.hidden:case g.loading:case g.readOnly:return}h=n[s],e={state:s,activate:!1,custom:!1,needsLayoutUpdate:!1},f&&f.call(u,e),h&&h(t,e),t._currentVisualState=i,c=n[i],o={state:i,activate:!0,custom:!1,needsLayoutUpdate:!1},f&&f.call(u,o),c&&c(t,o),l=e.needsLayoutUpdate||o.needsLayoutUpdate,l&&r._isActivated&&t.getView().trigger("updatelayout")}}var y="msls-previous-",ut=ot("MinHeight"),et=ot("MaxHeight"),st=ot("MinWidth"),ht=ot("MaxWidth"),ct=ot("Height"),lt=ot("FontStyle"),vt=ot("AttachedLabelPosition"),yt=ot("TextAlignment"),pt=ot("CompactMargins","RootGroup"),wt="tabIndex",u="disabled",p="readonly",n;lr=function(n,t,r){var u,f,e,o;n.addClass("msls-presenter"+(t._isUnderList?" msls-list-child":"")),u=ei(n,t,r),oi(n,t,u),f=iu(t),!f||(e=we[f],i.isFunction(e)&&(o=e._fillTemplate,!o||o(u,t,r.control={})))},iu=function(n){var t=n.controlModel;return!t?"NoControl":kt(t.id.replace(/\S*:/,""))},pe=function(n){var i=n.controlModel,t=n.properties[vt];return(!i||i.attachedLabelSupport!=="DisplayedByControl")&&t||(t=ri.none),t},be=function(n){o(s.updateAttachedLabelsStart);for(var l="div.msls-label-host",u=n.find(l).filter(":visible").add(n.filter(l)),e,h,c,a,v,f,r,y=[],p=[],t=0;t<u.length;t++){if(e=u[t],h=e.parentNode,v=i(h).hasClass(ka),f=[],r=w(e,f),v)while(t<u.length-1)if(c=u[t+1],a=c.parentNode,a===h)r=Math.max(r,w(c,f)),t++;else break;r>0&&(y.push(f),p.push(r))}i.each(y,function(n){var t=p[n]+"px";i.each(this,function(){var n=this.style;n.width!==t&&(n.width=t),n.minWidth!==t&&(n.minWidth=t)})}),o(s.updateAttachedLabelsEnd)},a("render",si),n={},n[g.disabled]=gi,n[g.hidden]=wi,n[g.hasValidationError]=di,n[g.hasDisplayError]=tr,n[g.loading]=bi,n[g.readOnly]=nr,e("ui.controls","ContentItemPresenter",bt,v,{controlName:"ContentItemPresenter",suppressLabel:!1,_attachViewCore:gt,_onDataChanged:ti,_onDispose:ni},{_fillTemplate:lr})})(),function(){function lt(n){var t=this;v.call(t,n)}function y(n,t,i,r,u,f,e){if(n>=100||n<0)return new Date(n,t,i,r,u,f,e);var o=new Date(0,0,0,0,0,0,0);return o.setFullYear(n),o.setMonth(t),o.setDate(i),o.setHours(r),o.setMinutes(u),o.setSeconds(f),o.setMilliseconds(e),o}function a(n,t){return y(n,t+1,0,0,0,0,0).getDate()}function at(n,t){return y(n,t,1,0,0,0,0).getDay()}function d(n,t){while(t>n.length)n="0"+n;return n}function p(n,t){return rt.format(y(t,0,1,0,0,0,0),"yyyy",n.culture)}function vt(n,t){return n.culture.calendars.standard.months.namesAbbr[t]}function nt(n,t){return n.culture.calendars.standard[t][0]}function yt(n,t){var i;switch(n.clock){case"TwelveHour":i=t%12,i===0&&(i=12);break;case"TwentyFourHour":i=t;break;default:i=t}return i.toString()}function it(n,t){return d(t.toString(),2)}function c(n,t){var i=document.createElement("option");return i.value=t,i.text=n,i}function u(n,t){var i=c(t,"");return n.insertBefore(i,n.firstChild),i}function o(n,t){if(n.selectedIndex>=0&&n[n.selectedIndex].value===t)return!1;for(var r=0,i=n.firstChild;i!==null;){if(i.tagName==="OPTION"){if(i.value===t)return n.selectedIndex=r,!0;r++}i=i.nextSibling}return!1}function pt(n){var r=n._yearDropdownElement[0],d=n.date,e=n._format,l=!n.date?null:d.getFullYear(),g=n.originalDate,nt=!n.originalDate?null:g.getFullYear(),v=[l,nt].sort(),y,w,t,s,h,b,k,a;r.selectedIndex>=0&&(b=r[r.selectedIndex].value),i(r).find("option."+ui).remove(),h=r.firstChild,e._isNullable&&(h=h.nextSibling);for(w in v)t=v[w],t!==null&&t!==y&&(t<e.minimumYear?(s=c(p(e,t),t.toString()),s.className=ui,r.insertBefore(s,h)):t>e.maximumYear&&(s=c(p(e,t),t.toString()),s.className=ui,r.appendChild(s))),y=t;n.date||e._isNullable||(k=u(r,f("dateTimePicker_emptyYear")),k.className=ui),a=l!==null?l.toString():"",(o(r,a)||b!==a)&&n._yearDropdownElement.change()}function wt(n){var t=n._monthDropdownElement[0],l=n._format,s,h,r,c,e;t.selectedIndex>=0&&(s=t[t.selectedIndex].value),i(t).find("option."+ui).remove(),h=n.date,r=n.date?h.getMonth():null,n.date||l._isNullable||(c=u(t,f("dateTimePicker_emptyMonth")),c.className=ui),e=r!==null?r.toString():"",(o(t,e)||s!==e)&&n._monthDropdownElement.change()}function bt(n,t,i){var u,h=n._format,o=h.culture.calendars.standard,l=o.firstDay,a=o.days,s=a.namesAbbr,r,e=k[t];if(!e)for(k[t]=e=document.createDocumentFragment(),r=1;r<=31;r++){var v=d(r.toString(),2),y=(t+r-1+l)%s.length,p=r.toString(),w=f("dateTimePicker_dayNumberAndDayPattern",v,s[y]);e.appendChild(c(w,p))}for(u=e.cloneNode(!0),r=31;r>i;r--)u.removeChild(u.lastChild);return u}function kt(n){var t=n._dayDropdownElement[0],c;if(i(t).empty(),!n.date){u(t,f("dateTimePicker_emptyDay"));return}var r=n.date,l=n._format,e=r.getMonth(),s=r.getFullYear(),h=n.date?r.getDate():null,v=a(s,e),y=at(s,e),p=bt(n,y,v);t.appendChild(p),(!r||l._isNullable)&&u(t,f("dateTimePicker_emptyDay")),c=h!==null?h.toString():"",o(t,c),n._dayDropdownElement.change()}function dt(n){var h,e,c,r;if(n._hourPeriodDropdownElement){var t=n._hourPeriodDropdownElement[0],l=n._format,s,a=!t.firstChild;t.selectedIndex>=0&&(s=t[t.selectedIndex].value),i(t).find("option."+ui).remove(),h=n.date,e=n.date?h.getHours():null,n.date||l._isNullable||(c=u(t,f("dateTimePicker_emptyPeriod")),c.className=ui),r=e===null?"":e<12?"0":"12",(o(t,r)||s!==r)&&n._hourPeriodDropdownElement.change()}}function gt(n){var t=n._hourNumberDropdownElement[0],e=n._format,s,h,r,c;t.selectedIndex>=0&&(s=t[t.selectedIndex].value),i(t).find("option."+ui).remove(),h=n.date,r=n.date?(h.getHours()%e.totalHourNumbers).toString():"",n.date||e._isNullable||(c=u(t,f("dateTimePicker_emptyHour")),c.className=ui),(o(t,r)||s!==r)&&n._hourNumberDropdownElement.change()}function ni(n){var t=n._minuteDropdownElement[0],s=n._format,y=n.date,h=!y?null:y.getMinutes(),p=n.originalDate,g=!p?null:p.getMinutes(),w=[h,g].sort().reverse(),tt,rt,r,e,l,ut,b,a,k,nt=s._isNullable?1:0,d,v;t.selectedIndex>=0&&(k=t[t.selectedIndex].value),i(t).find("option."+ui).remove(),a=t.childNodes;for(d in w)r=w[d],r!==null&&r!==b&&r%s.minuteIncrement>0&&(l=Math.floor(r/s.minuteIncrement)+1+nt,e=c(it(s,r),r.toString()),e.className=ui,l<a.length?t.insertBefore(e,a[l]):t.appendChild(e)),b=r;n.date||s._isNullable||(e=u(t,f("dateTimePicker_emptyMinute")),e.className=ui),v=h!==null?h.toString():"",(o(t,v)||v!==k)&&n._minuteDropdownElement.change()}function l(n){if(n.date){var t=new Date(n.date);return t.setMilliseconds(n.date.getMilliseconds()),t}return new Date}function ti(n,t){if(t===null){n.date=null;return}var i=l(n),r=a(t,i.getMonth());r<i.getDate()&&i.setDate(r),i.setFullYear(t),n.date=i}function ii(n,t){if(t===null){n.date=null;return}var i=l(n),r=a(i.getFullYear(),i.getMonth());i.setDate(t),n.date=i}function ri(n,t){if(t===null){n.date=null;return}var i=l(n),r=a(i.getFullYear(),t);r<i.getDate()&&i.setDate(r),i.setMonth(t),n.date=i}function et(n,t,i){t?i||(i=0):t=0;var r=l(n);r.setHours(t+i),n.date=r}function fi(n,t,i){if(i===null){n.date=null;return}et(n,t,i)}function ei(n,t,i){if(t===null){n.date=null;return}et(n,t,i)}function oi(n,t){if(t===null){n.date=null;return}var i=l(n);i.setMinutes(t),n.date=i}function t(n){if(!n)return null;var t=n[0],i=t.options[t.selectedIndex].value;return i===""?null:parseInt(i,10)}function s(n,t){var i='<select class="id-element" name="'+n+'" data-icon="false" data-mini="true" style="min-width: 100%; max-width: none;">';return!t||(i+=t.join("")),i+="<\/select>"}function n(n,t){return'<option value="'+t+'">'+n+"<\/option>"}function si(t){var r=[],i;for(t._isNullable&&r.push(n(f("dateTimePicker_emptyYear"),"")),i=t.minimumYear;i<=t.maximumYear;i++)r.push(n(p(t,i),i.toString()));return s("year",r)}function hi(t){var r=[],i;for(t._isNullable&&r.push(n(f("dateTimePicker_emptyMonth"),"")),i=0;i<12;i++)r.push(n(vt(t,i),i.toString()));return s("month",r)}function ot(t){var r=[],o=t.totalHourNumbers,u,e,i;for(t._isNullable&&r.push(n(f("dateTimePicker_emptyHour"),"")),i=0;i<o;i++)u=i.toString(),e=yt(t,i),r.push(n(e,u));return s("hour",r)}function ci(t){var i=[],r=nt(t,"AM"),u=nt(t,"PM");return t._isNullable&&i.push(n(f("dateTimePicker_emptyPeriod"),"")),i.push(n(r,"0")),i.push(n(u,"12")),s("period",i)}function st(t){var r=[],i,o=t.minuteIncrement,u,e;for(t._isNullable&&r.push(n(f("dateTimePicker_emptyMinute"),"")),i=0;i<60;i+=o)u=i.toString(),e=it(t,i),r.push(n(e,u));return s("minute",r)}function ht(n,t){var r,i;return r='<fieldset data-role="controlgroup" data-type="horizontal" data-inline="true">'+n.join("")+"<\/fieldset>",i=hs(r),t.appendChild(i),i}function li(n){var t={},r=n.properties,i,u,f;t.culture=rt.culture(),t.minimumYear=r.minimumYear,t.maximumYear=r.maximumYear,t.clock=t.culture.calendars.standard.AM?"TwelveHour":"TwentyFourHour",t.minuteIncrement=r.minuteIncrement,(!t.minuteIncrement||t.minuteIncrement<=0)&&(t.minuteIncrement=1),t._isNullable=!ut(n.valueModel,":@Required"),i=ut(n.valueModel,":@Range"),!i||(i.minimum?(t._minimumDate=new Date(i.minimum),u=t._minimumDate.getFullYear(),t.minimumYear<u&&(t.minimumYear=u)):t._minimumDate=null,i.maximum?(t._maximumDate=new Date(i.maximum),f=t._maximumDate.getFullYear(),t.maximumYear>f&&(t.maximumYear=f)):t._maximumDate=null);switch(t.clock){case"TwelveHour":t.totalHourNumbers=12;break;case"TwentyFourHour":t.totalHourNumbers=24;break;default:t.totalHourNumbers=24}return t}function ai(n,r){n._updatingDropdownElements=!1,n._format=r.format;var u=n.getView(),f=ft(u,r.containerItem);n.datePickerEnabled&&(n._yearDropdownElement=ft(u,r.yearElement),n._monthDropdownElement=ft(u,r.monthElement),n._dayDropdownElement=ft(u,r.dayElement),n._yearDropdownElement.change(function(){n._updatingDropdownElements||ti(n,t(n._yearDropdownElement))}),n._monthDropdownElement.change(function(){n._updatingDropdownElements||ri(n,t(n._monthDropdownElement))}),n._dayDropdownElement.change(function(){n._updatingDropdownElements||ii(n,t(n._dayDropdownElement))})),n.timePickerEnabled&&(n._hourNumberDropdownElement=ft(u,r.hourNumberElement),n._minuteDropdownElement=ft(u,r.minuteElement),r.hourPeriodElement&&(n._hourPeriodDropdownElement=ft(u,r.hourPeriodElement),n._hourPeriodDropdownElement.change(function(){n._updatingDropdownElements||fi(n,t(n._hourNumberDropdownElement),t(n._hourPeriodDropdownElement))})),n._hourNumberDropdownElement.change(function(){n._updatingDropdownElements||ei(n,t(n._hourNumberDropdownElement),t(n._hourPeriodDropdownElement))}),n._minuteDropdownElement.change(function(){n._updatingDropdownElements||oi(n,t(n._minuteDropdownElement))})),ff(di,function(){i(n.getView()).find("select").each(function(){i(this).closest("div.ui-btn").addClass("msls-dateTimePicker-"+this.name)})})}function b(n,t,i){var r,u,f,e,o;try{n._updatingDropdownElements=!0,n.datePickerEnabled&&(!t||!i||(r=t.getFullYear()===i.getFullYear(),u=t.getMonth()===i.getMonth(),r&&u&&(f=t.getDate()===i.getDate())),r||pt(n),u||wt(n),f||kt(n)),n.timePickerEnabled&&(!t||!i||(e=t.getHours()===i.getHours(),o=t.getMinutes()===i.getMinutes()),e||(gt(n),n._format.clock==="TwelveHour"&&dt(n)),o||ni(n))}finally{n._updatingDropdownElements=!1}}function h(n,t){n&&(n.data("selectmenu")&&n.selectmenu(t?"enable":"disable"),t?n.attr("disabled")==="disabled"&&n.removeAttr("disabled"):n.attr("disabled","disabled"))}function vi(n,t){n.datePickerEnabled&&(h(n._yearDropdownElement,t),h(n._monthDropdownElement,t),h(n._dayDropdownElement,t)),n.timePickerEnabled&&(h(n._hourNumberDropdownElement,t),h(n._hourPeriodDropdownElement,t),h(n._minuteDropdownElement,t))}function yi(n){if(n.state===g.disabled||n.state===g.readOnly){var t=n.activate;vi(this,!t),n.custom=!0}}function pi(){this._isViewCreated&&b(this)}function wi(n){var t=this;r.ui.Control.prototype._attachViewCore.call(t),ai(t,n),t._refreshView()}function bi(n,t,r){var a=hs('<div class="msls-dateTimePicker-container">'),y=t.properties,h=[],c=[],l,e,u=[],o,k,it,d,f,v,w,b;if(r.format=f=li(t),v=f.culture.calendars.standard,n[0].appendChild(a),y.datePickerEnabled||r.isDatePicker){var g=v.patterns.d,nt=v["/"],p=g.split(nt,3);for(w in p){b=p[w].split(" ",1)[0];switch(b){case"M":case"MM":h.push(hi(f)),u.push("monthElement");break;case"d":case"dd":h.push(s("day")),u.push("dayElement");break;case"yyyy":case"yy":h.push(si(f)),u.push("yearElement")}}for(l=ht(h,a),e=l.firstChild,o=0;o<u.length;o++)r[u[o]]=tt(n,i(e)),e=e.nextSibling}if(y.timePickerEnabled)for(u=[],k=ot(f),d=st(f),c.push(ot(f)),u.push("hourNumberElement"),c.push(st(f)),u.push("minuteElement"),f.clock==="TwelveHour"&&(c.push(ci(f)),u.push("hourPeriodElement")),l=ht(c,a),e=l.firstChild,o=0;o<u.length;o++)r[u[o]]=tt(n,i(e)),e=e.nextSibling}var k=[],ct=e("ui.controls","DateTimePicker",lt,v,{controlName:"DateTimePicker",datePickerEnabled:w(),timePickerEnabled:w(),date:w(function(n){this._isViewCreated&&b(this,n,this._oldDate),this._oldDate=n},null,!0),originalDate:w(function(n){this._isViewCreated&&b(this,n,this._oldOriginalDate),this._oldOriginalDate=n}),_attachViewCore:wi,_refreshView:pi,_customVisualStateHandler:yi},{_fillTemplate:bi});ct.prototype._propertyMappings={value:"date",properties:{datePickerEnabled:"datePickerEnabled",timePickerEnabled:"timePickerEnabled"},details:{originalValue:"originalDate"}},ct.prototype._editableProperties={date:"value"}}(),function(){function n(n){var t=this;t.timePickerEnabled=!1,t.datePickerEnabled=!0,r.ui.controls.DateTimePicker.call(t,n)}e("ui.controls","DatePicker",n,r.ui.controls.DateTimePicker,{controlName:"DatePicker"},{_fillTemplate:function(n,t,i){i.isDatePicker=!0,r.ui.controls.DateTimePicker._fillTemplate(n,t,i)}}),r.ui.controls.DatePicker.prototype._propertyMappings={value:"date",details:{originalValue:"originalDate"}}}(),function(){function n(n){r.ui.controls.TextBox.call(this,n)}function t(n,t,r){var f='<input type="email" class="id-element" data-mini="true" />',u=i(f).appendTo(n);t.maxLength&&ye(u,t.maxLength),r.idElement=tt(n,u)}e("ui.controls","EmailAddressEditor",n,r.ui.controls.TextBox,{controlName:"EmailAddressEditor"},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.EmailAddressEditor.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}function t(){this._isViewCreated&&(this._textElement.text(this.text),this._textElement.attr("href","mailto:"+this.text))}function u(n,t,r){i('<div class="msls-text-container"><a class="id-element ui-link" target="_blank"><\/a><\/div>').appendTo(n),r.idElement=tt(n,fi(n,".id-element"))}e("ui.controls","EmailAddressViewer",n,r.ui.controls.Text,{controlName:"EmailAddressViewer",_refreshView:t},{_fillTemplate:u})}(),function(){function n(n){var t=this;v.call(t,n),t._updateSelection=!1}function t(n,t,r){var o=0,c=t.properties,l=c.options,u="",e="",s,h;l==="OnOffOption"?(u=f("flipSwitchControl_offLabel"),e=f("flipSwitchControl_onLabel")):(u=f("flipSwitchControl_noLabel"),e=f("flipSwitchControl_yesLabel")),o=u.length>e.length?u.length:e.length,s="<select data-role='slider'><option value='false'>"+u+"<\/option><option value='true'>"+e+"<\/option><\/select>",h=i(s).appendTo(n),r.idElement=tt(n,h),r.labelWidth=o}function u(n){var t=this,i;t._selectElement=ft(t.getView(),n.idElement),r.ui.Control.prototype._attachViewCore.call(t,n),t._selectElement.change(function(){if(!t._updateSelection)try{t._updateSelection=!0,t.sliderValue=t._selectElement.val()==="false"?!1:!0}finally{t._updateSelection=!1}}),i=function(){wi(di,i);var r=t._selectElement.siblings();r.length===1&&r.css("min-width",n.labelWidth+"em")},vt(di,i),t._refreshView()}function o(){if(this._isViewCreated){var n=this.sliderValue?"true":"false";if(!this._updateSelection||this._selectElement.val()!==n)try{this._updateSelection=!0,this._selectElement.val(n),this._selectElement.change()}finally{this._updateSelection=!1}}}function s(n){if(n.state===g.disabled||n.state===g.readOnly){var t=this._selectElement;this._isViewCreated&&!!t&&(t.data("slider")?t.slider(n.activate?"disable":"enable"):n.activate?t.attr("disabled","disabled"):t.attr("disabled","")),n.custom=!0}}e("ui.controls","FlipSwitchControl",n,v,{controlName:"FlipSwitchControl",sliderValue:w(function(){this._refreshView()},!1,!0),_customVisualStateHandler:s,_attachViewCore:u,_refreshView:o},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.FlipSwitchControl.prototype._propertyMappings={value:"sliderValue"},r.ui.controls.FlipSwitchControl.prototype._editableProperties={sliderValue:"value"}}(),function(){function c(n){var t=this;v.call(t,n)}function l(n,t,r){i('<div class="msls-image-container"><div class="msls-image-border ui-btn-down-a ui-disabled"><img alt="Image" class="msls-image-inner"/><\/div><\/div>').appendTo(n);var u=fi(n,".msls-image-container"),f=u.children("div"),e=f.children("img");r.imageContainer=tt(n,u),r.borderElement=tt(n,f),r.imageElement=tt(n,e)}function a(i){var u=this,f=u.getView();u._element=ft(f,i.imageContainer,".msls-image-container"),u._border=ft(f,i.borderElement),u._image=ft(f,i.imageElement),(u.isHStretch||u.isVStretch)&&(n.length===0&&vt(gi,t),n.push(u)),h(this,!0),r.ui.Control.prototype._attachViewCore.call(this,i)}function y(){if(this.isHStretch||this.isVStretch){var i=n.indexOf(this);i>=0&&(n.length===1?(n=[],wi(gi,t)):n.splice(i,1))}}function p(n,t,i){var r=n.isHStretch?n._element.width():t,u=n.isVStretch?n._element.height():i,h=n.width,c=n.height,f=n.minWidth,o=n.minHeight,e=n.maxWidth,s=n.maxHeight;return n.widthSizingMode===ai.fixedSize?typeof h=="number"&&h>=0&&(r=h):(typeof f=="number"&&f>=0&&r<f&&(r=f),typeof e=="number"&&e>=0&&r>e&&(r=e)),n.heightSizingMode===ki.fitToContent&&t>0&&(u=i*r/t),n.heightSizingMode===ki.fixedSize?typeof c=="number"&&c>=0&&(u=c):(typeof o=="number"&&o>=0&&u<o&&(u=o),typeof s=="number"&&s>=0&&u>s&&(u=s)),n.widthSizingMode===ai.fitToContent&&i>0&&(r=t*u/i,typeof f=="number"&&f>=0&&r<f&&(r=f),typeof e=="number"&&e>=0&&r>e&&(r=e)),{width:r,height:u}}function u(n,t){var l=n._image,f=l.prop("naturalWidth")||80,e=l.prop("naturalHeight")||80,a=p(n,f,e),r=Math.floor(a.width),u=Math.floor(a.height),o=r,s=u,h=0,c=0,i=null;return(t||n._controlWidth!==r||n._controlHeight!==u)&&(n._controlHeight=u,n._controlWidth=r,n.scale==="Fit"?r*e>f*u?(o=u*f/e,h=(r-o)/2):(s=r*e/f,c=(u-s)/2):n.scale==="Fill"&&e>0&&f>0&&(r*e<f*u?(o=u*f/e,h=(r-o)/2):(s=r*e/f,c=(u-s)/2)),n.widthSizingMode===ai.fitToContent&&n.heightSizingMode===ki.fitToContent?(i={border:{},image:{}},n.minHeight>0&&(i.border["min-height"]=i.image["min-height"]=n.minHeight+"px"),n.minWidth>0&&(i.border["min-width"]=i.image["min-width"]=n.minWidth+"px"),n.maxHeight>0&&(i.border["max-height"]=i.image["max-height"]=n.maxHeight+"px"),n.maxWidth>0&&(i.border["max-width"]=i.image["max-width"]=n.maxWidth+"px")):i={border:{width:r.toString()+"px",height:u.toString()+"px"},image:{width:o.toString()+"px",height:s.toString()+"px","margin-left":h.toString()+"px","margin-top":c.toString()+"px"}}),i}function o(n,t){n._border.css(t.border),n._image.css(t.image),(n.widthSizingMode===ai.fitToContent||n.heightSizingMode===ki.fitToContent)&&n.getView().trigger("updatelayout")}function s(n,t){var i=u(n,!0);o(n,i),t||n._border.removeClass("ui-btn-down-a ui-disabled")}function h(n,t){var o,h,i;if(n._isViewCreated&&!!n._element){var r=n.src,e=n.data,c=n._border,u=n._image;!e.valueModel||(h=e.valueModel,i=h.propertyType,pr(i)&&(o=i,i=o.underlyingType),!i||i.id!==":Binary"&&i.id!==hi+":Image"||(r="data:image;base64,"+n.src)),t||c.addClass("ui-btn-down-a ui-disabled"),u.off("load").on("load",function(){u.attr("alt","Image"),s(n)}).off("error").on("error",function(){u.attr("alt",f(r===n.src?"image_invalid_url":"image_invalid_data")),s(n,!n.src)}).attr("src",r||null)}}function b(){h(this,!1)}var n=[],t=function(){for(var i,r,f=[],t=0,e=n.length;t<e;t++)i=n[t],i._element.is(":visible")?f.push(u(i,!1)):f.push(null);for(t=0;t<e;t++)r=f[t],r&&o(n[t],r)};e("ui.controls","Image",c,v,{controlName:"Image",src:w(b),scale:w(),isHStretch:w(),isVStretch:w(),width:w(),height:w(),minWidth:w(),minHeight:w(),maxWidth:w(),maxHeight:w(),widthSizingMode:w(),heightSizingMode:w(),_attachViewCore:a,_onDispose:y},{_fillTemplate:l,_skipEnhance:!0}),r.ui.controls.Image.prototype._propertyMappings={value:"src",properties:{scale:"scale",tap:"tap",width:"width",height:"height",minWidth:"minWidth",minHeight:"minHeight",maxWidth:"maxWidth",maxHeight:"maxHeight",widthSizingMode:"widthSizingMode",heightSizingMode:"heightSizingMode"},_isHStretch:"isHStretch",_isVStretch:"isVStretch"}}(),function(){function t(n){for(var o=n.getView(),f,r,i,e,u,t=o[0];t.parentNode;)t=t.parentNode;for(f=t!==document,r=n.children,i=0,e=r.length;i<e;i++)u=r[i].getView(),f?u.detach():u.remove()}var u=ot("WeightedRowHeight","RowsLayout"),n=ot("WeightedColumnWidth","ColumnsLayout");(function(){function n(n){var t=this;v.call(t,n)}function f(n,t,r){var f,e,l,o,s;if(t&&(o=t.children,o&&i.isArray(o))){for(n.addClass("msls-label-host msls-rows-layout "),f=[],e=0,l=o.length;e<l;e++){var h=o[e],y=e===0,a=e===l-1,c=h.properties[u],v="";!!c&&c!==1&&c>0&&(v=' data-msls-weight="'+c+'"'),f.push('<div class="msls-clear'),y?a||f.push(" msls-first-row "):a?f.push(" msls-last-row "):f.push(" msls-row "),h.horizontalAlignment===ns.right&&(h.widthSizingMode===ai.fitToContent||h.widthSizingMode===ai.fixedSize)?(f.push(h._isVStretch?" msls-vstretch":" msls-vauto"),f.push(' "'+v+'><div class="msls-halign-right '),f.push('"><\/div><div class="msls-clear"><\/div><\/div>')):f.push('"'+v+"><\/div>"),a&&f.push('<div class="msls-clear"><\/div>')}n[0].innerHTML=f.join(""),s=n[0].firstChild,i.each(o,function(n){var t,u=r[n]={};s.firstChild?(t=i(s.firstChild),u.containerPath=[0]):t=i(s),lr(t,this,u),s=s.nextSibling})}}function o(n){var t=this,e,o,u,f;(v.prototype._attachViewCore.call(t,n),t._tapElement=t._container=t.getView(),e=t.data,e)&&(u=e.children,u&&i.isArray(u))&&(o=t._container[0],f=o.firstChild,i.each(u,function(u){var o,e,s=n[u];o=ft(i(f),s.containerPath),f=f.nextSibling,e=new r.ui.controls.ContentItemPresenter(o),e.parent=t,e.data=this,e.attachView(s)}))}e("ui.controls","RowsLayout",n,v,{controlName:"RowsLayout",_onDispose:function(){t(this)},_attachViewCore:o},{_fillTemplate:f}),r.ui.controls.RowsLayout.prototype._propertyMappings={properties:{tap:"tap"}}})(),function(){function u(n){var t=this;v.call(t,n)}function f(t,r,u){var o,e,f,s,c,p,a,h,w,l,k,v,b=0,y=0;if(r&&(o=r.children,o&&i.isArray(o))){for(f=0,s=o.length;f<s;f++)c=o[f],b+=c.properties[n],y+=c._isHStretch?1:0;for(v=y===s,t.addClass("msls-columns-layout msls-overflow-columns "+(y===0||r._isUnderList&&v?"msls-static-layout":"")),e=[],f=0,s=o.length;f<s;f++)c=o[f],p=f===0,a=f===s-1,h=c.properties[n],e.push('<div class="'),p?a||e.push(" msls-first-column "):a?e.push(" msls-last-column "):e.push(" msls-column "),e.push('"'),v&&r._isUnderList&&(w=100*h/b,e.push('style="width:'+w+'%;"')),!!h&&h!==1&&h>0&&e.push(' data-msls-weight="',h+'"'),e.push('><\/div><div class="'+(a?"msls-clear":"msls-hempty")+'"><\/div>');for(t[0].innerHTML=e.join(""),f=0,l=t[0].firstChild;l;)f%2==0&&lr(i(l),o[f/2],u[f/2]={}),f++,l=l.nextSibling}}function o(n){var t=this,s,e,h,u,f,o;if((v.prototype._attachViewCore.call(t,n),h=t._container=t.getView(),s=t.data,s)&&(e=s.children,e&&i.isArray(e)))for(f=0,u=h[0].firstChild;u;)f%2==0&&(o=new r.ui.controls.ContentItemPresenter(i(u)),o.parent=t,o.data=e[f/2],o.attachView(n[f/2])),f++,u=u.nextSibling}e("ui.controls","ColumnsLayout",u,v,{controlName:"ColumnsLayout",_onDispose:function(){t(this)},_attachViewCore:o},{_fillTemplate:f}),r.ui.controls.ColumnsLayout.prototype._propertyMappings={properties:{tap:"tap"}}}()}(),function(){function d(n){var t,i,f,r=0,u=n.children.length,e=n.controlModel;if(n._isHStretch){if(e.id===":ColumnsLayout"){for(t=0;t<u;t++)i=n.children[t],f=i.properties[is],i._isHStretch&&r++;if(r>0&&r<u)return!0}for(t=0;t<u;t++)if(i=n.children[t],d(i))return!0}return!1}function ri(r){var l=r.data,a=l.children[0],o=a.properties[oa],e,f,s,h,u,c=r._ulElement.children(t);c.length&&((f=fa(r._ulElement[0]),f<=0||r._lastWidth===f)||(r._lastWidth=f,e=n.getComputedStyle(c[0]),u=parseFloat(e.marginLeft)+parseFloat(e.marginRight),u=isNaN(u)?0:u,o+=u,s=Math.max(Math.floor(f/(o+u)),1),h=Math.floor(f/s)-Math.ceil(u),r._globalStyle||(r._globalStyle=i('<style id="msls-global-list-style-'+r._uniqueName+'"><\/style>').appendTo(i("head"))),r._globalStyle.text("ul.msls-tile-list[data-msls-list-name='"+r._uniqueName+"'] li { width: "+h+"px; }")))}function ui(n,t){var r=n._collection,i;n._selectingElement=t,i=t.data(c),r.selectedItem=i,n._selectingElement=null,o(s.listSelectedItemChanged)}function ei(n){var r=n._ulElement,u=r[0];ls(r,n,"itemTap","ItemTapPromise",function(n){return i(n.target).closest(t).length}),r.keypress(function(n){n.keyCode===i.mobile.keyCode.ENTER&&i(n.target).trigger("vclick")})}function u(n,t){var r=n._loadingIndicator;t?r||(n._loadingIndicator=i("<div class='"+pa+"'><\/div>").insertAfter(n._ulElement)):!r||(r.remove(),n._loadingIndicator=null)}function nt(n){b(n,!1)}function tt(n){var t=n._collection,i=n.data.children.length-1,r=t.data;i<r.length?(b(n,!0),p(n,r.slice(i,i+t._loader._pageSize))):t.canLoadMore?(o(s.listViewLoadLoadMore),t.loadMore(!0)):(u(n,!1),nt(n))}function a(n){var i=n._collection,t,r;i&&i.state===h.idle&&(t=n._scrollHelper,r=n.data._isActivated&&n._ulElement.height()-t.viewTop<2*t.viewHeight,r?tt(n):nt(n))}function it(n){var t=n._ulElement;n.data.children.length===1?(l||(l="<div class='"+rs+"'>"+f("listView_no_items")+"<\/div>"),t.after(l)):t.next("."+rs).remove()}function rt(n){var t,r;return so(n.controlModel)?y(n.children).any(rt):(t=iu(n),t&&(r=we[t],i.isFunction(r)))?!r._skipEnhance:!0}function p(r,f,e,h){function yt(){wi(gi,yt),ni(function(){a(r)})}var l,w=f.length-1,y=r._ulElement,et=r.data,b=et.children[0],pt=e===0&&y.find(t).length!==0,d,p,g=r._rowTemplate,ot=r._rowTemplateData,v,nt,ct=i(".msls-empty",y),tt=[],at=[],ut,st=y[0],ht,ft;if(!y.data("listview")){k(r);return}if(b){if(w>=0){for(g||(ot=r._rowTemplateData={},g=r._rowTemplate=n.document.createElement("li"),v=i(g),d=i("<div><\/div>").appendTo(v),i('<div class="msls-clear"><\/div>').appendTo(v),v.attr("tabIndex","0"),v.attr("data-icon","false"),v.attr("data-msls","true"),v.addClass("ui-li ui-btn ui-btn-up-a"),lr(d,b,ot),r._itemHasAttachedLabel=!!v.find("."+fe).length,r._shouldEnhance=rt(b)),ut=document.createDocumentFragment(),l=0;l<=w;l++)at.push(kt.cloneContentItemTree(b,et,f[l])),p=g.cloneNode(!0),tt.push(p),ut.appendChild(p);for(ht=pt?st.firstChild:ct.length>0?ct[0]:null,ht?st.insertBefore(ut,ht):st.appendChild(ut),l=0;l<=w;l++)v=i(p=tt[l]),v.data(c,f[l]),d=i(p.firstChild),nt=new gt(d),nt.parent=r,nt.data=at[l],nt.attachView(ot);ft=i(tt),o(s.listViewLoadEnhanceView),r._shouldEnhance&&ft.trigger("create"),y.listview("refresh"),lt(bt,r)}o(s.listViewLoadApplyEnd),h?u(r,!1):w>=0?vt(gi,yt):ni(function(){a(r)}),it(r),tt.length>0&&(r._itemHasAttachedLabel&&be(ft),cr(ft,!0),ea&&!et._isVStretch&&(cr(),lt("LayoutUpdateIgnoreNotification")))}}function oi(n,i){if(i&&i.length!==0){for(var o=i.slice(0),f=n.data.children,u,s=[],h,e,r=1,c=f.length;r<c;r++)if(u=o.indexOf(f[r].data),u>-1&&(s.push(r),o.splice(u,1)),o.length===0)break;for(r=s.length-1;r>=0;r--)u=s[r],h=f[u],f.splice(u,1),e=h._view,e.getView().parents(t).remove(),e.parent=null,k(e),k(h);it(n)}}function si(n,t){if(!n._collectionPromise){var r=t.action,i=t.items;r===st.add?p(n,i,t.newStartingIndex,!0):t.action===st.remove&&oi(n,i)}}function b(n,t){lt(wt,{listView:n,isLoading:t})}function ut(n,t,i){n._collection&&(n._collectionPromise=null,o(s.listViewLoadDataLoaded),p(n,t,i))}function ft(n){var t=n._collection,i=t.state,r=n._ulElement;r.next("."+rs).remove(),u(n,!0),b(n,!0),i===h.loading?(n._collectionPromise=t.load(!0)).then(function(){ut(n,t.data)},function(){u(n,!1)}):(n._collectionPromise=t.loadMore(!0)).then(function(t){ut(n,t.items,t.startIndex)},function(){u(n,!1)})}function et(n){for(var i=n.data.children,r,t=i.length-1;t>=1;t--)r=i[t],k(r._view),k(r);i.length=1}function hi(n){var i=n._collection.state;i!==h.idle&&(i===h.loading&&(n._ulElement.children(t).remove(),et(n)),ft(n))}function ci(n){var f=n._ulElement,e=n._collection.selectedItem,r,u;n._collectionPromise||(e&&(r=n._selectingElement,n._selectingElement=null,r||f.children(t).each(function(){return(u=i(this),u.data(c)===e)?(r=u,!1):!0})),r&&r.hasClass(te)||(f.find(t+"."+te).removeClass(te),r&&r.addClass(te)))}function li(n){var t=n._collection,i;t&&(lu(t,"collectionchange",n,function(t){si(n,t.detail)}),of(t,"state",n,function(){hi(n)}),of(t,"selectedItem",n,function(){ci(n)}),o(s.listViewLoadStart),i=n._scrollHelper=new r.ui.controls.ScrollHelper(n._ulElement),i.addEventListener("scroll",function(){a(n)}),t.state!==h.idle?ft(n):(u(n,!0),ti(function(){tt(n)},1)))}var ht=ot("ShowHeader","RootCollectionControl"),t="li[data-msls='true']",c="__entity",ct='<div class="msls-vauto '+kl+'"/><div{0}><ul class="msls-listview" data-role="listview" data-inset="false" /><\/div>',l,pt="listViewInitialized",wt="listViewLoading",bt="listViewItemsAdded",kt=r.services.contentItemService,gt=r.ui.controls.ContentItemPresenter,h=r.VisualCollection.State,ii=0;e("ui.controls","ListView",function(n){v.call(this,n)},v,{controlName:"ListView",itemTap:w(),_attachViewCore:function(n){function c(){wi(gi,c),ni(function(){li(t)})}var t=this,f=t._ulElement=fi(t.getView(),"ul"),u=t.data,l=u.children[0],a=t._collection=u.value,e,o,y=u.controlModel,s,h;(e=u.screen.details.getModel(),this._uniqueName=e.name+"-"+u.name+"-"+ ++ii,t._isTileList=y.id===":TileList",o=l.properties[ts],t._isTileList&&(f.addClass("msls-tile-list"),f.attr("data-msls-list-name",t._uniqueName)),f.append('<div class="msls-clear msls-empty" />'),t._headerLabel||(t._headerLabel=new r.ui.controls.Text(i("."+kl,t.getView())),s=u.properties[ht],at(t._headerLabel.getView(),!s,dt),h=new r.data.DataBinding("data.displayName",t,"text",t._headerLabel,yt.oneWayFromSource),h.bind()),t._headerLabel.render(),a)&&(ei(t),vt(gi,c),t._isTileList&&o&&(t._layoutUpdatingCallback=function(n){var i=n.detail,r=i.first().closest("div.ui-page"),u=f.closest("div.ui-page");r.is(u)&&ri(t)},vt(di,t._layoutUpdatingCallback)),lt(pt,t),v.prototype._attachViewCore.call(t,n))},_customVisualStateHandler:function(n){n.state===g.loading&&(n.custom=!0)},_onBeforeTap:function(n){o(s.listItemClicked);var f=this._ulElement,u=f[0],t=n.target,r=t.parentNode;if(t!==u){while(r!==u)t=r,r=t.parentNode;t.getAttribute("data-msls")==="true"&&ui(this,i(t))}},_onDispose:function(){var n=this,t=n._headerLabel,i=n._globalStyle,r=n._layoutUpdatingCallback;t&&(k(t),n._headerLabel=null),i&&(i.remove(),n._globalStyle=null),r&&(wi(di,r),n._layoutUpdatingCallback=null),k(n._scrollHelper),n.itemTap=null,n._ulElement=null,n._collection=null,n._scrollHelper=null,et(n)}},{_fillTemplate:function(n,t){var u="",f=t.children[0];u=t._isVStretch?' class="msls-vstretch msls-vscroll':' class="msls-vauto',d(f)||(u+=" "+ga),u+='"',i(au(ct,u)).appendTo(n),n.addClass(da)}}),r.ui.controls.ListView.prototype._propertyMappings={properties:{itemTap:"itemTap"}}}(),function(){function y(){return i("<div/>")}function h(n){return a.text(n),n=a.html(),n.replace(/\n|\r\n/g,"<br>")}function g(c,a,p,w,b,g,nt,tt){function st(){var n;w&&Array.isArray(w)&&w.forEach(function(t){if(!!t&&!!t.text){n||(n=y().appendTo(it));i("<a href='#'>"+h(t.text)+"<\/a>").appendTo(n).buttonMarkup({theme:yi,icon:t.icon,iconpos:"left"}).on("vclick",function(n){o(s.modalViewCloseStart),ft=t.result,it.popup(f),n.preventDefault()})}})}function ct(){a&&i("<h2>").addClass("msls-message-box-header").html(h(a)).appendTo(it),g?g(it):p&&y().addClass("msls-message-box-message").html(h(p)).appendTo(it),st(),i("<div id='"+hu+"' tabIndex='0'><\/div>").appendTo(it),it.trigger("create")}function at(){u(it,e,!0),ve(it.parent(),hu),o(s.modalViewShowEnd),lt(k)}function et(){tt(ft),n=null,o(s.modalViewCloseEnd),lt(l)}function vt(){u(it,e,!1),it.off(r).off(t),it.remove(),it=null,nt&&nt(),ti(function(){if(rt){rt.one(r,et);var n=rt.attr("data-msls-name");n?ht.showPopup(n):rt.popup(v)}else et()})}function ot(){it.removeClass(dt).popup({overlayTheme:yi,positionTo:"window",theme:yi}).on(r,at).on(t,vt).popup(v)}var ut=i.mobile.popup.active,rt=ut&&ut.element,it,ft=b;er(!0);try{n=it=i(gt[d]).appendTo(c),ct()}finally{pi(!1),cr(it)}if(rt){rt.one(t,function(){ti(ot,1)});rt.popup(f)}else ot()}function w(){return!!n&&!!n[e]}function b(){w()&&(o(s.modalViewCloseStart),n.popup(f))}var k="modalViewShown",l="modalViewClosed",a=i("<pre/>"),d="modalViewTemplate",t="popupafterclose",r="popupafteropen",f="close",v="open",e="__canClose",n;ru={show:function(t){function h(){g(f,t.title,t.message,t.buttons,e,t.buildContentCallback,t.disposeContentCallback,r)}o(s.modalViewShowStart);var r,u=new c.Promise(function(n){r=n}),f=i.mobile.activePage,e=t.defaultResult||p.none;return f.length!==1?(r(e),u):(n?(ff(l,h),b()):h(),u)},close:b,isOpen:w},pt._modalView=ru}(),function(){function c(n){var t=n.data;return!t||!t.isEnabled||t.isReadOnly}function nt(n,t,r){var u=i('<a class="id-element" tabIndex="0" data-role="button" data-icon="arrow-d" data-mini="true" data-iconpos="right" data-theme="'+yi+'" />').appendTo(n),f=i("<div><\/div>").appendTo(u),e=t.children[0];r.idElement=tt(n,u),r.itemViewElement=tt(n,f),!e||lr(f,e,r.itemViewData={})}function it(n){var t=this,f=t._element=ft(t.getView(),n.idElement,".id-element"),e=t.data.children[0],u,o=ft(t.getView(),n.itemViewElement);v.prototype._attachViewCore.call(t,n);f.on("vclick",function(n){f.focus(),et(t),n.preventDefault()});(f.keypress(function(n){n.keyCode===i.mobile.keyCode.ENTER&&i(n.target).trigger("vclick")}),e)&&(u=new r.ui.controls.ContentItemPresenter(o),u.parent=t,u.data=e,u.attachView(n.itemViewData))}function rt(n){n.state===g.loading&&(n.custom=!0)}function ut(){var n=this,t=n._visualCollection;!t||n.data.choicesSource||k(t)}function et(u){if(!c(u)){var e=u.data,ht=e.model,it=e.children[0],w=u.detailsProperty,rt,h=u._visualCollection,ut,tt,ft,nt,et,g,v,ot,st=!!w.value&&(!w.entity||fc(w)==="ZeroOrOne");h||(h=e.choicesSource,h||(ut=w.getModel(),tt=ut.propertyType,ft=e.screen.details,y(ft.dataWorkspace.details.properties.all()).each(function(n){return y(n.value.details.properties.all()).each(function(n){return n.getModel().entityType===tt&&(nt=n.value),!nt}),!nt}),rt=new t(nt,eo(tt)),h=new r.VisualCollection(e.screen.details,rt),h.load()),u._visualCollection=h),n||(et=ro(function(n){return n.id===":List"}),n={kind:"Collection",view:et[0]}),n.name=ht.name+"AutoGeneratedListView",n.displayName=it.displayName,n.childContentItems=[it.model],v=d.createContentItemTree(e.screen,n,e),e.children.pop(),v.__value=h,v.__details=ot=new s(h),v._dictionary.setValue(a,!1),st&&!o&&(o=f("modalPicker_clear")),ru.show({buildContentCallback:function(n){n.addClass("msls-modalpicker"),ss.options.enableModalScrollRegions&&n.addClass(nf);var f=i('<div class="msls-vauto"/>').appendTo(n),s,c=i("<div>").appendTo(n),t;st&&(s=i('<a href="#"/>').on("touchend",function(){}).on("vclick",function(n){n.preventDefault(),w.value=null,ru.close()}).appendTo(i('<div class="msls-modal-picker-clear-container msls-leaf"/>').appendTo(f)).text(o)),f.append(i('<div class="msls-control-header"/>').append(i('<div class="msls-text-container"/>').append(i('<span class="id-element"/>').text(e.displayName)))),g=new l(c),g.data=v,g.render(),t=g.children[0],t.itemTap=new r.BoundCommand("_onItemTap",u,su(h,[{binding:"selectedItem"}])),bt(t,t.itemTap),lt(p,{modalPicker:u,listView:t,clearLink:s})},disposeContentCallback:function(){v.parent=null,k(g),k(v),k(ot)}}).then(function(){lt(b,{modalPicker:u})})}}function st(n){c(this)||(this.detailsProperty.value=n,ru.close())}var t,s,l=r.ui.controls.ContentItemPresenter,a=ot("ShowHeader","RootCollectionControl"),p="modalPickerPopupOpened",b="modalPickerPopupClosed",d=r.services.contentItemService,n,o;e(r,"ModalPickerQueryObjectLoader",function(n,t){ku.call(this),u(this,"_baseQuery",n),t&&u(this,"_disableTotalCount",!0)},ku,{_getAddedEntities:function(){return this._baseQuery._addedEntities}}),t=r.ModalPickerQueryObjectLoader,wf(t),e(r,"ModalPickerListViewContentItemDetails",function(n){var t=this;u(t,"_visualCollection",n),of(n,"loadError",t,function(){t.dispatchChange("loadError")})},null,{loadError:h(null,function(){return this._visualCollection.loadError}),_onDispose:function(){u(this,"_visualCollection",null)}}),s=r.ModalPickerListViewContentItemDetails,e("ui.controls","ModalPicker",function(n){var t=this;v.call(t,n)},v,{controlName:"ModalPicker",item:w(null,null,!0),_attachViewCore:it,_customVisualStateHandler:rt,_onItemTap:st,_onDispose:ut},{_fillTemplate:nt}),r.ui.controls.ModalPicker.prototype._propertyMappings={value:"item",details:"detailsProperty"},r.ui.controls.ModalPicker.prototype._editableProperties={item:"value"}}(),function(){function h(t){n.call(this,t),this._valueChangingText=!1,this._symbol=null}function c(){var t=this.text,h=rt.culture().numberFormat,i=h.currency,c,r=this.data,l,n,e,s;t?(e=this._symbol,e||(this._isoSymbol=a(r),s=o[this._isoSymbol],e=this._symbol=s?s:u),c=i.symbol,i.symbol=e,n=rt.parseFloat(t),isNaN(n)&&(i.symbol=this._isoSymbol,n=rt.parseFloat(t)),i.symbol=c,isNaN(n)||t.indexOf(h.percent.symbol)!==-1?(l=new ii(r.details,f("validation_invalidValue_money")),ne(r,l)):(du(r),this.numericValue=n)):this.numericValue=null}function l(){this._valueChangingText||this._setValueFromText(),n.prototype._onTextChanged.call(this)}function s(n){var i=n.details.getModel(),r,t,u=hi+":@MoneyProperties";return t=ut(i,u),t||(r=lf(i.propertyType),t=ut(r,u)),t}function a(n){var r="USD",i;return n.details&&(i=s(n),i&&(r=i.isoCurrencySymbol!==t?i.isoCurrencySymbol:r)),r.toUpperCase()}var n=r.ui.controls.TextBox,i={none:0,symbol:1,isoSymbol:2},u="¤",o={AED:"د.إ.‏",ALL:"Lek",AMD:"դր.",ARS:"$",AUD:"$",AZN:"ман.",BGL:"¤",BHD:"د.ب.‏",BND:"$",BOB:"$b",BRL:"R$",BYB:"¤",BZD:"BZ$",CAD:"$",CHF:"Fr.",CLP:"$",CNY:"¥",COP:"$",CRC:"₡",CZK:"Kč",DKK:"kr.",DOP:"RD$",DZD:"د.ج.‏",EEK:"kr",EGP:"ج.م.‏",EUR:"€",GBP:"£",GEL:"Lari",GTQ:"Q",HKD:"HK$",HNL:"L.",HRK:"kn",HUF:"Ft",IDR:"Rp",ILS:"₪",INR:"रु",IQD:"د.ع.‏",IRR:"ريال",ISK:"kr.",JMD:"J$",JOD:"د.ا.‏",JPY:"¥",KES:"S",KGS:"сом",KRW:"₩",KWD:"د.ك.‏",KZT:"Т",LBP:"ل.ل.‏",LTL:"Lt",LVL:"Ls",LYD:"د.ل.‏",MAD:"د.م.‏",MKD:"ден.",MNT:"₮",MOP:"MOP",MVR:"ރ.",MXN:"$",MYR:"RM",NIO:"C$",NOK:"kr",NZD:"$",OMR:"ر.ع.‏",PAB:"B/.",PEN:"S/.",PHP:"Php",PKR:"Rs",PLN:"zł",PYG:"Gs",QAR:"ر.ق.‏",ROL:"lei",RSD:"Дин.",RUR:"р.",SAR:"ر.س.‏",SEK:"kr",SGD:"$",SIT:"€",SKK:"€",SYP:"ل.س.‏",THB:"฿",TND:"د.ت.‏",TTD:"TT$",TWD:"NT$",UAH:"₴",USD:"$",UYU:"$U",UZS:"сўм",VEB:"Bs. F.",VND:"₫",YER:"ر.ي.‏",YTL:"ر.ي.‏",ZAR:"R",ZWD:"Z$"};as=function(n,r){var a="",h=2,v=rt.culture().numberFormat.currency,p,c=i.symbol,e="USD",l=!0,f,y;return(r=yf(r),r===null||r===t)?"":(!n.details||(f=s(n),f&&(h=f.decimalDigits,e=f.isoCurrencySymbol!==t?f.isoCurrencySymbol:e,c=f.symbolMode!==t?f.symbolMode:c,l=f.isFormatted!==t?f.isFormatted:l),l&&(c===i.isoSymbol?e=e.toUpperCase():c===i.symbol?(y=o[e.toUpperCase()],e=y?y:u):c===i.none&&(e=""))),(h===t||h===null)&&(h=pf(r)),l?(p=v.symbol,v.symbol=e,a=rt.format(r,"c"+h.toString()),v.symbol=p):a=rt.format(r,"n"+h.toString()),a)},e("ui.controls","MoneyEditor",h,n,{controlName:"MoneyEditor",numericValue:w(function(n){try{this._valueChangingText=!0,this.text=as(this.data,n)}finally{this._valueChangingText=!1}},null,!0),_onTextChanged:l,_setValueFromText:c},{_fillTemplate:n._fillTemplate,_isFormElement:!0}),r.ui.controls.MoneyEditor.prototype._propertyMappings={value:"numericValue",properties:{placeholderText:"placeholderText"}},r.ui.controls.MoneyEditor.prototype._editableProperties={numericValue:"value"}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}e("ui.controls","MoneyViewer",n,r.ui.controls.Text,{controlName:"MoneyViewer",numericValue:w(function(n){this.text=as(this.data,n)})},{_fillTemplate:r.ui.controls.Text._fillTemplate}),r.ui.controls.MoneyViewer.prototype._propertyMappings={value:"numericValue",properties:{tap:"tap"}}}(),function(){function n(n){r.ui.Control.call(this,n)}e("ui.controls","NoControl",n,r.ui.Control,{controlName:"NoControl"}),r.ui.controls.NoControl.prototype._propertyMappings={}}(),function(){function i(t){n.call(this,t),this._valueChangingText=!1}function u(){var t=this.text,u=rt.culture().numberFormat,s=u.percent.symbol,i=this.data,e,n,r,o=2,h=null;t?(n=rt.parseFloat(t),isNaN(n)||t.indexOf(u.currency.symbol)!==-1?(e=new ii(i.details,f("validation_invalidValue_percent")),ne(i,e)):(du(i),r=n.toString().split("."),!r[1]||(o+=r[1].length),this.numericValue=(n*.01).toFixed(o))):this.numericValue=null}function o(){this._valueChangingText||this._setValueFromText(),n.prototype._onTextChanged.call(this)}var n=r.ui.controls.TextBox;vs=function(n,i){var r,f,o,u,e;return(i=yf(i),i===null||i===t)?"":(!n.details||(f=n.details.getModel(),e=hi+":@FormatParameter",u=ut(f,e),u||(o=lf(f.propertyType),u=ut(o,e)),u&&(r=u.decimalDigits)),(r===t||r===null)&&(r=pf(i)-2,r<0&&(r=0)),rt.format(i,"p"+r.toString()))},e("ui.controls","PercentEditor",i,n,{controlName:"PercentEditor",numericValue:w(function(n){try{this._valueChangingText=!0,this.text=vs(this.data,n)}finally{this._valueChangingText=!1}},null,!0),_onTextChanged:o,_setValueFromText:u},{_fillTemplate:n._fillTemplate,_isFormElement:!0}),r.ui.controls.PercentEditor.prototype._propertyMappings={value:"numericValue",properties:{placeholderText:"placeholderText"}},r.ui.controls.PercentEditor.prototype._editableProperties={numericValue:"value"}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}e("ui.controls","PercentViewer",n,r.ui.controls.Text,{controlName:"PercentViewer",numericValue:w(function(n){this.text=vs(this.data,n)})},{_fillTemplate:r.ui.controls.Text._fillTemplate}),r.ui.controls.PercentViewer.prototype._propertyMappings={value:"numericValue",properties:{tap:"tap"}}}(),function(){function n(n){r.ui.controls.TextBox.call(this,n)}function t(n,t,r){var f='<input type="tel" class="id-element" data-mini="true" />',u=i(f).appendTo(n);t.maxLength&&ye(u,t.maxLength),r.idElement=tt(n,u)}e("ui.controls","PhoneNumberEditor",n,r.ui.controls.TextBox,{controlName:"PhoneNumberEditor"},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.PhoneNumberEditor.prototype._propertyMappings={stringValue:"text",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}function t(n,t,r){i('<div class="msls-text-container"><a class="id-element"><\/a><\/div>').appendTo(n),r.idElement=tt(n,fi(n,".id-element"))}function u(){var t=this,i=t.data,n=t.text;t._isViewCreated&&(!i.details||n===""||(n=t._getFormattedText(n)),this._textElement.text(n),this._textElement.attr("href","tel:"+n))}function f(n){var a=this,f=a.data,i=f.details.getModel(),u=i.propertyType,h,t,c=hi+":@PhoneNumberValidation",r,l,e,s;if(i=f.details.getModel(),pr(u)&&(h=u,u=h.underlyingType),i[c]||(i=u),t=ut(i,c),!!t&&!!t.formats)for(t.__regexparray||ao(t),r=0,l=t.__regexparray.length;r<l;r++)if(e=t.__regexparray[r].exec(f.value),e){s=o(t,e,r),s!==""&&(n=s);break}return n}function o(n,t,i){for(var k,s="",h="",c="",d="",u="",l=0,a=0,b=0,v=0,y=0,p=0,e=n.__formatarray[i].replace(/[^ACN]/gi," ").replace(/\s{2,}/g," ").replace(/^\s*/,"").replace(/\s*$/,""),o,f,g,r=0,w=e.length;r<w;r++)k!==e[r]&&(e[r]==="C"?l++:e[r]==="A"?a++:e[r]==="N"&&b++,k=e[r]);for(r=0;r<l;r++)s+=t[1+r];for(r=0;r<a;r++)h+=t[1+l+r];for(r=0;r<b;r++)c+=t[1+l+a+r];for(r=l+a+b+1,t[r]&&(d+=" "+t[r]+" "+t[r+1]),r=0,w=n.__formatarray.length;r<w;r++){for(o=!0,f=0,g=n.__formatarray[r].length;f<g;f++)if(n.__formatarray[r][f]==="C"){if(v===s.length){o=!1;break}u+=s[v++]}else if(n.__formatarray[r][f]==="A"){if(y===h.length){o=!1;break}u+=h[y++]}else if(n.__formatarray[r][f]==="N"){if(p===c.length){o=!1;break}u+=c[p++]}else u+=n.__formatarray[r][f];if((!s.length||v===s.length)&&(!h.length||y===h.length)&&(!c.length||p===c.length)||(o=!1),o){u+=d;break}else v=0,y=0,p=0,u=""}return u}e("ui.controls","PhoneNumberViewer",n,r.ui.controls.Text,{controlName:"PhoneNumberViewer",_refreshView:u,_getFormattedText:f},{_fillTemplate:t})}(),function(){function u(t,i,r){if(r.call(this,t,i),t==="change")switch(i){case"task":this.refreshView();break;case"activeTab":n(this);break;case"areButtonsVisible":cr()}}function f(n){i('<ul class="msls-tabs-container" data-role="controlgroup" data-type="horizontal" />').appendTo(n)}function o(n){var t=this;v.prototype._attachViewCore.call(t,n),this.refreshView()}function s(){var t=this,o=t.task,f,u,e,s;t._isViewCreated&&o&&(f=fi(t.getView(),".msls-tabs-container"),f.empty(),t._buttons=[],t._contentItems=[],s=o.screen.details.pages,i.each(o.tabCommands,function(n,o){var c=i('<div class="subControl" control="Button"/>'),l=i("<li class='"+fv+"'><\/li>").append(c),h=new r.ui.controls.Button(c),a=y(s).first(function(n){return n.name===o.name});h.render(),t._buttons.push(h),t._contentItems.push(a),h.data=o,l.data("msls-tabName",o.name),new r.data.DataBinding("data.displayName",h,"content",h,yt.oneWayFromSource).bind(),new r.data.DataBinding("data.command",h,"tap",h,yt.oneWayFromSource).bind(),new r.data.DataBinding("tap.canExecute",h,"isEnabled",h).bind(),u=new r.ui.helpers.ObservableVisibility(h.getView()),e=new r.data.DataBinding("isVisible",a,"value",u,yt.oneWayFromSource),e.bind(),bt(h,u),h.parent=t,f.append(l)}),u=new r.ui.helpers.ObservableVisibility(t.getView()),e=new r.data.DataBinding("areButtonsVisible",t,"value",u,yt.oneWayFromSource),e.bind(),bt(t,u),t._ul=f,n(t))}function n(n){var e=n.data,t,r,u,f;if(e)for(n._ul&&i("."+fs,n._ul).removeClass(fs),t=0;t<n._buttons.length;t++)r=n._buttons[t],u=r.data,!u||u.name!==n.activeTab||(f=r.getView().parent(),f.addClass(fs))}function c(){for(var u=!this.task.screen.details.rootContentItem.properties[t],i=0,r,n=0;n<this._contentItems.length;n++)r=this._contentItems[n],r.isVisible&&i++;return u&&i>1}var t=ot("HideTabTitles","Screen");e("ui.controls","ScreenTabs",function(n){this._buttons=[],this._contentItems=[],v.call(this,n)},r.ui.Control,{controlName:"ScreenTabs",_attachViewCore:o,refreshView:s,dispatchEvent:ge(u),activeTab:h(),hideTabTitles:h(),task:h(),areButtonsVisible:wt(c)},{_fillTemplate:f})}(),function(){function kt(){n.location.replace(n.location.href.replace(/#.*/,""));return}function uu(){var r=this;t=i("body"),t.attr("data-theme",yi),i.each(bi,function(n,t){i.mobile.transitionHandlers[t]=bf});i(n).on("pagebeforechange",function(n,t){lu(r,n,t)}).on("pagechange",function(n,t){au(r,n,t)}).on("beforeunload",function(){if(ai&&ht.anyNavigationUnitHasChanges())return f("shell_unsaved_message")});i(n).on("updatelayout",function(){i.mobile.popup.active&&i(n).trigger("resize")});vt(di,function(){if(ht.activeNavigationUnit){var n=ht.activeNavigationUnit;n.popup&&pr(r,w(r,n))}}),vt(bo,function(){oi(r)}),vt(kf,function(){si(r)}),vt(rl,function(n){n.detail.name==="saveChanges"&&(yt.addClass(ci),oi(r,50))}),vt(ul,function(n){n.detail.name==="saveChanges"&&(si(r),yt.removeClass(ci))}),vt("modalViewShown",function(){wt++}),vt("modalViewClosed",function(){wt--,b(r)}),vt(di,function(){var n=i(".ui-page.ui-page-active"),f=nr(r,n[0].id);if(!f.popup){var e=i("div[data-role='header']",n),o=i("div[data-role='footer']",n),t=e.outerHeight().toString()+"px",u=o.outerHeight().toString()+"px";n[0].style.paddingTop!==t&&(n[0].style.paddingTop=t),n[0].style.paddingBottom!==u&&(n[0].style.paddingBottom=u)}}),fu()}function fu(){et=i("<div id='"+wa+"' class='"+ct(el,ue,dt)+"'><\/div>").appendTo(t),h=i("<div id='"+ba+"' class='"+ct(el,ue,dt)+"'><div class='msls-progress'><div class='"+ol+"'><\/div><\/div><\/div>").appendTo(t),yt=i("."+ol,h)}function eu(n){var t=this;return new c.Promise(function(i,r){wr().then(function(){ou(t,n,i,r)})})}function ou(n,t,r,u){function c(r){var u,f;return o(s.createPageStart),t.popup&&(u=n._pageIdMapping[i.mobile.activePage[0].id],r.backgroundPageId=u.backgroundPageId?u.backgroundPageId:i.mobile.activePage[0].id),f=bu(n,r),o(s.createPageEnd),ii(r),f}var f,e,l,h,a,v;if(n._initializeMobileOnce&&n.initialize(),t===ht.activeNavigationUnit){lf(n,t,r);return}if(e=w(n,t),e){i("#"+e,i.mobile.pageContainer).length===0&&fi(n,e,t),yu(n,i.mobile.activePage[0].id,e,!1,function(){var t=n._pageIdMapping[e];ii(t),r(),o(s.navigationBackEnd)});return}l="",f=sr(n,l),t.screen.details._pageId||(t.screen.details._pageId=f),n._firstPageId||(n._firstPageId=f),h={pageId:f,unit:t},n._pageIdMapping[f]=h,n._pageIdToIndexMapping[f]=t.index,n._initializeMobileOnce?(n._initializeMobileOnce=!1,a=c(h),a.css("opacity",0),g(n,f).then(function(){te(n,i.mobile.activePage,function(){r()})},function(n){u(n)}),i.mobile.initializePage()):(v=t.popupDepth>1?he:t.popup?tu:es,vu(n,function(){return c(h)},h,v,function(){pu(n,iu),r()},u))}function su(n){var t=this,i=w(t,n);return new c.Promise(function(n){g(t,i).then(function(){n(),o(s.navigationBackEnd)})})}function ki(n){n._isShellIntroducedNavigation=!0}function gi(n){return new c.Promise(function(t){n._completeOnHashChange=t})}function cu(n,t){var i=t.replace(/^[^#]*#/,"").replace(/&.*$/,"")||n._firstPageId;return{id:i,unit:nr(n,i)}}function nr(n,t){var i=n._pageIdMapping[t];return i?i.unit:null}function lu(n,t,r){if(i.mobile.activePage&&(ru.isOpen()&&ru.close(),typeof r.toPage=="string")){var f=cu(n,r.toPage),u=f.id,e=f.unit;i("#"+u,i.mobile.pageContainer).length===0&&(e?fi(n,u,e):du(n,u))}}function au(n,t,r){var u=i.mobile.activePage,f=r.options.fromPage,e;!!f&&f.is("."+yl)&&f.remove(),!!u&&u.hasClass(dl)&&ve(u,hu),n._completeOnHashChange&&(e=n._completeOnHashChange,n._completeOnHashChange=null,ni(function(){e()})),bi.indexOf(r.options.transition)<0&&lt("BrowserNavigationPromise",new c.Promise(function(n){n()}))}function tr(n,t){if(n._isShellIntroducedNavigation)return n._isShellIntroducedNavigation=!1,null;if(a){ff(kf,function(){a||wo(f("shell_conflicting_operations")).then(function(){kt()})});return}var r=t[0].id,i=n._pageIdMapping[r],u,e=null;return i&&(ii(i),u=i.unit,ht.navigationInProgress||(e=ht.synchronizeAfterBrowserNavigation(u))),lt("BrowserNavigationPromise",g(n,r)),e}function vu(n,r,u,f,e,h){er(),b(n);var l=i.mobile.activePage;c.Promise.join([]).then(function(){return(o(s.transitionPrepare),l.addClass(os),t.addClass(f+" "+ce),f===tu)?(at(et,!0,nu,dt),rt(1)):rt(167)}).then(function(){return f===tu?rt(1):null}).then(function(){var a=r(),u=[];l.removeClass(gu),t.removeClass(ce),u.push(g(n,a[0].id)),u.push(gi(n)),c.Promise.join(u).then(function(){e()},function(n){h(n)}),pi(),o(s.changePageStart),ki(n),i.mobile.changePage(a,{transition:f,reverse:!1}),o(s.changePageEnd)}).then(null,function(n){h(n)})}function g(t,r){return new c.Promise(function(t,u){i(n).one("pageshow",function(){var n=i.mobile.activePage;!n||n.length!==1||n[0].id!==r?u(f("shell_nav_failed")):(t(),o(s.navigationEnd))})})}function w(n,t){var r;return i.each(n._pageIdMapping,function(n,i){i.unit===t&&(r=n)}),r}function yu(t,i,r,u,e){var l=t._pageIdToIndexMapping[i],a=t._pageIdToIndexMapping[r],h;if(typeof l=="undefined"||typeof a=="undefined"){kt();return}a!==l?(h=[],h.push(gi(t)),u?t._stopHashChangePropagationOnce=!0:h.push(g(t,r)),c.Promise.join(h).then(function(){var i=n.location.hash.replace(/^#/,"")||t._firstPageId;i===r?ni(function(){e()}):e(f("shell_nav_failed"))},function(n){e(n)}),o(s.goUrlStart),ki(t),n.history.go(a-l),o(s.goUrlEnd)):e()}function pu(n,t){var r=-1,f,u,e;t=t||1,ht.activeNavigationUnit.popupDepth||!i.mobile.activePage||(f=n._pageIdToIndexMapping[i.mobile.activePage[0].id],r=f-t),r>0&&(u=ht.navigationStack[r],e=w(n,u),i("#"+e,i.mobile.pageContainer).remove(),u.cleanPageUiControls())}function wu(n){var t=w(this,n),o=this._pageIdMapping[t],u,r,f,e;t&&(delete this._pageIdMapping[t],u=i("#"+t,i.mobile.pageContainer),u.remove()),r=o.unit.task,f=no(this._pageIdMapping).filter(function(n){return n.unit.task===r}),k(n),f.length||(e=r.screen,k(r),k(e.details))}function ii(n){i(".ui-page").removeClass(bl);var t=n.backgroundPageId;t&&i("#"+t).addClass(bl),n.unit.popup||at(et,!1,nu,dt)}function bu(n,t){var r=t.pageId,i=t.unit,f=t.unit.contentItemTree.kind===it.tab;return i.popup?cf(n,r,i):fi(n,r,i)}function ri(){var n=i("<div data-role='page'><\/div>");return n.attr("data-theme",yi),n}function ui(n,t){n.attr("id",t),n.attr("data-url",t)}function ku(n,t){var o=i("<div class='msls-task msls-header' data-role='header' data-position='fixed' data-update-page-padding='false' data-tap-toggle-blacklist='"+kr+"'><\/div>"),e=new r.ui.controls.ContentControl(o),f=gt[hv],u=yr(t),s,h,c;s=u.showSaveDiscard?"screenSaveDiscardTemplate":u.showOk?"screenOkTemplate":u.showOkCancel?"screenOkCancelTemplate":null,h=u.showLogo?"screenLogoTemplate":u.showBackClose?"screenBackTemplate":null,c=u.showLogOut?"screenLogoutTemplate":null,f=f.replace("BUTTONS-PLACEHOLDER",gt[s]||"").replace("LOGO-BACK-PLACEHOLDER",gt[h]||"").replace("LOGOUT-PLACEHOLDER",gt[c]||""),f=ir(f),e.dataTemplate=f,e.data=t,e.render(),t.registerPageUiControl(e);i("."+gl+" img",o).on("error",function(){i("."+gl).addClass(dt)});return o}function fi(n,r,u){var f=ri();ui(f,r);var s=ku(n,u).appendTo(f),o=i(gt[wl]).appendTo(f),e=i(gt[av]).appendTo(f),h=s.add(e);o.focusin(function(n){h.each(function(){var t=i(this).data("mobile-fixedtoolbar");!!t&&i(n.target).is(t.options.hideDuringFocus)&&i(this).fixedtoolbar("hide")})});e.on("updatelayout",function(){var t=f[0].style,i=e.outerHeight().toString()+"px";t.paddingBottom!==i&&(t.paddingBottom=i)});return f.appendTo(t),rr(n,f,o,u),ei(f,u),f}function du(n,r){var u=ri().addClass(yl);return ui(u,r),i("<h2 class='msls-page-expired-message'>"+f("shell_page_expired_message")+"<\/h2>").appendTo(u),u.appendTo(t)}function ei(n,t){var r=t.popup||t.contentItemTree._isVStretch,u=i(".msls-content",n);t.popup||at(n,r,ie,re),at(u,r,ie+" "+nf,re),r||(n[0].style.height="",u[0].style.height="")}function ir(n){return n.replace("TAB-BUTTONS-PLACEHOLDER",gt[cv])}function rr(n,t,i,r){if(fr(n,t,r,!1).addClass(oe),or(n,t,r,!1).addClass(se),!r.popup){if(!vi){vi=!0;var u=vr(),f=y(u.globalItems).first(function(n){return n[":@SharePointEnabled"]});f&&(bt=pf())}bt&&wf(t,r,bt)}}function ur(n,t,i,u){o(s.createPageControlsStart);var f=new r.ui.controls.ContentItemPresenter(i);return f.data=t,f.attachView(u),o(s.createPageControlsEnd),f}function fr(n,t,r,u){var c=r.pageName,l=i("."+ll,t),a=r.contentItemTree,v=a.model,o=r.contentItemTree,e,f,s,h;return e=hi(v,"__tabCache",function(n){var t=i("<div class=''><\/div>").addClass(al).attr(ut,c);return lr(t,o,n),t}),f=e.$element,s=e.templateData,f.appendTo(l),h=ur(n,o,f,s),r.registerPageUiControl(h),u&&f.trigger("create"),f}function or(n,t,u,f){for(var l=u.pageName,a=i("."+vl,t),y=u.contentItemTree,p,w,h=u.contentItemTree.commandItems||[],e=i(gt[yv]).appendTo(a).attr(ut,l),o=0;o<h.length;o++){var v=h[o],c=i("<div><\/div>"),s=new r.ui.controls.ContentItemPresenter(c);s.data=v,s.render(),e.append(c),u.registerPageUiControl(s)}return f&&e.trigger("create"),e}function tf(n){var t=ri().addClass(dl),u=i("<div class='msls-dialog-frame'><\/div>").appendTo(t),r=i("<div class='msls-dialog-inner-frame ui-body-"+yi+" msls-rows-layout + msls-fixed-height'><\/div>").appendTo(u),f=i("<div class='msls-header msls-vauto msls-hauto' data-role='header'><\/div>").appendTo(r),e=i(gt[wl]).appendTo(r),o;return o=i(gt[vv]).appendTo(r),n.headerElement=tt(t,f),n.pageContentContainerElement=tt(t,e),i("<div id='"+hu+"' tabIndex='0'><\/div>").appendTo(t),t}function ef(n,t){var r=i(gt[dr]).attr("data-theme",yi),u=i(".msls-popup-content",r);return lr(u,n,t),t.contentContainerElement=tt(r,u),r}function of(n){return tf(n)}function sf(n,t,i){var s=ft(n,i.headerElement),f=yr(t),e,o,u;o=f.showSaveDiscard?"dialogSaveDiscardTemplate":f.showOk?"dialogOkTemplate":f.showOkCancel?"dialogOkCancelTemplate":f.showBackClose?"dialogCloseTemplate":null,e=gt[lv].replace("BUTTONS-PLACEHOLDER",gt[o]||""),e=ir(e),u=new r.ui.controls.ContentControl(s),u.dataTemplate=e,u.data=t,u.render(),t.registerPageUiControl(u)}function hf(n,t,r,u){var l=u.model,e,f,o,s,h,c;return e=hi(l,"__popupCache",function(n){return ef(u,n)}),f=e.$element,o=e.templateData,s=i(ev,r),f.appendTo(s).attr("id",t).attr(li,u.name),h=ft(f,o.contentContainerElement),c=ur(n,u,h,o),ht.activeNavigationUnit.registerPageUiControl(c),i("<div id='"+hu+"' tabIndex='0'><\/div>").appendTo(f),f}function cf(n,i,r){var f,u,e,o;return f=hi(n,"_blankScreenDialogFrameCache",function(n){return of(n)}),u=f.$element,e=f.templateData,sf(u,r,e),ui(u,i),u.appendTo(t),o=ft(u,e.pageContentContainerElement),rr(n,u,o,r),ei(u,r),u}function sr(n,t){for(var i,u=4294967296,r;!i||i in n._pageIdToIndexMapping;)r=Math.floor(Math.random()*6+10).toString(16),i=t+r+Math.floor(Math.random()*u).toString(16);return i}function lf(n,t,r){var s=t.pageName,l=n._pageIdMapping[w(n,t)],u=i("#"+l.pageId),h=y(i("."+al,u).toArray()).where(function(n){return i(n).attr(ut)===s}).first(),c=y(i("."+sv,u).toArray()).where(function(n){return i(n).attr(ut)===s}).first(),f=!1,e,o;if(h)e=i(h);else{er();try{e=fr(n,u,t,!0),f=!0}finally{pi(!1)}}if(c)o=i(c);else{er();try{o=or(n,u,t,!0),f=!0}finally{pi(!1)}}var a=i("."+oe,u),v=e,p=i("."+se,u),b=o,k=i("."+vl+", ."+ov,u);ei(u,t),gf(n,a,v,p,b,k,f,r)}function af(){function t(){n.location.href=rf+"/LogOut.aspx"}ht.anyNavigationUnitHasChanges()?pt.show({message:f("shell_unsaved_message"),title:f("shell_save_title"),buttons:[{text:f("shell_logout_btn"),icon:"check",result:p.yes},{text:f("shell_stay_btn"),icon:"back",result:p.no}],defaultResult:p.no}).then(function(n){n===p.yes&&(ai=!1,t())}):t()}function oi(n,t){a++,hr(n,t)}function si(n){a--,a<=0&&(d=!1,l=null,ar(n))}function b(n){l=0,hr(n)}function hr(n,t){if(a>0){var i=t?t:gr,r=Date.now()+i;(!l||r<l)&&(l=r,ti(function(){vf(n)},i+1))}}function vf(n){!!l&&Date.now()>=l&&!wt&&a>0&&(d=!0,ar(n))}function ar(){d?(h.hasClass(dt)&&(o(s.progressShow),h.removeClass(ct(dt,nu))),ti(function(){d&&h.addClass(nu)},1)):h.hasClass(dt)||(o(s.progressHide),h.removeClass(nu),ti(function(){d||h.addClass(dt).removeClass(nu)},200))}function yf(n){var t=this;oi(t,50),n._thenEx(function(){si(t)})}function yr(n){var r=n.task,i=n.index===0,t={};return n.isBrowseMode()?t.showOk=n.boundaryOption===nt.nested:(t.showOkCancel=n.boundaryOption===nt.nested,t.showSaveDiscard=!t.showOkCancel),n.boundaryOption===nt.none&&(t.showOk=t.showOkCancel=t.showSaveDiscard=!1),t.showBackClose=!t.showSaveDiscard&&!t.showOk&&!t.showOkCancel&&!i,i&&(t.showLogo=!0),t.showLogOut=i,t}function pf(){var t=uf("SPHostUrl"),r,i,n,u;if(t=decodeURIComponent(t),r=/^https?:\/\/[a-zA-Z\u00C0-\u1FFF\u2800-\uFFFD0-9\-]+([.\/:][a-zA-Z\u00C0-\u1FFF\u2800-\uFFFD0-9\-]+)*\/?$/,r.test(t))return i={spHostUrl:t},n=uf("SPChromeColors"),n=decodeURIComponent(n),u=/^[0-9a-fA-F]{16}$/,u.test(n)&&(i.backgroundColor=n.substring(2,8),i.linkFontColor=n.substring(10,16)),i}function wf(u,e,o){var l,s,h,a,c,v;!wi&&o.backgroundColor&&o.linkFontColor&&(wi=!0,l="<style> .msls-sharepoint-chrome { background-color: #"+o.backgroundColor+"; }\r\n .msls-sharepoint-chrome a.msls-sharepoint-chrome-link, .msls-sharepoint-chrome a.msls-sharepoint-chrome-link:visited, .msls-sharepoint-chrome a.msls-sharepoint-chrome-link:hover, .msls-sharepoint-chrome a.msls-sharepoint-chrome-link:active  { color: #"+o.linkFontColor+"; } <\/style>",t.prepend(l)),s=i("<div class='"+ct(ny,re)+"'><\/div>"),h="createSharePointChrome",n[h]&&typeof n[h]=="function"?n[h](s,o.spHostUrl):(a=i("<a href='"+o.spHostUrl+"' class='"+iy+"' target='_top'>"+f("shell_back_to_sharePoint_home_site")+"<\/a>"),a.appendTo(s)),c=new r.ui.controls.ContentControl(s),v=i("div[data-role='header']",u),c.render(),s.prependTo(v),e.registerPageUiControl(c),t.addClass(ty)}function pr(t,r){function s(n,t){var i=parseFloat(n[t]);return i>0?i:0}var nt=document.getElementById(r),h=nt.getElementsByClassName("msls-dialog-frame")[0],a,v,d,y,p,g,o,w;if(h){var f=n.getComputedStyle(h),b=h.style,c=i(n).height(),l=i(n).width(),k,u={},e,tt=s(f,"paddingTop")===0;tt?(u.height="100%",u.marginTop=0):(a=s(f,"maxHeight"),v=a>0?Math.min(a,c):c,u.height=v,k=v,d=Math.max(0,c-k)/2,u.marginTop=d),y=s(f,"maxWidth"),p=y>0?Math.min(y,l):l,u.width=p,f.marginLeft!=="auto"&&(g=Math.max(0,l-p)/2,u.marginLeft=g);for(e in u)o=u[e],w=typeof o=="string"?o:o.toString()+"px",w!==b[e]&&(b[e]=w)}}function bf(n,t,u,f){function s(){e.resolve()}var o=r.shellView,e=new i.Deferred;switch(n){case es:df(o,n,t,u,f,s);break;case tu:case he:ne(o,n,t,u,f,s);break;default:e.reject("Unexpected transition name: "+n)}return e.promise()}function df(n,t,i,r,u,f){var e=!i;er(),st(n,{transitionName:t,stage1Delay:e?0:167,stage3Delay:167,reverse:i,$ins:r,$outs:u,onStage2:function(){return r.addClass(gu),e&&(pi(!1),v(r,r,!0,!0)),!0},onCleanup:function(){return u.removeClass(gu),i&&(pi(!1),v(r,null,!1,!1)),tr(n,r)},onComplete:f})}function gf(n,t,r,u,f,e,o,s){var l=gv,h=t.parent(),a=o?0:u.outerHeight(),c=h.hasClass(nf);c&&h.removeClass(nf),st(n,{transitionName:l,reverse:!1,stage1Delay:167,stage3Delay:167,$ins:i().add(r).add(f),$outs:i().add(t).add(u),onStage2:function(){return o=o||t.hasClass(ie)!==r.hasClass(ie)||a!==f.outerHeight(),v(r,o?null:r,!0,o),e.each(function(){i(this).data("mobile-fixedtoolbar")&&i(this).fixedtoolbar("show")}),!0},onStage3:function(){r.addClass(oe),f.addClass(se)},onCleanup:function(){t.removeClass(oe),u.removeClass(se),c&&h.addClass(nf)},onComplete:s})}function ne(n,t,i,r,u,f){var e,o=!i;t===tu?e=!0:t===he&&(e=!1,t=tu),er(),st(n,{transitionName:t,reverse:i,stage1Delay:0,stage3Delay:o?167:267,$ins:r,$outs:u,onStage1:function(){r.addClass(gu)},onStage2:function(){return o&&(pr(n,r[0].id),pi(!1),v(r,r,!0,!0)),!0},onStage3:function(){i&&e&&et.removeClass(nu)},onCleanup:function(){return u.removeClass(gu),i&&(pi(!1),v(r,null,!1,!1)),tr(n,r)},onComplete:f})}function te(n,t,r){er();var u=t;st(n,{transitionName:dv,stage1Delay:0,stage3Delay:167,reverse:!1,$ins:u,$outs:br,onStage1:function(){u.css("opacity","")},onStage2:function(){pi(!1),v(u,u,!0,!0),i(pl).remove()},onCleanup:function(){},onComplete:r})}function ot(n){return c.Promise.join([n?n():null])}function rt(n){if(n===0)return null;var t=n;return o("StartDelay_"+t.toString()),new c.Promise(function(n){ti(function(){o("EndDelay_"+t.toString()),n()},t)})}function st(n,i){o(s.transitionStart),b(n);var f=i.transitionName,r=i.$ins,u=i.$outs,h=i.onStage1,l=i.onStage2,a=i.onStage3,v=i.onCleanup,e=i.onComplete,y=i.stage1Delay,p=i.stage3Delay;c.Promise.join([]).then(function(){return o(s.transition_Stage1Start),ot(h)}).then(function(){return u.addClass(os),r.addClass(na),at(t,i.reverse,ta),t.addClass(f+" "+ce),rt(y)}).then(function(){return o(s.transition_Stage2Start),b(n),t.removeClass(ce).addClass(ia),u.addClass(ue),r.removeClass(ue),ot(l)}).then(function(){return o(s.transition_Stage3Start),b(n),ot(a)}).then(function(){return t.removeClass(ia).addClass(ra),rt(p)}).then(function(){return o(s.transition_CleanupStart),b(n),ot(v)}).then(function(){le(t,f,ra,ta),le(u,os),le(r,na)}).then(function(){o(s.transitionEnd),e&&e()})}function v(n,t,i,r){!!n&&n.length>0&&!n[0].msls_attachedLabelUpdated&&(n[0].msls_attachedLabelUpdated=!0,be(n)),i?ua(t,!r):cr(t,!r)}function fe(t,r,u){var e=this;return i.mobile.popup.active?c.Promise.wrapError(f("shell_existingPopup")):new c.Promise(function(f){function y(n){return n.target.id!==l?!0:!1}var w=i.mobile.activePage,b=i(".msls-popup",i.mobile.activePage),l,c,a,p;i.each(b,function(n,r){return i(r).attr(li)===t.name?(c=i(r),l=r.id,!1):!0}),c?c.removeClass(dt):(o(s.createPopupStart),l=sr(e,"popup-"),c=hf(e,l,w,t),o(s.createPopupEnhance),c.trigger("create"),o(s.createPopupEnd)),o(s.openPopupStart),er();i(n).one("popupbeforeposition",function(n){y(n)||(pi(!1),v(c,null,!0,!0))});i(n).one("popupafteropen",function(n){y(n)||(f(),ve(c.parent(),hu),o(s.openPopupEnd))});c.one("popupafterclose",function(n){y(n)||(c.addClass(dt),e.commitActiveElement(),r(),o(s.closePopupEnd))});c.popup(),a={},u&&u.originalEvent&&(p=u.originalEvent,a.x=p.pageX,a.y=p.pageY),c.popup("open",a)})}function wr(){var t=i.mobile.popup.active;return t?new c.Promise(function(r){i(n).one("popupafterclose",function(){ni(r)});t.close()}):c.Promise.as()}function ee(){var n=document.activeElement;n&&(n.tagName==="INPUT"||n.tagName==="TEXTAREA")&&i(n).trigger("change")}function ct(){return Array.prototype.join.call(arguments," ")}function hi(n,t,r){var h=document.createElement("div"),f,e,u=n[t];return u?(f=u.templateData,h.innerHTML=u.html,e=i(h.firstChild)):(f={},u={templateData:f},n[t]=u,o(s.createTemplateStart),e=r(f),o(s.createTemplateEnd),e.appendTo(i(h)),u.html=h.innerHTML),e.detach(),{$element:e,templateData:f}}var ae="msls-screen",ye="msls-dismiss-dialog",ut="msls-tab-name",t,br=i([]),et,h,yt,ci="msls-progress-icon msls-progress-save-icon",kr="a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-popup, li",li="data-msls-name",dr="popupTemplate",gr=2e3,l=null,wt=0,d=!1,ai=!0,a=0,vi=!1,wi=!1,bt,iu=5,bi=[tu,he,es];n.location.hash&&kt(),i.mobile&&(i.mobile.autoInitializePage=!1,i.mobile.pushStateEnabled=!1),e(r,"ShellView",function(){this._pageIdMapping={},u(this,"_pageIdToIndexMapping",{})},null,{_nextPageId:1,_firstPageId:null,_initializeMobileOnce:!0,initialize:uu,navigate:eu,awaitBrowserNavigation:su,onNavigationUnitClosed:wu,logout:af,showProgress:yf,showPopup:fe,closePopup:wr,commitActiveElement:ee}),ys=new r.ShellView,u(r,"shellView",ys),u(r.shell,"shellView",ys)}(),function(){function u(t){var i=this;n.call(i,t)}function f(){if(!t){var n=this.entity,r=null;!n||!this.valuePropertyName||(r=n[this.valuePropertyName]),i(this,r)}}function i(n,i){t=!0;try{var r,u=n._textElement;n._isViewCreated&&!!u&&(r=s(n,i),u.text(n.text=r))}finally{t=!1}}function o(n){var u=n.entity,f,r,t=null,e;!u||n.valueProperty||(f=u.details.getModel(),r=ut(f,":@SummaryProperty"),!r||(t=r.property),t&&(n.valueProperty=t,n.valuePropertyName=kt(t.name),e=n.data,e.dataBind("value."+n.valuePropertyName,function(t){i(n,t)})))}function s(n,t){var r,i,u="";return n.valueProperty&&(r=vu(n.valueProperty,":@SupportedValue"),!r||(i=y(r).first(function(n){return n.value===t}),!i||(u=cf(i.displayName))),i||(u=yo(t,n.valueProperty))),u}var n=r.ui.controls.Text,t;e("ui.controls","Summary",u,n,{controlName:"Summary",entity:w(function(){o(this)}),valueProperty:null,valuePropertyName:null,_refreshView:f},{_fillTemplate:n._fillTemplate,_skipEnhance:!0}),r.ui.controls.Summary.prototype._propertyMappings={value:"entity",properties:{tap:"tap"}}}(),function(){function n(n){r.ui.controls.TextBox.call(this,n)}function t(n,t,r){var u='<input type="url" class="id-element" data-mini="true" />';i(u).appendTo(n),r.idElement=tt(n,fi(n,".id-element"))}e("ui.controls","WebAddressEditor",n,r.ui.controls.TextBox,{controlName:"WebAddressEditor"},{_fillTemplate:t,_isFormElement:!0}),r.ui.controls.WebAddressEditor.prototype._propertyMappings={stringValue:"text",maxLength:"maxLength",properties:{placeholderText:"placeholderText"}}}(),function(){function n(n){r.ui.controls.Text.call(this,n)}function t(){var u=this.text,t=this.text,r=this._textElement,n,i;if(this._isViewCreated&&typeof u=="string"){n=u.match(/(.*?[^,]), (.+)/),n&&(u=n[2],t=n[1]),r.text(u),n=t.match(/^https?:\/\/(.+)/i),n||(t="http://"+t),r.removeAttr("href"),r.removeClass("ui-link");try{i=document.createElement("a"),i.href=t,n=i.href.match(/^(https?:\/\/.+?)\/(.*)/i),i.href.match(/^https?:\/\/\//i)||i.href.toLowerCase()!==t.toLowerCase()&&(!n||(n[1]+n[2]).toLowerCase()!==t.toLowerCase())||(r.attr("href",i.href),r.addClass("ui-link"))}catch(f){}}}function u(n,t,r){i('<div class="msls-text-container"><a class="id-element" target="_blank"><\/a><\/div>').appendTo(n),r.idElement=tt(n,fi(n,".id-element"))}e("ui.controls","WebAddressViewer",n,r.ui.controls.Text,{controlName:"WebAddressViewer",_refreshView:t},{_fillTemplate:u})}(),function(){var i=r.data.DataBindingMode,n=function(n,i){function u(n,t,i,f){var o,e,s;for(o in t)f.push(o),e=t[o],typeof e=="string"?(s=new r.data.DataBinding(f.join("."),i,e,n,yt.oneWayFromSource),s.bind()):u(n,e,i,f),f.pop()}function e(n,t,i){var r,f;for(r in t)f=t[r],typeof f=="string"?n[f]=i[r]:r==="properties"?e(n,f,i[r]):u(n,f,i,[r])}function o(n,t,i){var u,f,e;for(u in t)f=t[u],e=new r.data.DataBinding(f,i,u,n),e.bind()}i&&(we[n]=i),sa[n]=function(n,r,u){var a=r.screen.constructor,s,v=i,h,c,l;if(s=new v(n),s.data=r,h=s._propertyMappings,!h||e(s,h,r),c=s._editableProperties,!c||o(s,c,r),u!==t?s.attachView(u):s.render(),l=a[r.name+"_postRender"],!!l)try{l.call(null,n[0],r)}catch(y){r.displayError=f("customControl_postRenderError_2args",r.name,y)}return s}};n("DateTimePicker",r.ui.controls.DateTimePicker),n("DatePicker",r.ui.controls.DatePicker),n("Control",r.ui.Control),n("TextBox",r.ui.controls.TextBox),n("Text",r.ui.controls.Text),n("TextArea",r.ui.controls.TextArea),n("RowsLayout",r.ui.controls.RowsLayout),n("ColumnsLayout",r.ui.controls.ColumnsLayout),n("List",r.ui.controls.ListView),n("TileList",r.ui.controls.ListView),n("Button",r.ui.controls.Button),n("CommandBarButton",r.ui.controls.CommandBarButton),n("Summary",r.ui.controls.Summary),n("MoneyViewer",r.ui.controls.MoneyViewer),n("MoneyEditor",r.ui.controls.MoneyEditor),n("PercentViewer",r.ui.controls.PercentViewer),n("PercentEditor",r.ui.controls.PercentEditor),n("PhoneNumberViewer",r.ui.controls.PhoneNumberViewer),n("PhoneNumberEditor",r.ui.controls.PhoneNumberEditor),n("EmailAddressEditor",r.ui.controls.EmailAddressEditor),n("EmailAddressViewer",r.ui.controls.EmailAddressViewer),n("FlipSwitchControl",r.ui.controls.FlipSwitchControl),n("WebAddressEditor",r.ui.controls.WebAddressEditor),n("WebAddressViewer",r.ui.controls.WebAddressViewer),n("Image",r.ui.controls.Image),n("ValueDropdown",r.ui.controls.Dropdown),n("DetailsModalPicker",r.ui.controls.ModalPicker),n("Paragraph",r.ui.controls.Paragraph),n("ValueCustomControl",r.ui.controls.CustomControl),n("GroupCustomControl",r.ui.controls.CustomControl),n("CollectionCustomControl",r.ui.controls.CustomControl),n("ScreenCustomControl",r.ui.controls.CustomControl),n("NoControl",r.ui.controls.NoControl)}(),n.msls||(n.msls=b.getPrototypeOf(r))})(window);
// SIG // Begin signature block
// SIG // MIIaqwYJKoZIhvcNAQcCoIIanDCCGpgCAQExCzAJBgUr
// SIG // DgMCGgUAMGcGCisGAQQBgjcCAQSgWTBXMDIGCisGAQQB
// SIG // gjcCAR4wJAIBAQQQEODJBs441BGiowAQS9NQkAIBAAIB
// SIG // AAIBAAIBAAIBADAhMAkGBSsOAwIaBQAEFEiSrw/96VDz
// SIG // wicZmycAkqBCfzA1oIIVgjCCBMMwggOroAMCAQICEzMA
// SIG // AAArOTJIwbLJSPMAAAAAACswDQYJKoZIhvcNAQEFBQAw
// SIG // dzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0
// SIG // b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1p
// SIG // Y3Jvc29mdCBDb3Jwb3JhdGlvbjEhMB8GA1UEAxMYTWlj
// SIG // cm9zb2Z0IFRpbWUtU3RhbXAgUENBMB4XDTEyMDkwNDIx
// SIG // MTIzNFoXDTEzMTIwNDIxMTIzNFowgbMxCzAJBgNVBAYT
// SIG // AlVTMRMwEQYDVQQIEwpXYXNoaW5ndG9uMRAwDgYDVQQH
// SIG // EwdSZWRtb25kMR4wHAYDVQQKExVNaWNyb3NvZnQgQ29y
// SIG // cG9yYXRpb24xDTALBgNVBAsTBE1PUFIxJzAlBgNVBAsT
// SIG // Hm5DaXBoZXIgRFNFIEVTTjpDMEY0LTMwODYtREVGODEl
// SIG // MCMGA1UEAxMcTWljcm9zb2Z0IFRpbWUtU3RhbXAgU2Vy
// SIG // dmljZTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoC
// SIG // ggEBAKa2MA4DZa5QWoZrhZ9IoR7JwO5eSQeF4HCWfL65
// SIG // X2JfBibTizm7GCKlLpKt2EuIOhqvm4OuyF45jMIyexZ4
// SIG // 7Tc4OvFi+2iCAmjs67tAirH+oSw2YmBwOWBiDvvGGDhv
// SIG // sJLWQA2Apg14izZrhoomFxj/sOtNurspE+ZcSI5wRjYm
// SIG // /jQ1qzTh99rYXOqZfTG3TR9X63zWlQ1mDB4OMhc+LNWA
// SIG // oc7r95iRAtzBX/04gPg5f11kyjdcO1FbXYVfzh4c+zS+
// SIG // X+UoVXBUnLjsfABVRlsomChWTOHxugkZloFIKjDI9zMg
// SIG // bOdpw7PUw07PMB431JhS1KkjRbKuXEFJT7RiaJMCAwEA
// SIG // AaOCAQkwggEFMB0GA1UdDgQWBBSlGDNTP5VgoUMW747G
// SIG // r9Irup5Y0DAfBgNVHSMEGDAWgBQjNPjZUkZwCu1A+3b7
// SIG // syuwwzWzDzBUBgNVHR8ETTBLMEmgR6BFhkNodHRwOi8v
// SIG // Y3JsLm1pY3Jvc29mdC5jb20vcGtpL2NybC9wcm9kdWN0
// SIG // cy9NaWNyb3NvZnRUaW1lU3RhbXBQQ0EuY3JsMFgGCCsG
// SIG // AQUFBwEBBEwwSjBIBggrBgEFBQcwAoY8aHR0cDovL3d3
// SIG // dy5taWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWNyb3Nv
// SIG // ZnRUaW1lU3RhbXBQQ0EuY3J0MBMGA1UdJQQMMAoGCCsG
// SIG // AQUFBwMIMA0GCSqGSIb3DQEBBQUAA4IBAQB+zLB75S++
// SIG // 51a1z3PbqlLRFjnGtM361/4eZbXnSPObRogFZmomhl7+
// SIG // h1jcxmOOOID0CEZ8K3OxDr9BqsvHqpSkN/BkOeHF1fnO
// SIG // B86r5CXwaa7URuL+ZjI815fFMiH67holoF4MQiwRMzqC
// SIG // g/3tHbO+zpGkkSVxuatysJ6v5M8AYolwqbhKUIzuLyJk
// SIG // pajmTWuVLBx57KejMdqQYJCkbv6TAg0/LCQNxmomgVGD
// SIG // ShC7dWNEqmkIxgPr4s8L7VY67O9ypwoM9ADTIrivInKz
// SIG // 58ScCyiggMrj4dc5ZjDnRhcY5/qC+lkLeryoDf4c/wOL
// SIG // Y7JNEgIjTy2zhYQ74qFH6M8VMIIE7DCCA9SgAwIBAgIT
// SIG // MwAAALARrwqL0Duf3QABAAAAsDANBgkqhkiG9w0BAQUF
// SIG // ADB5MQswCQYDVQQGEwJVUzETMBEGA1UECBMKV2FzaGlu
// SIG // Z3RvbjEQMA4GA1UEBxMHUmVkbW9uZDEeMBwGA1UEChMV
// SIG // TWljcm9zb2Z0IENvcnBvcmF0aW9uMSMwIQYDVQQDExpN
// SIG // aWNyb3NvZnQgQ29kZSBTaWduaW5nIFBDQTAeFw0xMzAx
// SIG // MjQyMjMzMzlaFw0xNDA0MjQyMjMzMzlaMIGDMQswCQYD
// SIG // VQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4G
// SIG // A1UEBxMHUmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0
// SIG // IENvcnBvcmF0aW9uMQ0wCwYDVQQLEwRNT1BSMR4wHAYD
// SIG // VQQDExVNaWNyb3NvZnQgQ29ycG9yYXRpb24wggEiMA0G
// SIG // CSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDor1yiIA34
// SIG // KHy8BXt/re7rdqwoUz8620B9s44z5lc/pVEVNFSlz7SL
// SIG // qT+oN+EtUO01Fk7vTXrbE3aIsCzwWVyp6+HXKXXkG4Un
// SIG // m/P4LZ5BNisLQPu+O7q5XHWTFlJLyjPFN7Dz636o9UEV
// SIG // XAhlHSE38Cy6IgsQsRCddyKFhHxPuRuQsPWj/ov0DJpO
// SIG // oPXJCiHiquMBNkf9L4JqgQP1qTXclFed+0vUDoLbOI8S
// SIG // /uPWenSIZOFixCUuKq6dGB8OHrbCryS0DlC83hyTXEmm
// SIG // ebW22875cHsoAYS4KinPv6kFBeHgD3FN/a1cI4Mp68fF
// SIG // SsjoJ4TTfsZDC5UABbFPZXHFAgMBAAGjggFgMIIBXDAT
// SIG // BgNVHSUEDDAKBggrBgEFBQcDAzAdBgNVHQ4EFgQUWXGm
// SIG // WjNN2pgHgP+EHr6H+XIyQfIwUQYDVR0RBEowSKRGMEQx
// SIG // DTALBgNVBAsTBE1PUFIxMzAxBgNVBAUTKjMxNTk1KzRm
// SIG // YWYwYjcxLWFkMzctNGFhMy1hNjcxLTc2YmMwNTIzNDRh
// SIG // ZDAfBgNVHSMEGDAWgBTLEejK0rQWWAHJNy4zFha5TJoK
// SIG // HzBWBgNVHR8ETzBNMEugSaBHhkVodHRwOi8vY3JsLm1p
// SIG // Y3Jvc29mdC5jb20vcGtpL2NybC9wcm9kdWN0cy9NaWND
// SIG // b2RTaWdQQ0FfMDgtMzEtMjAxMC5jcmwwWgYIKwYBBQUH
// SIG // AQEETjBMMEoGCCsGAQUFBzAChj5odHRwOi8vd3d3Lm1p
// SIG // Y3Jvc29mdC5jb20vcGtpL2NlcnRzL01pY0NvZFNpZ1BD
// SIG // QV8wOC0zMS0yMDEwLmNydDANBgkqhkiG9w0BAQUFAAOC
// SIG // AQEAMdduKhJXM4HVncbr+TrURE0Inu5e32pbt3nPApy8
// SIG // dmiekKGcC8N/oozxTbqVOfsN4OGb9F0kDxuNiBU6fNut
// SIG // zrPJbLo5LEV9JBFUJjANDf9H6gMH5eRmXSx7nR2pEPoc
// SIG // sHTyT2lrnqkkhNrtlqDfc6TvahqsS2Ke8XzAFH9IzU2y
// SIG // RPnwPJNtQtjofOYXoJtoaAko+QKX7xEDumdSrcHps3Om
// SIG // 0mPNSuI+5PNO/f+h4LsCEztdIN5VP6OukEAxOHUoXgSp
// SIG // Rm3m9Xp5QL0fzehF1a7iXT71dcfmZmNgzNWahIeNJDD3
// SIG // 7zTQYx2xQmdKDku/Og7vtpU6pzjkJZIIpohmgjCCBbww
// SIG // ggOkoAMCAQICCmEzJhoAAAAAADEwDQYJKoZIhvcNAQEF
// SIG // BQAwXzETMBEGCgmSJomT8ixkARkWA2NvbTEZMBcGCgmS
// SIG // JomT8ixkARkWCW1pY3Jvc29mdDEtMCsGA1UEAxMkTWlj
// SIG // cm9zb2Z0IFJvb3QgQ2VydGlmaWNhdGUgQXV0aG9yaXR5
// SIG // MB4XDTEwMDgzMTIyMTkzMloXDTIwMDgzMTIyMjkzMlow
// SIG // eTELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldhc2hpbmd0
// SIG // b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNVBAoTFU1p
// SIG // Y3Jvc29mdCBDb3Jwb3JhdGlvbjEjMCEGA1UEAxMaTWlj
// SIG // cm9zb2Z0IENvZGUgU2lnbmluZyBQQ0EwggEiMA0GCSqG
// SIG // SIb3DQEBAQUAA4IBDwAwggEKAoIBAQCycllcGTBkvx2a
// SIG // YCAgQpl2U2w+G9ZvzMvx6mv+lxYQ4N86dIMaty+gMuz/
// SIG // 3sJCTiPVcgDbNVcKicquIEn08GisTUuNpb15S3GbRwfa
// SIG // /SXfnXWIz6pzRH/XgdvzvfI2pMlcRdyvrT3gKGiXGqel
// SIG // cnNW8ReU5P01lHKg1nZfHndFg4U4FtBzWwW6Z1KNpbJp
// SIG // L9oZC/6SdCnidi9U3RQwWfjSjWL9y8lfRjFQuScT5EAw
// SIG // z3IpECgixzdOPaAyPZDNoTgGhVxOVoIoKgUyt0vXT2Pn
// SIG // 0i1i8UU956wIAPZGoZ7RW4wmU+h6qkryRs83PDietHdc
// SIG // pReejcsRj1Y8wawJXwPTAgMBAAGjggFeMIIBWjAPBgNV
// SIG // HRMBAf8EBTADAQH/MB0GA1UdDgQWBBTLEejK0rQWWAHJ
// SIG // Ny4zFha5TJoKHzALBgNVHQ8EBAMCAYYwEgYJKwYBBAGC
// SIG // NxUBBAUCAwEAATAjBgkrBgEEAYI3FQIEFgQU/dExTtMm
// SIG // ipXhmGA7qDFvpjy82C0wGQYJKwYBBAGCNxQCBAweCgBT
// SIG // AHUAYgBDAEEwHwYDVR0jBBgwFoAUDqyCYEBWJ5flJRP8
// SIG // KuEKU5VZ5KQwUAYDVR0fBEkwRzBFoEOgQYY/aHR0cDov
// SIG // L2NybC5taWNyb3NvZnQuY29tL3BraS9jcmwvcHJvZHVj
// SIG // dHMvbWljcm9zb2Z0cm9vdGNlcnQuY3JsMFQGCCsGAQUF
// SIG // BwEBBEgwRjBEBggrBgEFBQcwAoY4aHR0cDovL3d3dy5t
// SIG // aWNyb3NvZnQuY29tL3BraS9jZXJ0cy9NaWNyb3NvZnRS
// SIG // b290Q2VydC5jcnQwDQYJKoZIhvcNAQEFBQADggIBAFk5
// SIG // Pn8mRq/rb0CxMrVq6w4vbqhJ9+tfde1MOy3XQ60L/svp
// SIG // LTGjI8x8UJiAIV2sPS9MuqKoVpzjcLu4tPh5tUly9z7q
// SIG // QX/K4QwXaculnCAt+gtQxFbNLeNK0rxw56gNogOlVuC4
// SIG // iktX8pVCnPHz7+7jhh80PLhWmvBTI4UqpIIck+KUBx3y
// SIG // 4k74jKHK6BOlkU7IG9KPcpUqcW2bGvgc8FPWZ8wi/1wd
// SIG // zaKMvSeyeWNWRKJRzfnpo1hW3ZsCRUQvX/TartSCMm78
// SIG // pJUT5Otp56miLL7IKxAOZY6Z2/Wi+hImCWU4lPF6H0q7
// SIG // 0eFW6NB4lhhcyTUWX92THUmOLb6tNEQc7hAVGgBd3TVb
// SIG // Ic6YxwnuhQ6MT20OE049fClInHLR82zKwexwo1eSV32U
// SIG // jaAbSANa98+jZwp0pTbtLS8XyOZyNxL0b7E8Z4L5UrKN
// SIG // MxZlHg6K3RDeZPRvzkbU0xfpecQEtNP7LN8fip6sCvsT
// SIG // J0Ct5PnhqX9GuwdgR2VgQE6wQuxO7bN2edgKNAltHIAx
// SIG // H+IOVN3lofvlRxCtZJj/UBYufL8FIXrilUEnacOTj5XJ
// SIG // jdibIa4NXJzwoq6GaIMMai27dmsAHZat8hZ79haDJLmI
// SIG // z2qoRzEvmtzjcT3XAH5iR9HOiMm4GPoOco3Boz2vAkBq
// SIG // /2mbluIQqBC0N1AI1sM9MIIGBzCCA++gAwIBAgIKYRZo
// SIG // NAAAAAAAHDANBgkqhkiG9w0BAQUFADBfMRMwEQYKCZIm
// SIG // iZPyLGQBGRYDY29tMRkwFwYKCZImiZPyLGQBGRYJbWlj
// SIG // cm9zb2Z0MS0wKwYDVQQDEyRNaWNyb3NvZnQgUm9vdCBD
// SIG // ZXJ0aWZpY2F0ZSBBdXRob3JpdHkwHhcNMDcwNDAzMTI1
// SIG // MzA5WhcNMjEwNDAzMTMwMzA5WjB3MQswCQYDVQQGEwJV
// SIG // UzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4GA1UEBxMH
// SIG // UmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0IENvcnBv
// SIG // cmF0aW9uMSEwHwYDVQQDExhNaWNyb3NvZnQgVGltZS1T
// SIG // dGFtcCBQQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw
// SIG // ggEKAoIBAQCfoWyx39tIkip8ay4Z4b3i48WZUSNQrc7d
// SIG // GE4kD+7Rp9FMrXQwIBHrB9VUlRVJlBtCkq6YXDAm2gBr
// SIG // 6Hu97IkHD/cOBJjwicwfyzMkh53y9GccLPx754gd6udO
// SIG // o6HBI1PKjfpFzwnQXq/QsEIEovmmbJNn1yjcRlOwhtDl
// SIG // KEYuJ6yGT1VSDOQDLPtqkJAwbofzWTCd+n7Wl7PoIZd+
// SIG // +NIT8wi3U21StEWQn0gASkdmEScpZqiX5NMGgUqi+YSn
// SIG // EUcUCYKfhO1VeP4Bmh1QCIUAEDBG7bfeI0a7xC1Un68e
// SIG // eEExd8yb3zuDk6FhArUdDbH895uyAc4iS1T/+QXDwiAL
// SIG // AgMBAAGjggGrMIIBpzAPBgNVHRMBAf8EBTADAQH/MB0G
// SIG // A1UdDgQWBBQjNPjZUkZwCu1A+3b7syuwwzWzDzALBgNV
// SIG // HQ8EBAMCAYYwEAYJKwYBBAGCNxUBBAMCAQAwgZgGA1Ud
// SIG // IwSBkDCBjYAUDqyCYEBWJ5flJRP8KuEKU5VZ5KShY6Rh
// SIG // MF8xEzARBgoJkiaJk/IsZAEZFgNjb20xGTAXBgoJkiaJ
// SIG // k/IsZAEZFgltaWNyb3NvZnQxLTArBgNVBAMTJE1pY3Jv
// SIG // c29mdCBSb290IENlcnRpZmljYXRlIEF1dGhvcml0eYIQ
// SIG // ea0WoUqgpa1Mc1j0BxMuZTBQBgNVHR8ESTBHMEWgQ6BB
// SIG // hj9odHRwOi8vY3JsLm1pY3Jvc29mdC5jb20vcGtpL2Ny
// SIG // bC9wcm9kdWN0cy9taWNyb3NvZnRyb290Y2VydC5jcmww
// SIG // VAYIKwYBBQUHAQEESDBGMEQGCCsGAQUFBzAChjhodHRw
// SIG // Oi8vd3d3Lm1pY3Jvc29mdC5jb20vcGtpL2NlcnRzL01p
// SIG // Y3Jvc29mdFJvb3RDZXJ0LmNydDATBgNVHSUEDDAKBggr
// SIG // BgEFBQcDCDANBgkqhkiG9w0BAQUFAAOCAgEAEJeKw1wD
// SIG // RDbd6bStd9vOeVFNAbEudHFbbQwTq86+e4+4LtQSooxt
// SIG // YrhXAstOIBNQmd16QOJXu69YmhzhHQGGrLt48ovQ7DsB
// SIG // 7uK+jwoFyI1I4vBTFd1Pq5Lk541q1YDB5pTyBi+FA+mR
// SIG // KiQicPv2/OR4mS4N9wficLwYTp2OawpylbihOZxnLcVR
// SIG // DupiXD8WmIsgP+IHGjL5zDFKdjE9K3ILyOpwPf+FChPf
// SIG // wgphjvDXuBfrTot/xTUrXqO/67x9C0J71FNyIe4wyrt4
// SIG // ZVxbARcKFA7S2hSY9Ty5ZlizLS/n+YWGzFFW6J1wlGys
// SIG // OUzU9nm/qhh6YinvopspNAZ3GmLJPR5tH4LwC8csu89D
// SIG // s+X57H2146SodDW4TsVxIxImdgs8UoxxWkZDFLyzs7BN
// SIG // Z8ifQv+AeSGAnhUwZuhCEl4ayJ4iIdBD6Svpu/RIzCzU
// SIG // 2DKATCYqSCRfWupW76bemZ3KOm+9gSd0BhHudiG/m4LB
// SIG // J1S2sWo9iaF2YbRuoROmv6pH8BJv/YoybLL+31HIjCPJ
// SIG // Zr2dHYcSZAI9La9Zj7jkIeW1sMpjtHhUBdRBLlCslLCl
// SIG // eKuzoJZ1GtmShxN1Ii8yqAhuoFuMJb+g74TKIdbrHk/J
// SIG // mu5J4PcBZW+JC33Iacjmbuqnl84xKf8OxVtc2E0bodj6
// SIG // L54/LlUWa8kTo/0xggSVMIIEkQIBATCBkDB5MQswCQYD
// SIG // VQQGEwJVUzETMBEGA1UECBMKV2FzaGluZ3RvbjEQMA4G
// SIG // A1UEBxMHUmVkbW9uZDEeMBwGA1UEChMVTWljcm9zb2Z0
// SIG // IENvcnBvcmF0aW9uMSMwIQYDVQQDExpNaWNyb3NvZnQg
// SIG // Q29kZSBTaWduaW5nIFBDQQITMwAAALARrwqL0Duf3QAB
// SIG // AAAAsDAJBgUrDgMCGgUAoIGuMBkGCSqGSIb3DQEJAzEM
// SIG // BgorBgEEAYI3AgEEMBwGCisGAQQBgjcCAQsxDjAMBgor
// SIG // BgEEAYI3AgEVMCMGCSqGSIb3DQEJBDEWBBRbTJt0wClo
// SIG // 5Hwm9CkoZyhj6FhXszBOBgorBgEEAYI3AgEMMUAwPqAk
// SIG // gCIAbQBzAGwAcwAtADEALgAwAC4AMAAuAG0AaQBuAC4A
// SIG // agBzoRaAFGh0dHA6Ly9taWNyb3NvZnQuY29tMA0GCSqG
// SIG // SIb3DQEBAQUABIIBAKYRjCarOkQ0YT9rX3FGniVxE6lK
// SIG // mEqhS9QgMj6oRq9YZX4OlEHI4X09PMyLmO0+lBv0ITWI
// SIG // u/r0j4o9gtf2r1FXjefEpUDnTEHhAvg3wDXC1cxE+kCU
// SIG // nGOLg/Hh2v3Qt7C8Cvf6UmLRgJnRCDX3yItpXnm1o0Lw
// SIG // BH5shEHIBJKuK+Oionn5Rs2HG7kNhhjWdbcxPIGgLlnv
// SIG // B4r7VF1xxRz5aKsS4n1SyQ2T68D/1pNdVSwrpvDOhTL2
// SIG // jR2tYKlZNTpcYdn/vfRxo6FJd1rEUIf4gmL5nNtIKdcF
// SIG // AGybuIugPJYcmtwrNMkg4lqZlVJIYCAHlFWBVAvnKxxi
// SIG // oL7FPJShggIoMIICJAYJKoZIhvcNAQkGMYICFTCCAhEC
// SIG // AQEwgY4wdzELMAkGA1UEBhMCVVMxEzARBgNVBAgTCldh
// SIG // c2hpbmd0b24xEDAOBgNVBAcTB1JlZG1vbmQxHjAcBgNV
// SIG // BAoTFU1pY3Jvc29mdCBDb3Jwb3JhdGlvbjEhMB8GA1UE
// SIG // AxMYTWljcm9zb2Z0IFRpbWUtU3RhbXAgUENBAhMzAAAA
// SIG // KzkySMGyyUjzAAAAAAArMAkGBSsOAwIaBQCgXTAYBgkq
// SIG // hkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJ
// SIG // BTEPFw0xMzAzMDgwNTAyMjJaMCMGCSqGSIb3DQEJBDEW
// SIG // BBQ+Idfwk9cAAdjCPjegNDWqrlmeUjANBgkqhkiG9w0B
// SIG // AQUFAASCAQBDKFl6nZ1L3/K4z+wr2U8OXJvDbV/mVWoA
// SIG // Aq3OtlXh0qp2LNnKfr0QZM1SVmH1jTT7PvEO3cKyXRXX
// SIG // 1I05hSPfZour1r2yJxLsJpN+xUjskZfckCwmROPAO1/b
// SIG // mko51GFNcN4c4FLDmwylbEPpnE5XQZI/AkiLeg8t4UJN
// SIG // qJmcvsX9+956+9imuMS1qdaeRoNQliltmttGunjWtqI6
// SIG // TC58wPF21pw0TPqBpmLxNK+X8ph93JCccC+cc+Gewljr
// SIG // TOvR3CBA0/voouyjbCYAxwBR5Rz2MKG/nu8FasWNri/w
// SIG // iLwCZjqrQiqMzYkuuho2/eA+xtR20s2aYcxVA6i3n8ds
// SIG // End signature block
